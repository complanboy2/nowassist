import{c as de,r as l,j as e,S as Ke,F as Ye,R as Xe}from"./styles-JbCIy9gg.js";import{c as V,K as Ze,N as Qe,F as et,I as tt,S as st}from"./clsx-DvX4EETU.js";import{N as rt,C as Te}from"./Navigation-CO5zal75.js";import{C as ge,F as lt}from"./CustomDropdown-DXUEvWtt.js";import{C as Le,X as ce}from"./x-DN5GY5RW.js";import{C as Ee}from"./chevron-down-nxCveXgQ.js";import{U as nt}from"./upload-Cmqf7hcD.js";import{G as Oe}from"./git-compare-DPVDmqHd.js";import{L as at}from"./lock-WCli1XxV.js";import{D as ot}from"./download-Bac1pM3S.js";import{C as ee}from"./copy-DfUEvceU.js";const it=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ct=de("circle-question-mark",it);const dt=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],mt=de("grip-vertical",dt);const ut=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],xt=de("lightbulb",ut);const ht=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],pt=de("lock-open",ht),re=typeof window<"u"?l.useLayoutEffect:l.useEffect;function Ae(t){if(t!==void 0)switch(typeof t){case"number":return t;case"string":{if(t.endsWith("px"))return parseFloat(t);break}}}function ft({box:t,defaultHeight:d,defaultWidth:m,disabled:u,element:a,mode:c,style:b}){const{styleHeight:n,styleWidth:r}=l.useMemo(()=>({styleHeight:Ae(b?.height),styleWidth:Ae(b?.width)}),[b?.height,b?.width]),[o,x]=l.useState({height:d,width:m}),h=u||n!==void 0||c==="only-width"||n!==void 0&&r!==void 0;return re(()=>{if(a===null||h)return;const C=new ResizeObserver(H=>{for(const T of H){const{contentRect:A,target:v}=T;a===v&&x(p=>p.height===A.height&&p.width===A.width?p:{height:A.height,width:A.width})}});return C.observe(a,{box:t}),()=>{C?.unobserve(a)}},[t,h,a,n,r]),l.useMemo(()=>({height:n??o.height,width:r??o.width}),[o,n,r])}function De(t){const d=l.useRef(()=>{throw new Error("Cannot call during render.")});return re(()=>{d.current=t},[t]),l.useCallback(m=>d.current?.(m),[d])}function je({containerElement:t,direction:d,isRtl:m,scrollOffset:u}){return u}function X(t,d="Assertion error"){if(!t)throw console.error(d),Error(d)}function se(t,d){if(t===d)return!0;if(!!t!=!!d||(X(t!==void 0),X(d!==void 0),Object.keys(t).length!==Object.keys(d).length))return!1;for(const m in t)if(!Object.is(d[m],t[m]))return!1;return!0}function $e({cachedBounds:t,itemCount:d,itemSize:m}){if(d===0)return 0;if(typeof m=="number")return d*m;{const u=t.get(t.size===0?0:t.size-1);X(u!==void 0,"Unexpected bounds cache miss");const a=(u.scrollOffset+u.size)/t.size;return d*a}}function bt({align:t,cachedBounds:d,index:m,itemCount:u,itemSize:a,containerScrollOffset:c,containerSize:b}){if(m<0||m>=u)throw RangeError(`Invalid index specified: ${m}`,{cause:`Index ${m} is not within the range of 0 - ${u-1}`});const n=$e({cachedBounds:d,itemCount:u,itemSize:a}),r=d.get(m),o=Math.max(0,Math.min(n-b,r.scrollOffset)),x=Math.max(0,r.scrollOffset-b+r.size);switch(t==="smart"&&(c>=x&&c<=o?t="auto":t="center"),t){case"start":return o;case"end":return x;case"center":return r.scrollOffset<=b/2?0:r.scrollOffset+r.size/2>=n-b/2?n-b:r.scrollOffset+r.size/2-b/2;case"auto":default:return c>=x&&c<=o?c:c<x?x:o}}function Me({cachedBounds:t,containerScrollOffset:d,containerSize:m,itemCount:u,overscanCount:a}){const c=u-1;let b=0,n=-1,r=0,o=-1,x=0;for(;x<c;){const h=t.get(x);if(h.scrollOffset+h.size>d)break;x++}for(b=x,r=Math.max(0,b-a);x<c;){const h=t.get(x);if(h.scrollOffset+h.size>=d+m)break;x++}return n=Math.min(c,x),o=Math.min(u-1,n+a),b<0&&(b=0,n=-1,r=0,o=-1),{startIndexVisible:b,stopIndexVisible:n,startIndexOverscan:r,stopIndexOverscan:o}}function gt({itemCount:t,itemProps:d,itemSize:m}){const u=new Map;return{get(a){for(X(a<t,`Invalid index ${a}`);u.size-1<a;){const b=u.size;let n;switch(typeof m){case"function":{n=m(b,d);break}case"number":{n=m;break}}if(b===0)u.set(b,{size:n,scrollOffset:0});else{const r=u.get(b-1);X(r!==void 0,`Unexpected bounds cache miss for index ${a}`),u.set(b,{scrollOffset:r.scrollOffset+r.size,size:n})}}const c=u.get(a);return X(c!==void 0,`Unexpected bounds cache miss for index ${a}`),c},set(a,c){u.set(a,c)},get size(){return u.size}}}function jt({itemCount:t,itemProps:d,itemSize:m}){return l.useMemo(()=>gt({itemCount:t,itemProps:d,itemSize:m}),[t,d,m])}function wt({containerSize:t,itemSize:d}){let m;switch(typeof d){case"string":{X(d.endsWith("%"),`Invalid item size: "${d}"; string values must be percentages (e.g. "100%")`),X(t!==void 0,"Container size must be defined if a percentage item size is specified"),m=t*parseInt(d)/100;break}default:{m=d;break}}return m}function vt({containerElement:t,containerStyle:d,defaultContainerSize:m=0,direction:u,isRtl:a=!1,itemCount:c,itemProps:b,itemSize:n,onResize:r,overscanCount:o}){const[x,h]=l.useState({startIndexVisible:0,startIndexOverscan:0,stopIndexVisible:-1,stopIndexOverscan:-1}),{startIndexVisible:C,startIndexOverscan:H,stopIndexVisible:T,stopIndexOverscan:A}={startIndexVisible:Math.min(c-1,x.startIndexVisible),startIndexOverscan:Math.min(c-1,x.startIndexOverscan),stopIndexVisible:Math.min(c-1,x.stopIndexVisible),stopIndexOverscan:Math.min(c-1,x.stopIndexOverscan)},{height:v=m,width:p=m}=ft({defaultHeight:m,defaultWidth:void 0,element:t,mode:"only-height",style:d}),w=l.useRef({height:0,width:0}),U=v,D=wt({containerSize:U,itemSize:n});l.useLayoutEffect(()=>{if(typeof r=="function"){const N=w.current;(N.height!==v||N.width!==p)&&(r({height:v,width:p},{...N}),N.height=v,N.width=p)}},[v,r,p]);const L=jt({itemCount:c,itemProps:b,itemSize:D}),B=l.useCallback(N=>L.get(N),[L]),$=l.useCallback(()=>$e({cachedBounds:L,itemCount:c,itemSize:D}),[L,c,D]),W=l.useCallback(N=>{const E=je({containerElement:t,direction:u,isRtl:a,scrollOffset:N});return Me({cachedBounds:L,containerScrollOffset:E,containerSize:U,itemCount:c,overscanCount:o})},[L,t,U,u,a,c,o]);re(()=>{const N=t?.scrollTop??0;h(W(N))},[t,u,W]),re(()=>{if(!t)return;const N=()=>{h(E=>{const{scrollLeft:z,scrollTop:k}=t,R=je({containerElement:t,direction:u,isRtl:a,scrollOffset:k}),F=Me({cachedBounds:L,containerScrollOffset:R,containerSize:U,itemCount:c,overscanCount:o});return se(F,E)?E:F})};return t.addEventListener("scroll",N),()=>{t.removeEventListener("scroll",N)}},[L,t,U,u,c,o]);const q=De(({align:N="auto",containerScrollOffset:E,index:z})=>{let k=bt({align:N,cachedBounds:L,containerScrollOffset:E,containerSize:U,index:z,itemCount:c,itemSize:D});if(t){if(k=je({containerElement:t,direction:u,isRtl:a,scrollOffset:k}),typeof t.scrollTo!="function"){const R=W(k);se(x,R)||h(R)}return k}});return{getCellBounds:B,getEstimatedSize:$,scrollToIndex:q,startIndexOverscan:H,startIndexVisible:C,stopIndexOverscan:A,stopIndexVisible:T}}function Nt(t){return l.useMemo(()=>t,Object.values(t))}function yt(t,d){const{ariaAttributes:m,style:u,...a}=t,{ariaAttributes:c,style:b,...n}=d;return se(m,c)&&se(u,b)&&se(a,n)}function Ct(t){return t!=null&&typeof t=="object"&&"getAverageRowHeight"in t&&typeof t.getAverageRowHeight=="function"}const we="data-react-window-index";function St({children:t,className:d,defaultHeight:m=0,listRef:u,onResize:a,onRowsRendered:c,overscanCount:b=3,rowComponent:n,rowCount:r,rowHeight:o,rowProps:x,tagName:h="div",style:C,...H}){const T=Nt(x),A=l.useMemo(()=>l.memo(n,yt),[n]),[v,p]=l.useState(null),w=Ct(o),U=l.useMemo(()=>w?k=>o.getRowHeight(k)??o.getAverageRowHeight():o,[w,o]),{getCellBounds:D,getEstimatedSize:L,scrollToIndex:B,startIndexOverscan:$,startIndexVisible:W,stopIndexOverscan:q,stopIndexVisible:N}=vt({containerElement:v,containerStyle:C,defaultContainerSize:m,direction:"vertical",itemCount:r,itemProps:T,itemSize:U,onResize:a,overscanCount:b});l.useImperativeHandle(u,()=>({get element(){return v},scrollToRow({align:k="auto",behavior:R="auto",index:F}){const J=B({align:k,containerScrollOffset:v?.scrollTop??0,index:F});typeof v?.scrollTo=="function"&&v.scrollTo({behavior:R,top:J})}}),[v,B]),re(()=>{if(!v)return;const k=Array.from(v.children).filter((R,F)=>{if(R.hasAttribute("aria-hidden"))return!1;const J=`${$+F}`;return R.setAttribute(we,J),!0});if(w)return o.observeRowElements(k)},[v,w,o,$,q]),l.useEffect(()=>{$>=0&&q>=0&&c&&c({startIndex:W,stopIndex:N},{startIndex:$,stopIndex:q})},[c,$,W,q,N]);const E=l.useMemo(()=>{const k=[];if(r>0)for(let R=$;R<=q;R++){const F=D(R);k.push(l.createElement(A,{...T,ariaAttributes:{"aria-posinset":R+1,"aria-setsize":r,role:"listitem"},key:R,index:R,style:{position:"absolute",left:0,transform:`translateY(${F.scrollOffset}px)`,height:w?void 0:F.size,width:"100%"}}))}return k},[A,D,w,r,T,$,q]),z=e.jsx("div",{"aria-hidden":!0,style:{height:L(),width:"100%",zIndex:-1}});return l.createElement(h,{role:"list",...H,className:d,ref:p,style:{position:"relative",maxHeight:"100%",flexGrow:1,overflowY:"auto",...C}},E,t,z)}function kt({defaultRowHeight:t,key:d}){const[m,u]=l.useState({key:d,map:new Map});m.key!==d&&u({key:d,map:new Map});const{map:a}=m,c=l.useCallback(()=>{let h=0;return a.forEach(C=>{h+=C}),h===0?t:h/a.size},[t,a]),b=l.useCallback(h=>{const C=a.get(h);return C!==void 0?C:(a.set(h,t),t)},[t,a]),n=l.useCallback((h,C)=>{u(H=>{if(H.map.get(h)===C)return H;const T=new Map(H.map);return T.set(h,C),{...H,map:T}})},[]),r=De(h=>{h.length!==0&&h.forEach(C=>{const{borderBoxSize:H,target:T}=C,A=T.getAttribute(we);X(A!==null,`Invalid ${we} attribute value`);const v=parseInt(A),{blockSize:p}=H[0];p&&n(v,p)})}),[o]=l.useState(()=>new ResizeObserver(r));l.useEffect(()=>()=>{o.disconnect()},[o]);const x=l.useCallback(h=>(h.forEach(C=>o.observe(C)),()=>{h.forEach(C=>o.unobserve(C))}),[o]);return l.useMemo(()=>({getAverageRowHeight:c,getRowHeight:b,setRowHeight:n,observeRowElements:x}),[c,b,n,x])}const Ie=48,Rt=48,qt=({filteredEntries:t,groupedEntries:d,groupBy:m,expandedGroups:u,toggleGroup:a,selectedEntryIndex:c,setSelectedEntryIndex:b,getStatusColor:n,formatBytes:r,formatTime:o,searchQuery:x,highlightText:h,handleSort:C,sortBy:H,sortOrder:T,entries:A})=>{const v=l.useRef(null),p=l.useRef(null),[w,U]=l.useState(600),D=l.useRef({});kt({defaultRowHeight:Ie});const L=l.useMemo(()=>{if(t.length===0)return[];if(m==="none")return t.map((N,E)=>({type:"entry",entry:N,index:E}));const q=[];return Object.entries(d).forEach(([N,E])=>{const z=u.has(N);q.push({type:"group-header",groupKey:N,groupEntries:E,isExpanded:z}),z&&E.forEach(k=>{const R=t.indexOf(k);R>=0&&q.push({type:"entry",entry:k,index:R})})}),q},[t,d,m,u]),B=l.useCallback(q=>L[q]?.type==="group-header"?Rt:D.current[q]!==void 0?D.current[q]:Ie,[L]);l.useEffect(()=>{const q=()=>{if(p.current){const E=p.current.clientHeight;E>0&&U(E)}};q();const N=new ResizeObserver(q);return p.current&&N.observe(p.current),()=>N.disconnect()},[]),l.useEffect(()=>{D.current={}},[L.length,u]);const $=({column:q,children:N,className:E=""})=>e.jsx("div",{onClick:()=>C(q),className:V("px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider cursor-pointer hover:bg-slate-100 transition select-none",E),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:N}),H===q&&(T==="asc"?e.jsx(Le,{className:"h-3 w-3"}):e.jsx(Ee,{className:"h-3 w-3"}))]})}),W=l.useCallback(({index:q,style:N,ariaAttributes:E})=>{const z=L[q];if(!z)return null;if(z.type==="group-header")return e.jsx("div",{style:N,...E,children:e.jsx("div",{className:"px-4 py-3 bg-slate-50 border-b border-slate-200",children:e.jsxs("button",{onClick:()=>{a(z.groupKey),setTimeout(()=>{v.current&&v.current.resetAfterIndex(q)},100)},className:"w-full flex items-center justify-between",children:[e.jsxs("span",{className:"font-semibold text-slate-900",children:[z.groupKey," (",z.groupEntries.length,")"]}),z.isExpanded?e.jsx(Le,{className:"h-4 w-4 text-slate-600"}):e.jsx(Ee,{className:"h-4 w-4 text-slate-600"})]})})});const{entry:k,index:R}=z,F=k.response?.status||0,J=k.request?.method||"GET",me=k.request?.url||"",Q=k.response?.content?.mimeType||"",le=k.response?.content?.size||0,ne=k.time||0,ue=c===R;return e.jsx("div",{style:N,...E,className:V("border-b border-slate-100 transition cursor-pointer",ue?"bg-blue-50 border-l-4 border-l-blue-500":"hover:bg-slate-50"),onClick:()=>b(R),children:e.jsxs("div",{className:"flex items-center h-full",children:[e.jsx("div",{className:"w-[100px] px-4 py-2 flex-shrink-0",children:e.jsx("span",{className:"text-xs font-mono font-semibold text-slate-700",children:J})}),e.jsx("div",{className:"w-[100px] px-4 py-2 flex-shrink-0",children:F?e.jsx("span",{className:V("inline-block px-2 py-0.5 rounded text-xs font-semibold text-white",n(F)),children:F}):e.jsx("span",{className:"text-xs text-slate-400",children:"—"})}),e.jsx("div",{className:"flex-1 px-4 py-2 min-w-0",children:e.jsx("div",{className:"text-xs text-slate-600 truncate",title:me,children:h(me,x)})}),e.jsx("div",{className:"w-[150px] px-4 py-2 flex-shrink-0",children:e.jsx("div",{className:"text-xs text-slate-600 truncate",title:Q,children:h(Q.split(";")[0]||"—",x)})}),e.jsx("div",{className:"w-[120px] px-4 py-2 flex-shrink-0",children:e.jsx("span",{className:"text-xs font-mono text-slate-600",children:r(le)})}),e.jsx("div",{className:"w-[120px] px-4 py-2 flex-shrink-0",children:e.jsx("span",{className:"text-xs font-mono text-slate-600",children:o(ne)})})]})})},[L,c,x,n,r,o,h,a,b]);return t.length===0&&A.length>0?e.jsx("div",{className:"w-full h-full flex items-center justify-center p-12",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"text-slate-400 mb-4",children:"No requests match your filters"})})}):L.length===0?e.jsx("div",{className:"w-full h-full flex items-center justify-center p-12",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"text-slate-400 mb-4",children:"No requests to display"})})}):e.jsxs("div",{ref:p,className:"w-full h-full flex flex-col",children:[e.jsx("div",{className:"border-b-2 border-slate-300 bg-slate-50 sticky top-0 z-10 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx($,{column:"method",className:"w-[100px]",children:"Method"}),e.jsx($,{column:"status",className:"w-[100px]",children:"Status"}),e.jsx($,{column:"url",className:"flex-1",children:"URL"}),e.jsx("div",{className:"w-[150px] px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Type"}),e.jsx($,{column:"size",className:"w-[120px]",children:"Size"}),e.jsx($,{column:"time",className:"w-[120px]",children:"Time"})]})}),e.jsx("div",{className:"flex-1 min-h-0",children:e.jsx(St,{listRef:v,rowCount:L.length,rowComponent:W,rowHeight:B,rowProps:{},style:{height:w-48},overscanCount:5})})]})};Ke,chrome.runtime?.getURL&&chrome.runtime.getURL("jwt.html"),Ze,chrome.runtime?.getURL&&chrome.runtime.getURL("saml.html"),Qe,chrome.runtime?.getURL&&chrome.runtime.getURL("rest.html"),et,chrome.runtime?.getURL&&chrome.runtime.getURL("har-analyzer.html"),Ye,chrome.runtime?.getURL&&chrome.runtime.getURL("json-utility.html");const zt=()=>{const[t,d]=l.useState(null),[m,u]=l.useState(null),[a,c]=l.useState(!0),[b,n]=l.useState("single"),[r,o]=l.useState("all"),[x,h]=l.useState("all"),[C,H]=l.useState("all"),[T,A]=l.useState(""),[v,p]=l.useState(""),[w,U]=l.useState("startedDateTime"),[D,L]=l.useState("asc"),[B,$]=l.useState("none"),[W,q]=l.useState(new Set),[N,E]=l.useState(new Set),[z,k]=l.useState(null),[R,F]=l.useState(!1),[J,me]=l.useState({cookies:!0,headers:["authorization","cookie","x-api-key","x-auth-token"],body:!1}),[Q,le]=l.useState(!1),[ne,ue]=l.useState(!1),[ve,Fe]=l.useState(50),[ae,Ne]=l.useState(!1),ye=l.useRef(null),Ce=l.useRef(null);l.useEffect(()=>{const s=i=>{if(!ae)return;const g=document.querySelector("[data-resize-handle]");if(!g)return;const f=g.parentElement;if(!f)return;const y=f.getBoundingClientRect(),O=(i.clientX-y.left)/y.width*100,Y=Math.max(20,Math.min(80,O));Fe(Y)},j=()=>{Ne(!1)};return ae&&(document.addEventListener("mousemove",s),document.addEventListener("mouseup",j),document.body.style.cursor="col-resize",document.body.style.userSelect="none"),()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",j),document.body.style.cursor="",document.body.style.userSelect=""}},[ae]);const Be=s=>{try{const j=JSON.parse(s);if(!j.log||!j.log.entries)throw new Error("Invalid HAR format: missing log.entries");return j}catch(j){throw new Error(`Failed to parse HAR file: ${j.message}`)}},Se=async(s,j)=>{if(s){if(!s.name.endsWith(".har")&&!s.name.endsWith(".json")){alert("Please upload a .har or .json file");return}try{const i=await s.text(),g=Be(i);j(g)}catch(i){alert(`Error loading HAR file: ${i.message}`)}}},ke=s=>!s||!s.log||!s.log.entries?[]:s.log.entries||[],M=l.useMemo(()=>ke(t),[t]);l.useMemo(()=>ke(m),[m]);const xe=l.useMemo(()=>{const s=new Set;return M.forEach(j=>{j.request&&j.request.method&&s.add(j.request.method)}),Array.from(s).sort()},[M]);l.useMemo(()=>{const s=new Set;return M.forEach(j=>{if(j.response&&j.response.content){const g=(j.response.content.mimeType||"").split(";")[0].split("/")[0];g&&s.add(g)}}),Array.from(s).sort()},[M]);const he=l.useMemo(()=>{const s=new Set;return M.forEach(j=>{if(j.request&&j.request.url)try{const i=new URL(j.request.url);s.add(i.hostname)}catch{}}),Array.from(s).sort()},[M]),Z=l.useMemo(()=>{let s=[...M];r!=="all"&&(s=s.filter(i=>i.request&&i.request.method===r)),x!=="all"&&(s=s.filter(i=>{const g=i.response?.status||0;return x==="2xx"?g>=200&&g<300:x==="4xx"?g>=400&&g<500:x==="5xx"?g>=500:x==="failed"?g===0||g>=400:!0})),C!=="all"&&(s=s.filter(i=>(i.response?.content?.mimeType||"").startsWith(C))),T&&(s=s.filter(i=>{if(!i.request||!i.request.url)return!1;try{return new URL(i.request.url).hostname.includes(T.toLowerCase())}catch{return i.request.url.toLowerCase().includes(T.toLowerCase())}}));const j=i=>{if(!i)return{general:null,fields:{}};const g=/(\w+)[:=]\s*"?([^"=,]+)"?/gi,f={};let y=i,O;for(;(O=g.exec(i))!==null;){const Y=O[1].toLowerCase(),S=O[2].trim();f[Y]=S,y=y.replace(O[0],"").trim()}return y=y.replace(/[,\s]+/g," ").trim(),y===""&&(y=null),{general:y,fields:f}};if(v){const i=j(v),g=Object.keys(i.fields).length>0;s=s.filter(f=>{let y=!0;if(g)for(const[O,Y]of Object.entries(i.fields)){const S=Y.toLowerCase();let I=!1;switch(O){case"url":I=(f.request?.url||"").toLowerCase().includes(S);break;case"method":I=(f.request?.method||"").toLowerCase()===S;break;case"status":const ie=String(f.response?.status||"");I=ie===S||ie.toLowerCase().includes(S);break;case"response":case"responsebody":I=(f.response?.content?.text||"").toLowerCase().includes(S);break;case"request":case"requestbody":const fe=(f.request?.postData?.text||"").toLowerCase(),be=JSON.stringify(f.request?.postData?.params||{}).toLowerCase();I=fe.includes(S)||be.includes(S);break;case"header":case"headers":I=[...f.request?.headers||[],...f.response?.headers||[]].some(G=>G.name.toLowerCase().includes(S)||G.value.toLowerCase().includes(S));break;case"requestheader":case"requestheaders":I=(f.request?.headers||[]).some(G=>G.name.toLowerCase().includes(S)||G.value.toLowerCase().includes(S));break;case"responseheader":case"responseheaders":I=(f.response?.headers||[]).some(G=>G.name.toLowerCase().includes(S)||G.value.toLowerCase().includes(S));break;case"domain":try{I=new URL(f.request?.url||"").hostname.toLowerCase().includes(S)}catch{I=(f.request?.url||"").toLowerCase().includes(S)}break;case"type":case"contenttype":I=(f.response?.content?.mimeType||"").toLowerCase().includes(S);break;default:I=!0}if(!I){y=!1;break}}if(y&&i.general){const O=i.general.toLowerCase(),Y=(f.request?.url||"").toLowerCase(),S=(f.request?.method||"").toLowerCase(),I=(f.response?.statusText||"").toLowerCase(),ie=(f.response?.content?.mimeType||"").toLowerCase(),Re=f.request?.headers?.map(_=>`${_.name}:${_.value}`).join(" ").toLowerCase()||"",fe=f.response?.headers?.map(_=>`${_.name}:${_.value}`).join(" ").toLowerCase()||"",be=(f.request?.postData?.text||"").toLowerCase(),qe=JSON.stringify(f.request?.postData?.params||{}).toLowerCase(),ze=(f.response?.content?.text||"").toLowerCase(),He=f.request?.cookies?.map(_=>`${_.name}=${_.value}`).join(" ").toLowerCase()||"",G=f.response?.cookies?.map(_=>`${_.name}=${_.value}`).join(" ").toLowerCase()||"";y=Y.includes(O)||S.includes(O)||I.includes(O)||ie.includes(O)||Re.includes(O)||fe.includes(O)||be.includes(O)||qe.includes(O)||ze.includes(O)||He.includes(O)||G.includes(O)}return y})}return s.sort((i,g)=>{let f,y;if(w==="startedDateTime")f=new Date(i.startedDateTime).getTime(),y=new Date(g.startedDateTime).getTime();else if(w==="time")f=i.time||0,y=g.time||0;else if(w==="size")f=i.response?.content?.size||0,y=g.response?.content?.size||0;else if(w==="status")f=i.response?.status||0,y=g.response?.status||0;else return w==="method"?(f=(i.request?.method||"").toLowerCase(),y=(g.request?.method||"").toLowerCase(),D==="asc"?f.localeCompare(y):y.localeCompare(f)):w==="url"?(f=(i.request?.url||"").toLowerCase(),y=(g.request?.url||"").toLowerCase(),D==="asc"?f.localeCompare(y):y.localeCompare(f)):0;return D==="asc"?f-y:y-f}),s},[M,r,x,C,T,v,w,D]),Ve=l.useMemo(()=>{if(B==="none")return{"All Requests":Z};const s={};return Z.forEach(j=>{let i;if(B==="domain")try{i=new URL(j.request?.url||"").hostname}catch{i="Unknown"}else if(B==="method")i=j.request?.method||"Unknown";else if(B==="status"){const g=j.response?.status||0;g>=200&&g<300?i="2xx Success":g>=300&&g<400?i="3xx Redirect":g>=400&&g<500?i="4xx Client Error":g>=500?i="5xx Server Error":i="Failed/Unknown"}else B==="contentType"&&(i=j.response?.content?.mimeType?.split(";")[0]||"Unknown");s[i]||(s[i]=[]),s[i].push(j)}),s},[Z,B]),K=l.useMemo(()=>{if(!t||M.length===0)return null;const s=M.length,j=M.reduce((S,I)=>S+(I.response?.content?.size||0),0),i=M.reduce((S,I)=>S+(I.time||0),0),g=i/s,f=M.filter(S=>!S.response||S.response.status>=400||S.response.status===0).length,y=M.filter(S=>S.time>1e3).length,O=he.length,Y=xe.length;return{totalRequests:s,totalSize:j,totalTime:i,avgTime:g,failed:f,slow:y,domains:O,methods:Y}},[t,M,he,xe]),Pe=s=>{if(!s||!R)return s;const j=JSON.parse(JSON.stringify(s));return j.log.entries.forEach(i=>{if(J.cookies&&(i.request?.cookies&&(i.request.cookies=i.request.cookies.map(g=>({...g,value:"[REDACTED]"}))),i.response?.cookies&&(i.response.cookies=i.response.cookies.map(g=>({...g,value:"[REDACTED]"})))),J.headers&&J.headers.length>0){const g=J.headers.map(f=>f.toLowerCase());i.request?.headers&&(i.request.headers=i.request.headers.map(f=>({...f,value:g.includes(f.name.toLowerCase())?"[REDACTED]":f.value}))),i.response?.headers&&(i.response.headers=i.response.headers.map(f=>({...f,value:g.includes(f.name.toLowerCase())?"[REDACTED]":f.value})))}J.body&&(i.request?.postData&&(i.request.postData.text="[REDACTED - Request Body]"),i.response?.content?.text&&(i.response.content.text="[REDACTED - Response Body]"))}),j},We=(s,j)=>{const i=Pe(s),g=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),f=URL.createObjectURL(g),y=document.createElement("a");y.href=f,y.download=j,y.click(),URL.revokeObjectURL(f)},pe=s=>s?s<1024?`${s} B`:s<1024*1024?`${(s/1024).toFixed(2)} KB`:`${(s/(1024*1024)).toFixed(2)} MB`:"0 B",oe=s=>s?s<1e3?`${Math.round(s)} ms`:`${(s/1e3).toFixed(2)} s`:"0 ms",Je=s=>!s||s===0?"bg-gray-500":s>=200&&s<300?"bg-green-500":s>=300&&s<400?"bg-blue-500":s>=400&&s<500?"bg-orange-500":s>=500?"bg-red-500":"bg-gray-500",Ge=s=>{const j=new Set(W);j.has(s)?j.delete(s):j.add(s),q(j)},_e=s=>{w===s?L(D==="asc"?"desc":"asc"):(U(s),L("asc"))};return e.jsxs("div",{className:"flex h-screen bg-slate-50 overflow-hidden",children:[e.jsx(rt,{currentPageId:"har",sidebarOpen:a,onSidebarToggle:c}),e.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",style:{width:"100%",minWidth:0},children:e.jsxs("div",{className:"mx-auto max-w-[1400px] w-full px-6 py-8 flex-1 flex flex-col min-h-0 bg-white",children:[e.jsxs("header",{className:"pb-4 border-b border-gray-200 mb-4",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900 mb-1",children:"HAR Analyzer"}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Analyze HTTP Archive (HAR) files with filtering, sanitization, comparison, and powerful insights"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0 space-y-6",children:[!t&&e.jsxs("div",{className:"rounded-xl border-2 border-dashed border-slate-300 bg-white p-12 text-center",children:[e.jsx(nt,{className:"h-16 w-16 mx-auto mb-4 text-slate-400"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Upload HAR File"}),e.jsx("p",{className:"text-sm text-slate-600 mb-6 max-w-md mx-auto",children:"Upload a HAR file exported from Chrome DevTools, Firefox, or any HAR-compatible tool to analyze network requests, responses, and performance metrics."}),e.jsx("input",{ref:ye,type:"file",accept:".har,.json",onChange:s=>Se(s.target.files[0],d),className:"hidden"}),e.jsx("button",{onClick:()=>ye.current?.click(),className:"px-6 py-3 bg-primary text-white rounded-lg font-medium hover:bg-primary/90 transition",children:"Choose HAR File"}),e.jsxs("div",{className:"mt-6 text-xs text-slate-500",children:[e.jsx("p",{className:"mb-2 font-semibold",children:"How to export HAR file:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 max-w-md mx-auto text-left",children:[e.jsx("li",{children:"Open Chrome DevTools (F12)"}),e.jsx("li",{children:"Go to Network tab"}),e.jsx("li",{children:'Right-click on any request → "Save all as HAR with content"'}),e.jsx("li",{children:'Or use the Network tab menu → "Save all as HAR with content"'})]})]})]}),t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6 flex items-center justify-between flex-wrap gap-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>n("single"),className:V("px-4 py-2 rounded-lg font-medium transition",b==="single"?"bg-primary text-white":"bg-white text-slate-700 border border-slate-200 hover:bg-slate-50"),children:"Single File"}),e.jsxs("button",{onClick:()=>n("compare"),className:V("px-4 py-2 rounded-lg font-medium transition",b==="compare"?"bg-primary text-white":"bg-white text-slate-700 border border-slate-200 hover:bg-slate-50"),children:[e.jsx(Oe,{className:"h-4 w-4 inline mr-2"}),"Compare"]})]})}),Q&&e.jsxs("div",{className:"mb-6 rounded-xl border-2 border-blue-200 bg-blue-50 p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-900 flex items-center gap-2",children:[e.jsx(tt,{className:"h-5 w-5"}),"HAR Analyzer Guide"]}),e.jsx("button",{onClick:()=>le(!1),className:"text-blue-600 hover:text-blue-800",children:e.jsx(ce,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-blue-800",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Getting Started:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Export HAR from DevTools (Network tab → Save as HAR)"}),e.jsx("li",{children:"Upload the .har file here"}),e.jsx("li",{children:"Use filters to find specific requests"}),e.jsx("li",{children:'Click "More" to see full request/response details'})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Features:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Filtering:"})," By method, status, content type, domain"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Search:"})," Search URLs, methods, status codes"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Sanitization:"})," Remove sensitive data before sharing"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Comparison:"})," Compare two HAR files side-by-side"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Privacy & Security:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"HAR files contain cookies, tokens, and sensitive data"}),e.jsx("li",{children:"Enable sanitization before sharing with external teams"}),e.jsx("li",{children:"Check headers and request bodies for PII"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Best Practices:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Start recording before the action"}),e.jsx("li",{children:'Export "HAR with content" to include response bodies'}),e.jsx("li",{children:"Use filters to reduce noise (static assets, etc.)"}),e.jsx("li",{children:"Compare before/after HARs to detect regressions"})]})]})]})]}),K&&e.jsxs("div",{className:"mb-6 grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-3",children:[e.jsxs("button",{onClick:()=>{o("all"),h("all"),p("")},className:"rounded-lg border border-slate-200 bg-white p-3 hover:bg-slate-50 transition cursor-pointer text-left",children:[e.jsx("div",{className:"text-xs text-slate-500 mb-0.5",children:"Total Requests"}),e.jsx("div",{className:"text-lg font-bold text-slate-900",children:K.totalRequests})]}),e.jsxs("button",{onClick:()=>{h("failed"),p("")},className:"rounded-lg border border-red-200 bg-red-50 p-3 hover:bg-red-100 transition cursor-pointer text-left",children:[e.jsx("div",{className:"text-xs text-red-600 mb-0.5",children:"Failed"}),e.jsx("div",{className:"text-lg font-bold text-red-700",children:K.failed})]}),e.jsxs("button",{onClick:()=>{h("all"),p("time>1000")},className:"rounded-lg border border-orange-200 bg-orange-50 p-3 hover:bg-orange-100 transition cursor-pointer text-left",children:[e.jsx("div",{className:"text-xs text-orange-600 mb-0.5",children:"Slow (>1s)"}),e.jsx("div",{className:"text-lg font-bold text-orange-700",children:K.slow})]}),e.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-3",children:[e.jsx("div",{className:"text-xs text-blue-600 mb-0.5",children:"Avg Time"}),e.jsx("div",{className:"text-lg font-bold text-blue-700",children:oe(K.avgTime)})]}),e.jsxs("div",{className:"rounded-lg border border-purple-200 bg-purple-50 p-3",children:[e.jsx("div",{className:"text-xs text-purple-600 mb-0.5",children:"Total Size"}),e.jsx("div",{className:"text-lg font-bold text-purple-700",children:pe(K.totalSize)})]}),e.jsxs("div",{className:"rounded-lg border border-green-200 bg-green-50 p-3",children:[e.jsx("div",{className:"text-xs text-green-600 mb-0.5",children:"Domains"}),e.jsx("div",{className:"text-lg font-bold text-green-700",children:K.domains})]}),e.jsxs("div",{className:"rounded-lg border border-indigo-200 bg-indigo-50 p-3",children:[e.jsx("div",{className:"text-xs text-indigo-600 mb-0.5",children:"Methods"}),e.jsx("div",{className:"text-lg font-bold text-indigo-700",children:K.methods})]}),e.jsxs("div",{className:"rounded-lg border border-yellow-200 bg-yellow-50 p-3",children:[e.jsx("div",{className:"text-xs text-yellow-600 mb-0.5",children:"Total Time"}),e.jsx("div",{className:"text-lg font-bold text-yellow-700",children:oe(K.totalTime)})]})]}),b==="compare"&&!m&&e.jsxs("div",{className:"mb-6 rounded-xl border-2 border-dashed border-slate-300 bg-white p-8 text-center",children:[e.jsx(Oe,{className:"h-12 w-12 mx-auto mb-3 text-slate-400"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Upload Second HAR File"}),e.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Upload another HAR file to compare with the first one"}),e.jsx("input",{ref:Ce,type:"file",accept:".har,.json",onChange:s=>Se(s.target.files[0],u),className:"hidden"}),e.jsx("button",{onClick:()=>Ce.current?.click(),className:"px-6 py-3 bg-primary text-white rounded-lg font-medium hover:bg-primary/90 transition",children:"Choose Second HAR File"})]}),e.jsxs("div",{className:"mb-6 rounded-xl border-2 border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-700",children:"Search"}),e.jsxs("button",{onClick:()=>ue(!ne),className:"text-xs text-slate-500 hover:text-slate-700 flex items-center gap-1",title:"Show search syntax help",children:[e.jsx(xt,{className:"h-3.5 w-3.5"}),"Advanced"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(st,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:'Search all fields, or use: URL="api", Status=400, Response="error"',value:v,onChange:s=>p(s.target.value),className:"w-full rounded-lg border-2 border-slate-200 bg-white pl-10 pr-10 py-2 text-sm text-slate-900 placeholder:text-slate-400 focus:border-primary focus:outline-none"}),v&&e.jsx("button",{onClick:()=>p(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 transition p-1 rounded hover:bg-slate-100",title:"Clear search",children:e.jsx(ce,{className:"h-4 w-4"})})]}),ne&&e.jsxs("div",{className:"mt-2 p-3 rounded-lg bg-blue-50 border border-blue-200 text-xs text-blue-900",children:[e.jsx("p",{className:"font-semibold mb-2",children:"Advanced Search Syntax:"}),e.jsxs("ul",{className:"space-y-1.5 list-disc list-inside",children:[e.jsxs("li",{children:[e.jsx("code",{className:"bg-blue-100 px-1 rounded",children:'URL="api"'})," or ",e.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"url:api"})," - Search only in URLs"]}),e.jsxs("li",{children:[e.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"Status=400"})," - Filter by status code"]}),e.jsxs("li",{children:[e.jsx("code",{className:"bg-blue-100 px-1 rounded",children:'Response="error"'})," - Search only in response bodies"]}),e.jsxs("li",{children:[e.jsx("code",{className:"bg-blue-100 px-1 rounded",children:'Request="data"'})," - Search only in request bodies"]}),e.jsxs("li",{children:[e.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"Method=POST"})," - Filter by HTTP method"]}),e.jsxs("li",{children:[e.jsx("code",{className:"bg-blue-100 px-1 rounded",children:'Domain="example.com"'})," - Filter by domain"]}),e.jsxs("li",{children:[e.jsx("code",{className:"bg-blue-100 px-1 rounded",children:'Header="authorization"'})," - Search in all headers (request + response)"]}),e.jsxs("li",{children:[e.jsx("code",{className:"bg-blue-100 px-1 rounded",children:'RequestHeader="Content-Type"'})," - Search in request headers only"]}),e.jsxs("li",{children:[e.jsx("code",{className:"bg-blue-100 px-1 rounded",children:'ResponseHeader="Set-Cookie"'})," - Search in response headers only"]}),e.jsxs("li",{children:["Combine multiple: ",e.jsx("code",{className:"bg-blue-100 px-1 rounded",children:'Status=400 URL="api" Header="bearer"'})]}),e.jsxs("li",{children:["General search without field: ",e.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"error"})," searches all fields"]}),e.jsxs("li",{className:"mt-2 text-blue-800",children:[e.jsx("strong",{children:"Note:"}),' All searches are case-insensitive and use "contains" matching. Search terms are highlighted in yellow in the results.']})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-700 mb-1.5",children:"Method"}),e.jsx(ge,{options:[{value:"all",label:"All Methods"},...xe.map(s=>({value:s,label:s}))],value:r,onChange:o,placeholder:"All Methods"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-700 mb-1.5",children:"Status"}),e.jsx(ge,{options:[{value:"all",label:"All Status"},{value:"2xx",label:"2xx Success"},{value:"4xx",label:"4xx Client Error"},{value:"5xx",label:"5xx Server Error"},{value:"failed",label:"Failed"}],value:x,onChange:h,placeholder:"All Status"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-700 mb-1.5",children:"Domain"}),e.jsx(ge,{options:[{value:"",label:"All Domains"},...he.map(s=>({value:s,label:s}))],value:T,onChange:A,placeholder:"All Domains"})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-slate-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>F(!R),className:V("relative inline-flex h-6 w-11 items-center rounded-full transition",R?"bg-green-500":"bg-slate-300"),children:e.jsx("span",{className:V("inline-block h-4 w-4 transform rounded-full bg-white transition",R?"translate-x-6":"translate-x-1")})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-semibold text-slate-900 flex items-center gap-2",children:[R?e.jsx(at,{className:"h-4 w-4 text-green-600"}):e.jsx(pt,{className:"h-4 w-4 text-slate-400"}),"Sanitize Sensitive Data"]}),e.jsx("div",{className:"text-xs text-slate-500",children:"Remove cookies, tokens, and sensitive headers before export"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>le(!Q),className:"px-4 py-2 rounded-lg border border-slate-200 bg-white text-slate-700 hover:bg-slate-50 transition flex items-center gap-2 text-sm",children:[e.jsx(ct,{className:"h-4 w-4"}),"Help"]}),e.jsxs("button",{onClick:()=>We(t,"har-analysis.json"),className:"px-4 py-2 rounded-lg border border-slate-200 bg-white text-slate-700 hover:bg-slate-50 transition flex items-center gap-2 text-sm",children:[e.jsx(ot,{className:"h-4 w-4"}),"Export"]}),e.jsxs("button",{onClick:()=>{d(null),u(null),o("all"),h("all"),H("all"),A(""),p("")},className:"px-4 py-2 rounded-lg border border-slate-200 bg-white text-slate-700 hover:bg-slate-50 transition flex items-center gap-2 text-sm",children:[e.jsx(ce,{className:"h-4 w-4"}),"Clear"]})]})]})})]}),e.jsxs("div",{className:V("flex gap-0 h-[calc(100vh-450px)] transition-all duration-300 relative",""),children:[e.jsx("div",{className:"rounded-l-xl border-2 border-r-0 border-slate-200 bg-white shadow-sm overflow-hidden flex flex-col transition-all",style:{width:z!==null?`${ve}%`:"100%"},children:e.jsx("div",{className:"flex-1 overflow-hidden",children:Z.length===0&&M.length>0?e.jsx("div",{className:"p-12 text-center h-full flex items-center justify-center",children:e.jsxs("div",{children:[e.jsx(lt,{className:"h-16 w-16 mx-auto mb-4 text-slate-300"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"No Requests Match Your Filters"}),e.jsxs("p",{className:"text-sm text-slate-500 mb-4",children:["We have ",e.jsx("span",{className:"font-semibold text-slate-700",children:M.length})," request",M.length!==1?"s":""," total, but none match your current filter settings."]}),e.jsx("button",{onClick:()=>{o("all"),h("all"),H("all"),A(""),p("")},className:"px-4 py-2 bg-primary text-white rounded-lg text-sm font-medium hover:bg-primary/90 transition",children:"Clear All Filters"})]})}):e.jsx(qt,{filteredEntries:Z,groupedEntries:Ve,groupBy:B,expandedGroups:W,toggleGroup:Ge,selectedEntryIndex:z,setSelectedEntryIndex:k,getStatusColor:Je,formatBytes:pe,formatTime:oe,searchQuery:v,highlightText:P,handleSort:_e,sortBy:w,sortOrder:D,entries:M})})}),z!==null&&Z[z]&&e.jsx("div",{"data-resize-handle":!0,className:V("w-1 bg-slate-300 hover:bg-primary cursor-col-resize transition-colors relative z-10 flex items-center justify-center",ae&&"bg-primary"),onMouseDown:s=>{Ne(!0),s.preventDefault()},style:{minWidth:"4px"},children:e.jsx("div",{className:"absolute inset-y-0 w-full flex items-center justify-center",children:e.jsx(mt,{className:"h-4 w-4 text-slate-400"})})}),z!==null&&Z[z]&&e.jsx("div",{className:"rounded-r-xl border-2 border-l-0 border-slate-200 bg-white shadow-sm overflow-hidden flex flex-col transition-all",style:{width:`${100-ve}%`},children:e.jsx(Ht,{entry:Z[z],formatBytes:pe,formatTime:oe,onClose:()=>k(null),searchQuery:v})})]})]})]})]})})]})},Ue=t=>{if(!t||!t.trim())return[];const d=[];let m=t;const u=/(\w+)[:=]\s*"?([^"=,]+)"?/gi,a=[];let c;for(u.lastIndex=0;(c=u.exec(t))!==null;){const n=c[2].trim();n&&n.length>0&&(d.push(n),a.push({start:c.index,end:c.index+c[0].length,text:c[0]}))}if(a.length>0){a.sort((r,o)=>o.start-r.start);let n=t;a.forEach(r=>{n=n.substring(0,r.start)+" "+n.substring(r.end)}),m=n}if(m=m.replace(/["',=:]+/g," ").replace(/\s+/g," ").trim(),m&&m.length>0){const n=m.split(/\s+/).filter(r=>{const o=r.trim();return o.length>0&&!o.match(/^(and|or|not)$/i)&&!o.match(/^[=:"']+$/)});d.push(...n)}if(d.length===0&&t.trim()){const n=t.trim();n.match(/^\w+[:=]/)||d.push(n)}return[...new Set(d.filter(n=>{const r=n.trim();return r.length>0&&r.length<100&&r.length>=1}))].sort((n,r)=>r.length-n.length)},P=(t,d)=>{if(!d||!t)return t;const m=String(t);if(!m||m.length===0)return m;let u=Ue(d);if(u.length===0){const r=d.trim();if(r)u=[r];else return m}const a=u.map(r=>r.trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).filter(r=>r.length>0);if(a.length===0)return m;const c=a.sort((r,o)=>o.length-r.length),b=new RegExp(`(${c.join("|")})`,"gi");return m.split(b).map((r,o)=>!r||r.length===0?r:c.some(h=>{try{return new RegExp(`^${h}$`,"i").test(r)}catch{return r.toLowerCase().includes(h.toLowerCase())}})?e.jsx("mark",{className:"bg-yellow-300 text-yellow-900 px-0.5 rounded font-semibold",children:r},o):r)},te=(t,d,m)=>{if(!m)return!1;const u=d.request||{},a=d.response||{},c=Ue(m),b=c.length>0?c:[m.trim()],n=r=>{if(!r)return!1;const o=String(r).toLowerCase();return b.some(x=>o.includes(x.toLowerCase()))};switch(t){case"requestHeaders":return u.headers?.some(h=>n(h.name)||n(h.value))||!1;case"responseHeaders":return a.headers?.some(h=>n(h.name)||n(h.value))||!1;case"request":return n(u.url)||n(u.postData?.text)||n(JSON.stringify(u.postData?.params||{}))||n(u.cookies?.map(h=>`${h.name}=${h.value}`).join(" "));case"response":return n(a.content?.text)||n(a.cookies?.map(h=>`${h.name}=${h.value}`).join(" "));case"timing":const r=JSON.stringify(d.timings||{}).toLowerCase(),o=a.content?.size||0,x=`${d.time||0} ${o} ${a.status||0} ${a.statusText||""}`.toLowerCase();return n(r)||n(x);default:return!1}},Ht=({entry:t,formatBytes:d,formatTime:m,onClose:u,searchQuery:a=""})=>{const[c,b]=l.useState("requestHeaders"),[n,r]=l.useState({request:!1,response:!1}),o=t.request||{},x=t.response||{};l.useEffect(()=>{r({request:!1,response:!1})},[t]);const h=l.useMemo(()=>o.postData?.text?o.postData.text:o.postData?.params?JSON.stringify(o.postData.params):"",[o.postData]),C=l.useMemo(()=>x.content?.text||"",[x.content]);if(!t)return e.jsx("div",{className:"p-6 text-center text-slate-500",children:e.jsx("p",{children:"No entry selected"})});const H=async p=>{try{await navigator.clipboard.writeText(p)}catch(w){console.error("Failed to copy",w)}},T=p=>{if(!p||typeof p!="string")return p;const w=p.trim();if(!w)return p;try{const U=JSON.parse(w);return JSON.stringify(U,null,2)}catch{return p}},A=p=>{r(w=>({...w,[p]:!w[p]}))},v=p=>p==="request"?n.request?T(h):h:n.response?T(C):C;return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"border-b-2 border-slate-300 bg-slate-50",children:e.jsxs("div",{className:"flex items-center",children:[u&&e.jsx("button",{onClick:u,className:"text-slate-500 hover:text-slate-700 transition p-2 rounded hover:bg-slate-100 ml-2 mr-1",title:"Close details",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsxs("button",{onClick:()=>b("requestHeaders"),className:V("px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider transition whitespace-nowrap relative hover:bg-slate-100 cursor-pointer",c==="requestHeaders"&&"bg-slate-100"),children:["Request Headers ",o.headers&&`(${o.headers.length})`,te("requestHeaders",t,a)&&e.jsx("span",{className:"absolute top-2 right-2 h-2 w-2 bg-yellow-400 rounded-full border border-yellow-600"})]}),e.jsxs("button",{onClick:()=>b("responseHeaders"),className:V("px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider transition whitespace-nowrap relative hover:bg-slate-100 cursor-pointer",c==="responseHeaders"&&"bg-slate-100"),children:["Response Headers ",x.headers&&`(${x.headers.length})`,te("responseHeaders",t,a)&&e.jsx("span",{className:"absolute top-2 right-2 h-2 w-2 bg-yellow-400 rounded-full border border-yellow-600"})]}),e.jsxs("button",{onClick:()=>b("request"),className:V("px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider transition whitespace-nowrap relative hover:bg-slate-100 cursor-pointer",c==="request"&&"bg-slate-100"),children:["Request",te("request",t,a)&&e.jsx("span",{className:"absolute top-2 right-2 h-2 w-2 bg-yellow-400 rounded-full border border-yellow-600"})]}),e.jsxs("button",{onClick:()=>b("response"),className:V("px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider transition whitespace-nowrap relative hover:bg-slate-100 cursor-pointer",c==="response"&&"bg-slate-100"),children:["Response",te("response",t,a)&&e.jsx("span",{className:"absolute top-2 right-2 h-2 w-2 bg-yellow-400 rounded-full border border-yellow-600"})]}),e.jsxs("button",{onClick:()=>b("timing"),className:V("px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider transition whitespace-nowrap relative hover:bg-slate-100 cursor-pointer",c==="timing"&&"bg-slate-100"),children:["Timing",te("timing",t,a)&&e.jsx("span",{className:"absolute top-2 right-2 h-2 w-2 bg-yellow-400 rounded-full border border-yellow-600"})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto",style:{padding:c==="requestHeaders"||c==="responseHeaders"?"0":"1rem"},children:[c==="requestHeaders"&&e.jsx("div",{className:"w-full h-full",children:e.jsxs("table",{className:"w-full border-collapse h-full",children:[e.jsx("thead",{className:"bg-slate-50 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-700 border-b border-slate-200",children:"Header Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-700 border-b border-slate-200",children:"Value"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-slate-700 border-b border-slate-200 w-20",children:"Actions"})]})}),e.jsx("tbody",{children:o.headers&&o.headers.length>0?o.headers.map((p,w)=>e.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50 transition",children:[e.jsx("td",{className:"px-4 py-2.5",children:e.jsx("span",{className:"text-sm font-semibold text-slate-700 font-mono",children:P(p.name,a)})}),e.jsx("td",{className:"px-4 py-2.5",children:e.jsx("span",{className:"text-sm text-slate-900 font-mono break-all",children:P(p.value||"—",a)})}),e.jsx("td",{className:"px-4 py-2.5 text-right",children:e.jsx("button",{onClick:()=>H(p.value||""),className:"text-slate-500 hover:text-slate-700 transition p-1 rounded hover:bg-slate-100",title:"Copy value",children:e.jsx(ee,{className:"h-3.5 w-3.5"})})})]},w)):e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"px-4 py-8 text-center text-sm text-slate-500",children:"No request headers available"})})})]})}),c==="responseHeaders"&&e.jsx("div",{className:"w-full h-full",children:e.jsxs("table",{className:"w-full border-collapse h-full",children:[e.jsx("thead",{className:"bg-slate-50 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-700 border-b border-slate-200",children:"Header Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-700 border-b border-slate-200",children:"Value"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-slate-700 border-b border-slate-200 w-20",children:"Actions"})]})}),e.jsx("tbody",{children:x.headers&&x.headers.length>0?x.headers.map((p,w)=>e.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50 transition",children:[e.jsx("td",{className:"px-4 py-2.5",children:e.jsx("span",{className:"text-sm font-semibold text-slate-700 font-mono",children:P(p.name,a)})}),e.jsx("td",{className:"px-4 py-2.5",children:e.jsx("span",{className:"text-sm text-slate-900 font-mono break-all",children:P(p.value||"—",a)})}),e.jsx("td",{className:"px-4 py-2.5 text-right",children:e.jsx("button",{onClick:()=>H(p.value||""),className:"text-slate-500 hover:text-slate-700 transition p-1 rounded hover:bg-slate-100",title:"Copy value",children:e.jsx(ee,{className:"h-3.5 w-3.5"})})})]},w)):e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"px-4 py-8 text-center text-sm text-slate-500",children:"No response headers available"})})})]})}),c==="request"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-900",children:"Request URL"}),e.jsxs("button",{onClick:()=>H(o.url||""),className:"text-sm text-slate-500 hover:text-slate-700 flex items-center gap-1 px-2 py-1 rounded hover:bg-slate-100 transition",children:[e.jsx(ee,{className:"h-4 w-4"}),"Copy"]})]}),e.jsx("div",{className:"bg-white rounded-lg border border-slate-200 p-3 text-sm font-mono break-all",children:P(o.url||"—",a)})]}),o.postData&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-900",children:"Request Body"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>A("request"),className:"text-sm text-slate-500 hover:text-slate-700 flex items-center gap-1 px-2 py-1 rounded hover:bg-slate-100 transition",title:n.request?"Show raw":"Format JSON",children:[e.jsx(Te,{className:"h-4 w-4"}),n.request?"Raw":"Format"]}),e.jsxs("button",{onClick:()=>H(v("request")),className:"text-sm text-slate-500 hover:text-slate-700 flex items-center gap-1 px-2 py-1 rounded hover:bg-slate-100 transition",children:[e.jsx(ee,{className:"h-4 w-4"}),"Copy"]})]})]}),e.jsx("pre",{className:"bg-white rounded-lg border border-slate-200 p-3 text-sm font-mono whitespace-pre-wrap",children:P(v("request"),a)})]}),o.cookies&&o.cookies.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-900 mb-2",children:"Cookies"}),e.jsx("div",{className:"bg-white rounded-lg border border-slate-200 p-3",children:o.cookies.map((p,w)=>e.jsxs("div",{className:"text-sm font-mono mb-2 py-1 border-b border-slate-100 last:border-0",children:[e.jsx("span",{className:"font-semibold text-slate-700",children:P(p.name,a)})," = ",e.jsx("span",{className:"text-slate-900",children:P(p.value,a)})]},w))})]})]}),c==="response"&&e.jsxs("div",{className:"space-y-4",children:[x.content&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-900",children:"Response Body"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>A("response"),className:"text-sm text-slate-500 hover:text-slate-700 flex items-center gap-1 px-2 py-1 rounded hover:bg-slate-100 transition",title:n.response?"Show raw":"Format JSON",children:[e.jsx(Te,{className:"h-4 w-4"}),n.response?"Raw":"Format"]}),e.jsxs("button",{onClick:()=>H(v("response")),className:"text-sm text-slate-500 hover:text-slate-700 flex items-center gap-1 px-2 py-1 rounded hover:bg-slate-100 transition",children:[e.jsx(ee,{className:"h-4 w-4"}),"Copy"]})]})]}),e.jsx("pre",{className:"bg-white rounded-lg border border-slate-200 p-3 text-sm font-mono whitespace-pre-wrap",children:P(v("response"),a)})]}),x.cookies&&x.cookies.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-900 mb-2",children:"Response Cookies"}),e.jsx("div",{className:"bg-white rounded-lg border border-slate-200 p-3",children:x.cookies.map((p,w)=>e.jsxs("div",{className:"text-sm font-mono mb-2 py-1 border-b border-slate-100 last:border-0",children:[e.jsx("span",{className:"font-semibold text-slate-700",children:P(p.name,a)})," = ",e.jsx("span",{className:"text-slate-900",children:P(p.value,a)})]},w))})]})]}),c==="timing"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-900 mb-2",children:"Summary"}),e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm py-1 border-b border-slate-100 last:border-0",children:[e.jsx("span",{className:"text-slate-600 font-medium",children:"Total Time:"}),e.jsxs("span",{className:"font-mono text-slate-900 font-semibold",children:[t.time||0," ms"]})]}),e.jsxs("div",{className:"flex justify-between text-sm py-1 border-b border-slate-100 last:border-0",children:[e.jsx("span",{className:"text-slate-600 font-medium",children:"Size:"}),e.jsx("span",{className:"font-mono text-slate-900 font-semibold",children:d(x.content?.size||0)})]}),e.jsxs("div",{className:"flex justify-between text-sm py-1 border-b border-slate-100 last:border-0",children:[e.jsx("span",{className:"text-slate-600 font-medium",children:"Status:"}),e.jsxs("span",{className:"font-mono text-slate-900 font-semibold",children:[x.status||0," ",x.statusText||""]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-900 mb-2",children:"Request Timing"}),e.jsx("div",{className:"bg-white rounded-lg border border-slate-200 p-3 space-y-2",children:t.timings&&Object.entries(t.timings).map(([p,w])=>e.jsxs("div",{className:"flex justify-between text-sm py-1 border-b border-slate-100 last:border-0",children:[e.jsxs("span",{className:"text-slate-600 capitalize font-medium",children:[p,":"]}),e.jsx("span",{className:"font-mono text-slate-900 font-semibold",children:w!==-1?`${w} ms`:"—"})]},p))})]})]})]})]})},Tt=Xe.createRoot(document.getElementById("root"));Tt.render(e.jsx(zt,{}));
//# sourceMappingURL=har-analyzer-Bv6W_TBp.js.map
