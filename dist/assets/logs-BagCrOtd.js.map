{"version":3,"file":"logs-BagCrOtd.js","sources":["../../node_modules/lucide-react/dist/esm/icons/activity.js","../../node_modules/lucide-react/dist/esm/icons/chart-column.js","../../node_modules/lucide-react/dist/esm/icons/file-text.js","../../node_modules/lucide-react/dist/esm/icons/square-check-big.js","../../node_modules/lucide-react/dist/esm/icons/square.js","../../node_modules/lucide-react/dist/esm/icons/triangle-alert.js","../../node_modules/lucide-react/dist/esm/icons/zap.js","../../src/logs.jsx"],"sourcesContent":["/**\n * @license lucide-react v0.554.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2\",\n      key: \"169zse\"\n    }\n  ]\n];\nconst Activity = createLucideIcon(\"activity\", __iconNode);\n\nexport { __iconNode, Activity as default };\n//# sourceMappingURL=activity.js.map\n","/**\n * @license lucide-react v0.554.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M3 3v16a2 2 0 0 0 2 2h16\", key: \"c24i48\" }],\n  [\"path\", { d: \"M18 17V9\", key: \"2bz60n\" }],\n  [\"path\", { d: \"M13 17V5\", key: \"1frdt8\" }],\n  [\"path\", { d: \"M8 17v-3\", key: \"17ska0\" }]\n];\nconst ChartColumn = createLucideIcon(\"chart-column\", __iconNode);\n\nexport { __iconNode, ChartColumn as default };\n//# sourceMappingURL=chart-column.js.map\n","/**\n * @license lucide-react v0.554.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z\",\n      key: \"1oefj6\"\n    }\n  ],\n  [\"path\", { d: \"M14 2v5a1 1 0 0 0 1 1h5\", key: \"wfsgrz\" }],\n  [\"path\", { d: \"M10 9H8\", key: \"b1mrlr\" }],\n  [\"path\", { d: \"M16 13H8\", key: \"t4e002\" }],\n  [\"path\", { d: \"M16 17H8\", key: \"z1uh3a\" }]\n];\nconst FileText = createLucideIcon(\"file-text\", __iconNode);\n\nexport { __iconNode, FileText as default };\n//# sourceMappingURL=file-text.js.map\n","/**\n * @license lucide-react v0.554.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    { d: \"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344\", key: \"2acyp4\" }\n  ],\n  [\"path\", { d: \"m9 11 3 3L22 4\", key: \"1pflzl\" }]\n];\nconst SquareCheckBig = createLucideIcon(\"square-check-big\", __iconNode);\n\nexport { __iconNode, SquareCheckBig as default };\n//# sourceMappingURL=square-check-big.js.map\n","/**\n * @license lucide-react v0.554.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", key: \"afitv7\" }]\n];\nconst Square = createLucideIcon(\"square\", __iconNode);\n\nexport { __iconNode, Square as default };\n//# sourceMappingURL=square.js.map\n","/**\n * @license lucide-react v0.554.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3\",\n      key: \"wmoenq\"\n    }\n  ],\n  [\"path\", { d: \"M12 9v4\", key: \"juzpu7\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n];\nconst TriangleAlert = createLucideIcon(\"triangle-alert\", __iconNode);\n\nexport { __iconNode, TriangleAlert as default };\n//# sourceMappingURL=triangle-alert.js.map\n","/**\n * @license lucide-react v0.554.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z\",\n      key: \"1xq2db\"\n    }\n  ]\n];\nconst Zap = createLucideIcon(\"zap\", __iconNode);\n\nexport { __iconNode, Zap as default };\n//# sourceMappingURL=zap.js.map\n","import React, { useEffect, useState, useMemo, useRef } from 'react';\nimport ReactDOM from 'react-dom/client';\nimport {\n  AlertCircle,\n  CheckCircle2,\n  Info,\n  X,\n  Search,\n  Filter,\n  Download,\n  Trash2,\n  ChevronDown,\n  ChevronUp,\n  ChevronLeft,\n  ChevronRight,\n  Network,\n  FileText,\n  AlertTriangle,\n  RefreshCw,\n  Clock,\n  ShieldCheck,\n  Key,\n  BarChart3,\n  Activity,\n  Zap,\n  CheckSquare,\n  Square,\n  FileJson,\n  FileCode,\n} from 'lucide-react';\nimport clsx from 'clsx';\nimport CustomDropdown from './CustomDropdown';\nimport './styles.css';\n\nconst FEATURES = [\n  { id: 'jwt', name: 'JWT Decoder', icon: ShieldCheck, category: 'Authentication', status: 'active', url: chrome.runtime?.getURL ? chrome.runtime.getURL('jwt.html') : 'jwt.html' },\n  { id: 'saml', name: 'SAML Inspector', icon: Key, category: 'Authentication', status: 'active', url: chrome.runtime?.getURL ? chrome.runtime.getURL('saml.html') : 'saml.html' },\n  { id: 'rest', name: 'REST API Tester', icon: Network, category: 'API Testing', status: 'active', url: chrome.runtime?.getURL ? chrome.runtime.getURL('rest.html') : 'rest.html' },\n  { id: 'har', name: 'HAR Analyzer', icon: FileCode, category: 'Debugging', status: 'active', url: chrome.runtime?.getURL ? chrome.runtime.getURL('har-analyzer.html') : 'har-analyzer.html' },\n  { id: 'json', name: 'JSON Utility', icon: FileJson, category: 'Utilities', status: 'active', url: chrome.runtime?.getURL ? chrome.runtime.getURL('json-utility.html') : 'json-utility.html' },\n  // Browser Logs temporarily disabled - not ready for production\n  // { id: 'logs', name: 'Browser Logs', icon: FileText, category: 'Debugging', status: 'active', url: chrome.runtime?.getURL ? chrome.runtime.getURL('logs.html') : 'logs.html' },\n];\n\nconst LOG_STORAGE_KEY = 'browser_logs';\nconst MAX_LOGS = 1000;\n\nconst LogLevel = {\n  INFO: 'info',\n  WARN: 'warn',\n  ERROR: 'error',\n  NETWORK: 'network',\n};\n\nconst LogViewer = () => {\n  const [logs, setLogs] = useState([]);\n  const [allTabs, setAllTabs] = useState([]); // All available tabs\n  const [tabs, setTabs] = useState([]); // Displayed tabs (filtered based on selection)\n  const [selectedTabId, setSelectedTabId] = useState(null);\n  const [selectedTabIds, setSelectedTabIds] = useState(new Set()); // Multi-select for > 5 tabs\n  const [tabSearchQuery, setTabSearchQuery] = useState('');\n  const [showTabSelector, setShowTabSelector] = useState(false);\n  const [allAvailableTabs, setAllAvailableTabs] = useState([]); // Store all tabs separately for dropdown\n  const [showTabDropdown, setShowTabDropdown] = useState(false);\n  const [filterLevel, setFilterLevel] = useState('all');\n  const [filterType, setFilterType] = useState('all'); // 'all' | 'console' | 'network' | 'error' | 'performance'\n  const [filterStatus, setFilterStatus] = useState('all'); // 'all' | '2xx' | '4xx' | '5xx' | 'failed'\n  const [filterResourceType, setFilterResourceType] = useState('all'); // 'all' | 'api' | 'static' - filter out images/fonts/CSS\n  const [filterDomain, setFilterDomain] = useState(''); // Filter by domain\n  const [searchQuery, setSearchQuery] = useState('');\n  const [sortBy, setSortBy] = useState('timestamp'); // 'timestamp' | 'level' | 'status' | 'method' | 'url' | 'latency'\n  const [sortOrder, setSortOrder] = useState('desc'); // 'asc' | 'desc'\n  const [groupBy, setGroupBy] = useState('none'); // 'none' | 'level' | 'url' | 'type'\n  const [showTimeDeltas, setShowTimeDeltas] = useState(true); // Show time deltas between logs\n  const [expandedGroups, setExpandedGroups] = useState(new Set());\n  const [autoScroll, setAutoScroll] = useState(true);\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const [sidebarSearchQuery, setSidebarSearchQuery] = useState('');\n  const [showExportMenu, setShowExportMenu] = useState(false);\n  const logsEndRef = useRef(null);\n  const logsContainerRef = useRef(null);\n  const userScrolledRef = useRef(false);\n  const isAtBottomRef = useRef(true);\n\n  const filteredFeatures = FEATURES.filter(f => \n    f.name.toLowerCase().includes(sidebarSearchQuery.toLowerCase()) ||\n    f.category.toLowerCase().includes(sidebarSearchQuery.toLowerCase())\n  );\n  const categories = [...new Set(FEATURES.map(f => f.category))];\n\n  // Check capture status on load\n  useEffect(() => {\n    if (chrome.storage) {\n      chrome.storage.local.get(['activeLoggingTabs'], (result) => {\n        const activeTabs = result.activeLoggingTabs || [];\n        const currentTabs = selectedTabIds.size > 0 \n          ? Array.from(selectedTabIds) \n          : selectedTabId \n            ? [selectedTabId] \n            : [];\n        setIsCapturing(currentTabs.some(tabId => activeTabs.includes(tabId)));\n      });\n    }\n  }, [selectedTabId, selectedTabIds]);\n\n  // Load tabs and logs\n  useEffect(() => {\n    loadTabsAndLogs();\n    \n    // Listen for new logs\n    if (chrome.runtime && chrome.runtime.id) {\n      const listener = (message) => {\n        if (message && message.type === 'NEW_LOG') {\n          // If the new log is for the selected tab, reload\n          if (!selectedTabId || message.tabId === selectedTabId) {\n            loadTabsAndLogs();\n          } else {\n            // Just update tabs list\n            loadTabs();\n          }\n        }\n      };\n      chrome.runtime.onMessage.addListener(listener);\n      \n      // Poll for updates every 1 second (more frequent for better responsiveness)\n      const interval = setInterval(() => {\n        loadTabs();\n        loadLogsForSelectedTabs(); // Also reload logs\n      }, 1000);\n      \n      return () => {\n        try {\n          chrome.runtime.onMessage.removeListener(listener);\n        } catch (e) {\n          // Ignore cleanup errors\n        }\n        clearInterval(interval);\n      };\n    }\n  }, [selectedTabId, selectedTabIds]);\n\n  // Auto-select tab from URL parameter (from DevTools)\n  useEffect(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    const tabIdParam = urlParams.get('tabId');\n    if (tabIdParam) {\n      const tabId = parseInt(tabIdParam, 10);\n      if (!isNaN(tabId)) {\n        setSelectedTabId(tabId);\n        setSelectedTabIds(new Set([tabId]));\n        loadLogsForTab(tabId);\n        return; // Don't auto-select if we have a tabId param\n      }\n    }\n  }, []);\n\n  // Auto-select current active tab on first load\n  useEffect(() => {\n    if (!selectedTabId && selectedTabIds.size === 0 && tabs.length > 0) {\n      // Try to get current active tab\n      if (chrome.tabs) {\n        chrome.tabs.query({ active: true, currentWindow: true }, (activeTabs) => {\n          if (activeTabs.length > 0) {\n            const activeTabId = activeTabs[0].id;\n            const foundTab = tabs.find(t => t.id === activeTabId);\n            if (foundTab) {\n              if (tabs.length > 5) {\n                // Multi-select mode: select active tab\n                setSelectedTabIds(new Set([activeTabId]));\n              }\n              setSelectedTabId(activeTabId);\n              loadLogsForTab(activeTabId);\n            } else {\n              // Select first tab with logs, or first tab\n              const firstTabWithLogs = tabs.find(t => t.hasLogs) || tabs[0];\n              if (tabs.length > 5) {\n                setSelectedTabIds(new Set([firstTabWithLogs.id]));\n              }\n              setSelectedTabId(firstTabWithLogs.id);\n              loadLogsForTab(firstTabWithLogs.id);\n            }\n          } else {\n            // Select first tab with logs, or first tab\n            const firstTabWithLogs = tabs.find(t => t.hasLogs) || tabs[0];\n            if (tabs.length > 5) {\n              setSelectedTabIds(new Set([firstTabWithLogs.id]));\n            }\n            setSelectedTabId(firstTabWithLogs.id);\n            loadLogsForTab(firstTabWithLogs.id);\n          }\n        });\n      } else {\n        // Select first tab with logs, or first tab\n        const firstTabWithLogs = tabs.find(t => t.hasLogs) || tabs[0];\n        if (tabs.length > 5) {\n          setSelectedTabIds(new Set([firstTabWithLogs.id]));\n        }\n        setSelectedTabId(firstTabWithLogs.id);\n        loadLogsForTab(firstTabWithLogs.id);\n      }\n    }\n  }, [tabs]);\n\n  // Check if user is at/near bottom of scroll container\n  const checkIfAtBottom = () => {\n    if (!logsContainerRef.current) return false;\n    const container = logsContainerRef.current;\n    const scrollTop = container.scrollTop;\n    const scrollHeight = container.scrollHeight;\n    const clientHeight = container.clientHeight;\n    const threshold = 50; // pixels from bottom to consider \"at bottom\"\n    \n    const isAtBottom = scrollHeight - scrollTop - clientHeight < threshold;\n    isAtBottomRef.current = isAtBottom;\n    return isAtBottom;\n  };\n\n  // Handle scroll events to detect user scrolling\n  useEffect(() => {\n    const container = logsContainerRef.current;\n    if (!container) return;\n\n    let scrollTimeout;\n    const handleScroll = () => {\n      const wasAtBottom = isAtBottomRef.current;\n      const isNowAtBottom = checkIfAtBottom();\n      \n      // If user scrolled away from bottom, disable auto-scroll\n      if (wasAtBottom && !isNowAtBottom) {\n        userScrolledRef.current = true;\n        setAutoScroll(false);\n      }\n      // If user scrolled back to bottom, re-enable auto-scroll\n      else if (!wasAtBottom && isNowAtBottom) {\n        userScrolledRef.current = false;\n        setAutoScroll(true);\n      }\n    };\n\n    container.addEventListener('scroll', handleScroll, { passive: true });\n    \n    return () => {\n      container.removeEventListener('scroll', handleScroll);\n      if (scrollTimeout) clearTimeout(scrollTimeout);\n    };\n  }, []);\n\n  // Auto-scroll to bottom only if enabled and user is at/near bottom\n  useEffect(() => {\n    if (autoScroll && logsEndRef.current && isAtBottomRef.current) {\n      // Small delay to ensure DOM is updated\n      requestAnimationFrame(() => {\n        if (logsEndRef.current && isAtBottomRef.current) {\n          logsEndRef.current.scrollIntoView({ behavior: 'smooth' });\n        }\n      });\n    }\n  }, [logs, autoScroll]);\n\n  const loadTabs = async () => {\n    if (!chrome.runtime || !chrome.runtime.id) return;\n    try {\n      // Get tabs with logs from background\n      const logsResponse = await chrome.runtime.sendMessage({ \n        action: 'get_logs',\n        tabId: null // Get tabs list\n      });\n      \n      // Get all open tabs\n      let allOpenTabs = [];\n      if (chrome.tabs) {\n        try {\n          const tabs = await new Promise((resolve) => {\n            chrome.tabs.query({}, resolve);\n          });\n          allOpenTabs = tabs\n            .filter(tab => \n              tab.url && \n              !tab.url.startsWith('chrome://') && \n              !tab.url.startsWith('chrome-extension://') &&\n              !tab.url.startsWith('moz-extension://') &&\n              !tab.url.startsWith('edge://') &&\n              !tab.url.startsWith('about:')\n            )\n            .map(tab => ({\n              id: tab.id,\n              url: tab.url,\n              title: tab.title,\n              active: tab.active,\n              windowId: tab.windowId,\n            }));\n        } catch (e) {\n          // Ignore errors\n        }\n      }\n      \n      // Merge: tabs with logs + all open tabs\n      const tabsWithLogs = logsResponse?.tabs || [];\n      const tabsMap = new Map();\n      \n      // Add tabs with logs\n      tabsWithLogs.forEach(tab => {\n        tabsMap.set(tab.id, { ...tab, hasLogs: true });\n      });\n      \n      // Add all open tabs (even without logs)\n      allOpenTabs.forEach(tab => {\n        // Get a safe display name for the tab\n        let displayName = tab.title;\n        if (!displayName && tab.url) {\n          try {\n            const url = new URL(tab.url);\n            displayName = url.hostname || tab.url;\n          } catch {\n            // Invalid URL (e.g., chrome://, extension pages)\n            displayName = tab.url.length > 50 ? `${tab.url.substring(0, 50)}...` : tab.url;\n          }\n        }\n        if (!displayName) {\n          displayName = `Tab ${tab.id}`;\n        }\n        \n        if (!tabsMap.has(tab.id)) {\n          tabsMap.set(tab.id, { ...tab, hasLogs: false, logCount: 0, lastUpdate: 0, displayName });\n        } else {\n          tabsMap.set(tab.id, { ...tabsMap.get(tab.id), ...tab, displayName });\n        }\n      });\n      \n      // Store all tabs for selection\n      const allTabs = Array.from(tabsMap.values());\n      \n      // Sort by: active first, then has logs, then by last update\n      allTabs.sort((a, b) => {\n        // Active tab first\n        if (a.active && !b.active) return -1;\n        if (!a.active && b.active) return 1;\n        // Has logs second\n        if (a.hasLogs && !b.hasLogs) return -1;\n        if (!a.hasLogs && b.hasLogs) return 1;\n        return (b.lastUpdate || 0) - (a.lastUpdate || 0);\n      });\n      \n      // If a tab is selected, only show that tab (or selected tabs)\n      // Otherwise, show all tabs for selection\n      const selectedTabsArray = selectedTabIds.size > 0 \n        ? Array.from(selectedTabIds) \n        : selectedTabId \n          ? [selectedTabId] \n          : [];\n      \n      // Always store all tabs for dropdown selection\n      setAllAvailableTabs(allTabs);\n      \n      // If a tab is selected, only show that tab (or selected tabs) for display\n      if (selectedTabsArray.length > 0) {\n        // Only show selected tabs\n        const selectedTabsOnly = allTabs.filter(tab => selectedTabsArray.includes(tab.id));\n        setTabs(selectedTabsOnly);\n      } else {\n        // Keep previous tabs or empty - don't auto-populate\n        if (tabs.length === 0) {\n          setTabs([]);\n        }\n      }\n    } catch (err) {\n      // Ignore errors\n    }\n  };\n\n  const [injecting, setInjecting] = useState(false);\n  const [injectionStatus, setInjectionStatus] = useState('');\n  const [showHowItWorks, setShowHowItWorks] = useState(false);\n  const [isCapturing, setIsCapturing] = useState(false);\n\n  const injectIntoSelectedTabs = async () => {\n    if (!chrome.runtime || !chrome.runtime.id) {\n      setInjectionStatus('✗ Chrome runtime not available');\n      setTimeout(() => setInjectionStatus(''), 3000);\n      return;\n    }\n    \n    // Get selected tabs\n    const tabIdsToInject = selectedTabIds.size > 0 \n      ? Array.from(selectedTabIds) \n      : selectedTabId \n        ? [selectedTabId] \n        : [];\n    \n    if (tabIdsToInject.length === 0) {\n      setInjectionStatus('✗ No tabs selected. Please select tabs first.');\n      setTimeout(() => setInjectionStatus(''), 3000);\n      return;\n    }\n    \n    setInjecting(true);\n    setInjectionStatus(`Injecting content script into ${tabIdsToInject.length} selected tab(s)...`);\n    \n    try {\n      if (!chrome.scripting) {\n        throw new Error('Chrome scripting API not available');\n      }\n      \n      // Inject directly using chrome.scripting API\n      let successCount = 0;\n      let failCount = 0;\n      \n      for (const tabId of tabIdsToInject) {\n        try {\n          await chrome.scripting.executeScript({\n            target: { tabId },\n            files: ['content-script.js'],\n          });\n          successCount++;\n        } catch (err) {\n          // Some tabs might fail (e.g., already injected, permissions, etc.)\n          failCount++;\n          console.debug(`Failed to inject into tab ${tabId}:`, err.message);\n        }\n      }\n      \n      setInjectionStatus(`✓ Injected into ${successCount} tab(s)${failCount > 0 ? ` (${failCount} skipped)` : ''}!`);\n      \n      // Note: Injection doesn't activate logging - user must click \"Start Capture\"\n      \n      // Reload tabs after injection\n      setTimeout(() => {\n        loadTabs();\n        setInjectionStatus('');\n        setInjecting(false);\n      }, 1000);\n    } catch (err) {\n      console.error('Failed to inject into selected tabs', err);\n      setInjectionStatus(`✗ Failed to inject: ${err.message || 'Unknown error'}`);\n      setInjecting(false);\n      setTimeout(() => setInjectionStatus(''), 5000);\n    }\n  };\n\n  const injectIntoTab = async (tabId) => {\n    if (!chrome.runtime || !chrome.runtime.id || !chrome.scripting) return;\n    try {\n      await chrome.scripting.executeScript({\n        target: { tabId },\n        files: ['content-script.js'],\n      });\n    } catch (err) {\n      // Silently fail - auto-injection will handle it\n      console.debug('Injection failed (will auto-inject):', err.message);\n    }\n  };\n\n  const startCapture = async () => {\n    if (!chrome.runtime || !chrome.runtime.id) return;\n    \n    const tabIdsToActivate = selectedTabIds.size > 0 \n      ? Array.from(selectedTabIds) \n      : selectedTabId \n        ? [selectedTabId] \n        : [];\n    \n    if (tabIdsToActivate.length === 0) {\n      setInjectionStatus('✗ No tabs selected. Please select tabs first.');\n      setTimeout(() => setInjectionStatus(''), 3000);\n      return;\n    }\n    \n    try {\n      // First ensure content script is injected\n      for (const tabId of tabIdsToActivate) {\n        try {\n          await chrome.scripting.executeScript({\n            target: { tabId },\n            files: ['content-script.js'],\n          });\n        } catch (err) {\n          // Script might already be injected, that's ok\n          console.debug('Script injection (may already be injected):', err.message);\n        }\n      }\n      \n      // Then activate logging\n      await chrome.runtime.sendMessage({\n        action: 'activate_logging',\n        tabIds: tabIdsToActivate\n      });\n      \n      setIsCapturing(true);\n      setInjectionStatus(`✓ Log capture activated for ${tabIdsToActivate.length} tab(s)! Make some console.log calls or network requests to see them here.`);\n      \n      // Reload logs after a short delay to show any immediate logs\n      setTimeout(() => {\n        loadLogsForSelectedTabs();\n        setInjectionStatus('');\n      }, 2000);\n    } catch (err) {\n      console.error('Failed to activate logging', err);\n      setInjectionStatus(`✗ Failed to activate logging: ${err.message || 'Unknown error'}`);\n      setTimeout(() => setInjectionStatus(''), 5000);\n    }\n  };\n\n  const stopCapture = async () => {\n    if (!chrome.runtime || !chrome.runtime.id) return;\n    \n    const tabIdsToDeactivate = selectedTabIds.size > 0 \n      ? Array.from(selectedTabIds) \n      : selectedTabId \n        ? [selectedTabId] \n        : [];\n    \n    if (tabIdsToDeactivate.length === 0) {\n      // Deactivate all\n      chrome.storage.local.get(['activeLoggingTabs'], (result) => {\n        const allActiveTabs = result.activeLoggingTabs || [];\n        chrome.runtime.sendMessage({\n          action: 'deactivate_logging',\n          tabIds: allActiveTabs\n        });\n      });\n    } else {\n      await chrome.runtime.sendMessage({\n        action: 'deactivate_logging',\n        tabIds: tabIdsToDeactivate\n      });\n    }\n    \n    setIsCapturing(false);\n    setInjectionStatus('✓ Log capture stopped - no new logs will be captured');\n    setTimeout(() => setInjectionStatus(''), 5000);\n    \n    // Refresh to show updated state\n    setTimeout(() => {\n      loadTabs();\n    }, 500);\n  };\n\n  const loadTabsAndLogs = async () => {\n    await loadTabs();\n    await loadLogsForSelectedTabs();\n  };\n\n  const loadLogsForSelectedTabs = async () => {\n    if (!chrome.runtime || !chrome.runtime.id) return;\n    \n    // Determine which tabs to load\n    const tabIdsToLoad = selectedTabIds.size > 0 \n      ? Array.from(selectedTabIds) \n      : selectedTabId \n        ? [selectedTabId] \n        : [];\n    \n    if (tabIdsToLoad.length === 0) {\n      setLogs([]);\n      return;\n    }\n    \n    try {\n      // Load logs from all selected tabs\n      const allLogs = [];\n      for (const tabId of tabIdsToLoad) {\n        const response = await chrome.runtime.sendMessage({ \n          action: 'get_logs',\n          tabId: tabId\n        });\n        if (response && response.logs) {\n          // Add tabId to each log for filtering\n          allLogs.push(...response.logs.map(log => ({ ...log, sourceTabId: tabId })));\n        }\n      }\n      \n      // Sort by timestamp\n      allLogs.sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp));\n      setLogs(allLogs);\n    } catch (err) {\n      console.error('Failed to load logs', err);\n    }\n  };\n\n  const loadLogsForTab = async (tabId) => {\n    // Legacy function - now uses loadLogsForSelectedTabs\n    setSelectedTabId(tabId);\n    setSelectedTabIds(new Set([tabId]));\n    await loadLogsForSelectedTabs();\n  };\n\n  const clearLogs = async () => {\n    if (!chrome.runtime || !chrome.runtime.id) return;\n    try {\n      await chrome.runtime.sendMessage({ \n        action: 'clear_logs',\n        tabId: selectedTabId // Clear selected tab, or all if null\n      });\n      setLogs([]);\n    } catch (err) {\n      console.error('Failed to clear logs', err);\n    }\n  };\n\n  const exportLogs = (format) => {\n    const filteredLogs = getFilteredLogs();\n    let content, mimeType, filename;\n\n    if (format === 'json') {\n      content = JSON.stringify(filteredLogs, null, 2);\n      mimeType = 'application/json';\n      filename = `logs-${new Date().toISOString().split('T')[0]}.json`;\n    } else if (format === 'csv') {\n      // CSV\n      const headers = ['Timestamp', 'Level', 'Type', 'Message', 'URL', 'Status', 'Method', 'Latency', 'Response Size'];\n      const rows = filteredLogs.map(log => [\n        log.timestamp,\n        log.level,\n        log.type || 'console',\n        JSON.stringify(log.message || log.data || ''),\n        log.url || log.pageUrl || '',\n        log.status || log.statusCode || '',\n        log.method || '',\n        log.latency || '',\n        log.responseSize || '',\n      ]);\n      content = [headers, ...rows].map(row => row.map(cell => `\"${String(cell).replace(/\"/g, '\"\"')}\"`).join(',')).join('\\n');\n      mimeType = 'text/csv';\n      filename = `logs-${new Date().toISOString().split('T')[0]}.csv`;\n    } else if (format === 'har') {\n      // HAR format for network logs\n      const networkLogs = filteredLogs.filter(log => log.type === 'network');\n      const har = {\n        log: {\n          version: '1.2',\n          creator: { name: 'NowAssist', version: '0.1.0' },\n          entries: networkLogs.map(log => ({\n            startedDateTime: log.timestamp,\n            time: log.latency || 0,\n            request: {\n              method: log.method || 'GET',\n              url: log.url || log.pageUrl || '',\n              headers: log.headers ? Object.entries(log.headers).map(([name, value]) => ({ name, value })) : [],\n            },\n            response: {\n              status: log.status || log.statusCode || 0,\n              statusText: log.statusText || '',\n              headers: log.responseHeaders ? Object.entries(log.responseHeaders).map(([name, value]) => ({ name, value })) : [],\n              content: {\n                size: log.responseSize || 0,\n              },\n            },\n          })),\n        },\n      };\n      content = JSON.stringify(har, null, 2);\n      mimeType = 'application/json';\n      filename = `logs-${new Date().toISOString().split('T')[0]}.har`;\n    }\n\n    const blob = new Blob([content], { type: mimeType });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = filename;\n    a.click();\n    URL.revokeObjectURL(url);\n  };\n\n  const getFilteredLogs = () => {\n    let filtered = logs;\n\n    // Filter by level\n    if (filterLevel !== 'all') {\n      filtered = filtered.filter(log => log.level === filterLevel);\n    }\n\n    // Filter by type\n    if (filterType !== 'all') {\n      filtered = filtered.filter(log => {\n        if (filterType === 'console') {\n          // Console logs have type: 'console'\n          return log.type === 'console';\n        }\n        if (filterType === 'network') {\n          return log.type === 'network';\n        }\n        if (filterType === 'error') {\n          // Error logs have type: 'error' OR level: 'error'\n          return log.type === 'error' || log.level === 'error';\n        }\n        if (filterType === 'performance') {\n          return log.type === 'performance';\n        }\n        return true;\n      });\n    }\n\n    // Filter by HTTP status\n    if (filterStatus !== 'all') {\n      filtered = filtered.filter(log => {\n        if (log.type !== 'network' || !log.status) return false;\n        if (filterStatus === '2xx') return log.status >= 200 && log.status < 300;\n        if (filterStatus === '4xx') return log.status >= 400 && log.status < 500;\n        if (filterStatus === '5xx') return log.status >= 500;\n        if (filterStatus === 'failed') return log.status === 'failed' || log.status === 'pending';\n        return true;\n      });\n    }\n\n    // Filter by resource type (hide static assets like images/fonts/CSS/JS)\n    if (filterResourceType === 'api') {\n      filtered = filtered.filter(log => {\n        if (log.type !== 'network') return true; // Keep all non-network logs\n        const url = (log.url || '').toLowerCase();\n        const extension = url.split('.').pop()?.split('?')[0] || '';\n        const staticExtensions = ['jpg', 'jpeg', 'png', 'gif', 'svg', 'webp', 'ico', 'woff', 'woff2', 'ttf', 'eot', 'css', 'js', 'map'];\n        return !staticExtensions.includes(extension);\n      });\n    } else if (filterResourceType === 'static') {\n      filtered = filtered.filter(log => {\n        if (log.type !== 'network') return false; // Hide non-network logs when showing only static\n        const url = (log.url || '').toLowerCase();\n        const extension = url.split('.').pop()?.split('?')[0] || '';\n        const staticExtensions = ['jpg', 'jpeg', 'png', 'gif', 'svg', 'webp', 'ico', 'woff', 'woff2', 'ttf', 'eot', 'css', 'js', 'map'];\n        return staticExtensions.includes(extension);\n      });\n    }\n    \n    // Filter by domain\n    if (filterDomain) {\n      filtered = filtered.filter(log => {\n        const url = (log.url || log.pageUrl || '').toLowerCase();\n        try {\n          const urlObj = new URL(url);\n          return urlObj.hostname.includes(filterDomain.toLowerCase());\n        } catch {\n          return url.includes(filterDomain.toLowerCase());\n        }\n      });\n    }\n\n    // Filter by search query\n    if (searchQuery) {\n      const query = searchQuery.toLowerCase();\n      filtered = filtered.filter(log => {\n        const message = JSON.stringify(log.message || log.data || '').toLowerCase();\n        const url = (log.url || log.pageUrl || '').toLowerCase();\n        const method = (log.method || '').toLowerCase();\n        return message.includes(query) || url.includes(query) || method.includes(query);\n      });\n    }\n\n    // Sort\n    filtered = [...filtered].sort((a, b) => {\n      let aVal, bVal;\n      if (sortBy === 'timestamp') {\n        aVal = new Date(a.timestamp).getTime();\n        bVal = new Date(b.timestamp).getTime();\n      } else if (sortBy === 'level') {\n        aVal = a.level || '';\n        bVal = b.level || '';\n        return sortOrder === 'asc' ? aVal.localeCompare(bVal) : bVal.localeCompare(aVal);\n      } else if (sortBy === 'status') {\n        aVal = a.status || a.statusCode || 0;\n        bVal = b.status || b.statusCode || 0;\n      } else if (sortBy === 'method') {\n        aVal = (a.method || '').toLowerCase();\n        bVal = (b.method || '').toLowerCase();\n        return sortOrder === 'asc' ? aVal.localeCompare(bVal) : bVal.localeCompare(aVal);\n      } else if (sortBy === 'url') {\n        aVal = (a.url || a.pageUrl || '').toLowerCase();\n        bVal = (b.url || b.pageUrl || '').toLowerCase();\n        return sortOrder === 'asc' ? aVal.localeCompare(bVal) : bVal.localeCompare(aVal);\n      } else if (sortBy === 'latency') {\n        aVal = a.latency || 0;\n        bVal = b.latency || 0;\n      } else {\n        // Default to level\n        aVal = a.level || '';\n        bVal = b.level || '';\n        return sortOrder === 'asc' ? aVal.localeCompare(bVal) : bVal.localeCompare(aVal);\n      }\n      \n      // For numeric comparisons\n      if (typeof aVal === 'number' && typeof bVal === 'number') {\n        return sortOrder === 'asc' ? aVal - bVal : bVal - aVal;\n      }\n      \n      // For string comparisons (fallback)\n      return sortOrder === 'asc' ? aVal - bVal : bVal - aVal;\n    });\n\n    return filtered;\n  };\n\n  // Calculate insights/stats\n  const logStats = useMemo(() => {\n    const stats = {\n      total: logs.length,\n      errors: logs.filter(l => l.level === 'error' || l.type === 'error').length,\n      warnings: logs.filter(l => l.level === 'warn').length,\n      network: logs.filter(l => l.type === 'network').length,\n      console: logs.filter(l => l.type === 'console').length,\n      failedRequests: logs.filter(l => l.type === 'network' && (l.status >= 400 || !l.status)).length,\n      avgLatency: 0,\n      totalSize: 0,\n    };\n    \n    const networkLogs = logs.filter(l => l.type === 'network' && l.latency);\n    if (networkLogs.length > 0) {\n      stats.avgLatency = Math.round(networkLogs.reduce((sum, l) => sum + (l.latency || 0), 0) / networkLogs.length);\n    }\n    \n    const logsWithSize = logs.filter(l => l.responseSize);\n    if (logsWithSize.length > 0) {\n      stats.totalSize = logsWithSize.reduce((sum, l) => sum + (l.responseSize || 0), 0);\n    }\n    \n    return stats;\n  }, [logs]);\n\n  const filteredLogs = useMemo(() => getFilteredLogs(), [logs, filterLevel, filterType, filterStatus, filterResourceType, filterDomain, searchQuery, sortBy, sortOrder]);\n\n  const groupedLogs = useMemo(() => {\n    if (groupBy === 'none') {\n      return { 'All Logs': filteredLogs };\n    }\n\n    const groups = {};\n    filteredLogs.forEach(log => {\n      let key;\n      if (groupBy === 'level') {\n        key = log.level.toUpperCase();\n      } else if (groupBy === 'url') {\n        // Better URL pattern grouping\n        try {\n          const url = log.url || log.pageUrl || '';\n          if (url) {\n            const urlObj = new URL(url);\n            // Group by origin + path pattern (e.g., /api/v1/users, /api/v1/posts)\n            const pathParts = urlObj.pathname.split('/').filter(Boolean);\n            if (pathParts.length >= 2) {\n              // Group by origin + first 2 path segments\n              key = `${urlObj.origin}/${pathParts.slice(0, 2).join('/')}`;\n            } else {\n              key = urlObj.origin;\n            }\n          } else {\n            key = 'No URL';\n          }\n        } catch {\n          // Fallback: extract domain from URL string\n          const url = log.url || log.pageUrl || '';\n          const match = url.match(/https?:\\/\\/([^\\/]+)/);\n          key = match ? match[1] : (url || 'Unknown');\n        }\n      } else if (groupBy === 'type') {\n        key = (log.type || 'console').toUpperCase();\n      }\n      if (!groups[key]) groups[key] = [];\n      groups[key].push(log);\n    });\n\n    return groups;\n  }, [filteredLogs, groupBy]);\n\n  const toggleGroup = (key) => {\n    const newExpanded = new Set(expandedGroups);\n    if (newExpanded.has(key)) {\n      newExpanded.delete(key);\n    } else {\n      newExpanded.add(key);\n    }\n    setExpandedGroups(newExpanded);\n  };\n\n  // Handle column sorting\n  const handleSort = (column) => {\n    if (sortBy === column) {\n      // Toggle order if clicking same column\n      setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc');\n    } else {\n      // Set new column and default to descending\n      setSortBy(column);\n      setSortOrder('desc');\n    }\n  };\n\n  const getLevelIcon = (level) => {\n    switch (level) {\n      case 'error':\n        return <AlertCircle className=\"h-4 w-4 text-red-500\" />;\n      case 'warn':\n        return <AlertTriangle className=\"h-4 w-4 text-yellow-500\" />;\n      case 'info':\n        return <Info className=\"h-4 w-4 text-blue-500\" />;\n      case 'network':\n        return <Network className=\"h-4 w-4 text-purple-500\" />;\n      default:\n        return <FileText className=\"h-4 w-4 text-gray-500\" />;\n    }\n  };\n\n  const getLevelColor = (level) => {\n    switch (level) {\n      case 'error':\n        return 'bg-red-50 border-red-200 text-red-900';\n      case 'warn':\n        return 'bg-yellow-50 border-yellow-200 text-yellow-900';\n      case 'info':\n        return 'bg-blue-50 border-blue-200 text-blue-900';\n      case 'network':\n        return 'bg-purple-50 border-purple-200 text-purple-900';\n      default:\n        return 'bg-gray-50 border-gray-200 text-gray-900';\n    }\n  };\n\n  const formatTimestamp = (timestamp) => {\n    const date = new Date(timestamp);\n    return date.toLocaleTimeString() + '.' + date.getMilliseconds().toString().padStart(3, '0');\n  };\n\n  // Calculate time delta between logs (for race condition detection)\n  const calculateTimeDelta = (currentLog, previousLog) => {\n    if (!previousLog || !currentLog?.timestamp || !previousLog?.timestamp) return null;\n    const currentTime = new Date(currentLog.timestamp).getTime();\n    const previousTime = new Date(previousLog.timestamp).getTime();\n    const delta = currentTime - previousTime;\n    \n    if (delta < 1) return '<1ms';\n    if (delta < 1000) return `${delta}ms`;\n    return `${(delta / 1000).toFixed(2)}s`;\n  };\n\n  const formatMessage = (log) => {\n    if (log.type === 'network') {\n      const status = log.status || log.statusCode || 'Pending';\n      const latency = log.latency ? ` (${log.latency}ms)` : '';\n      return `${log.method || 'GET'} ${log.url || log.pageUrl || ''} - ${status}${latency}`;\n    }\n    if (log.type === 'performance') {\n      return `${log.resourceType || 'Resource'} - ${log.url || ''} (${log.duration?.toFixed(2)}ms, ${(log.transferSize / 1024).toFixed(2)}KB)`;\n    }\n    // Better formatting for console logs\n    if (log.type === 'console' || log.type === 'error') {\n      const message = log.message || '';\n      const data = log.data;\n      \n      // If there's structured data, show it nicely\n      if (data && Array.isArray(data) && data.length > 0) {\n        const formatted = data.map(item => {\n          if (typeof item === 'object') {\n            try {\n              return JSON.stringify(item, null, 2);\n            } catch {\n              return String(item);\n            }\n          }\n          return String(item);\n        }).join(' ');\n        return message ? `${message} ${formatted}` : formatted;\n      }\n      \n      if (typeof message === 'object') {\n        try {\n          return JSON.stringify(message, null, 2);\n        } catch {\n          return String(message);\n        }\n      }\n      \n      return String(message || data || '');\n    }\n    return typeof log.message === 'object' ? JSON.stringify(log.message, null, 2) : String(log.message || log.data || '');\n  };\n\n  return (\n    <div className=\"flex min-h-screen bg-slate-50\">\n      {/* Sidebar */}\n      <div className={clsx('border-r border-slate-200 bg-white transition-all duration-300', sidebarOpen ? 'w-64' : 'w-0 overflow-hidden')}>\n        <div className=\"flex h-full flex-col p-4\">\n          <div className=\"mb-4 flex items-center justify-between\">\n            <h2 className=\"text-lg font-semibold text-slate-900\">NowAssist</h2>\n            <button\n              onClick={() => setSidebarOpen(false)}\n              onKeyDown={(e) => {\n                if (e.key === 'Enter' || e.key === ' ') {\n                  e.preventDefault();\n                  setSidebarOpen(false);\n                }\n              }}\n              className=\"rounded-lg p-1.5 text-slate-600 transition hover:bg-slate-100 active:scale-95 focus:outline-none\"\n              tabIndex={0}\n              aria-label=\"Collapse sidebar\"\n            >\n              <ChevronLeft className=\"h-4 w-4\" />\n            </button>\n          </div>\n          <div className=\"mb-4\">\n            <div className=\"relative\">\n              <Search className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-400\" />\n              <input\n                type=\"text\"\n                placeholder=\"Search features...\"\n                value={sidebarSearchQuery}\n                onChange={(e) => setSidebarSearchQuery(e.target.value)}\n                className=\"w-full rounded-lg border border-slate-200 bg-white py-2 pl-9 pr-3 text-sm text-slate-900 placeholder:text-slate-400 focus:border-primary focus:outline-none\"\n                tabIndex={0}\n              />\n            </div>\n          </div>\n          <div className=\"flex-1 space-y-4 overflow-y-auto\">\n            {categories.map(category => {\n              const categoryFeatures = filteredFeatures.filter(f => f.category === category);\n              if (categoryFeatures.length === 0) return null;\n              return (\n                <div key={category}>\n                  <h3 className=\"mb-2 text-xs font-semibold uppercase tracking-wide text-slate-500\">{category}</h3>\n                  <div className=\"space-y-1\">\n                    {categoryFeatures.map(feature => {\n                      const Icon = feature.icon;\n                      const isActive = feature.id === 'logs';\n                      return (\n                        <a\n                          key={feature.id}\n                          href={feature.url}\n                          className={clsx(\n                            'flex items-center gap-3 rounded-lg px-3 py-2 text-sm transition',\n                            isActive ? 'bg-slate-100 font-medium text-slate-900' : 'text-slate-600 hover:bg-slate-50',\n                            feature.status === 'coming-soon' && 'pointer-events-none opacity-60'\n                          )}\n                          tabIndex={feature.status === 'coming-soon' ? -1 : 0}\n                        >\n                          <Icon className=\"h-4 w-4\" />\n                          <span className=\"flex-1\">{feature.name}</span>\n                          {feature.status === 'coming-soon' && (\n                            <span className=\"text-xs text-slate-400\">Soon</span>\n                          )}\n                        </a>\n                      );\n                    })}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n\n      {/* Collapse button when sidebar is closed */}\n      {!sidebarOpen && (\n        <button\n          onClick={() => setSidebarOpen(true)}\n          onKeyDown={(e) => {\n            if (e.key === 'Enter' || e.key === ' ') {\n              e.preventDefault();\n              setSidebarOpen(true);\n            }\n          }}\n          className=\"fixed left-0 top-1/2 z-10 -translate-y-1/2 rounded-r-lg border border-slate-200 bg-white p-2 text-slate-600 shadow-lg transition hover:bg-slate-50 active:scale-95 focus:outline-none\"\n          tabIndex={0}\n          aria-label=\"Expand sidebar\"\n        >\n          <ChevronRight className=\"h-4 w-4\" />\n        </button>\n      )}\n\n      {/* Main Content */}\n      <div className=\"flex-1 overflow-auto\">\n        <div className=\"w-full max-w-7xl mx-auto\">\n          {/* Professional Header Bar - Fixed at top */}\n          <div className=\"sticky top-0 z-30 bg-white border-b border-slate-200 shadow-sm\">\n            <div className=\"px-6 py-4\">\n              <div className=\"flex items-center justify-between\">\n                {/* Left: Title */}\n                <div>\n                  <h1 className=\"text-xl font-bold text-slate-900\">Browser Logs</h1>\n                  <p className=\"text-xs text-slate-500 mt-0.5\">Monitor console logs, errors, and network requests</p>\n                </div>\n                \n                {/* Right: Only Auto-scroll in header */}\n                <div className=\"flex items-center gap-2\">\n                  {/* Auto-scroll Toggle */}\n                  <button\n                    onClick={() => {\n                      const newAutoScroll = !autoScroll;\n                      setAutoScroll(newAutoScroll);\n                      if (newAutoScroll) {\n                        setTimeout(() => {\n                          const isAtBottom = checkIfAtBottom();\n                          if (isAtBottom) {\n                            userScrolledRef.current = false;\n                            isAtBottomRef.current = true;\n                          }\n                        }, 100);\n                      }\n                    }}\n                    className={clsx(\n                      'rounded-lg border px-3 py-1.5 text-xs font-medium transition flex items-center gap-1.5',\n                      autoScroll \n                        ? 'border-green-300 bg-green-50 text-green-700' \n                        : 'border-slate-200 bg-white text-slate-600 hover:bg-slate-50'\n                    )}\n                    title={autoScroll ? 'Auto-scroll enabled' : 'Auto-scroll disabled'}\n                  >\n                    <Clock className=\"h-3.5 w-3.5\" />\n                    Auto-scroll\n                  </button>\n                  \n                  {/* Clear */}\n                  <button\n                    onClick={clearLogs}\n                    disabled={logs.length === 0}\n                    className={clsx(\n                      'rounded-lg border px-3 py-1.5 text-xs font-medium transition flex items-center gap-1.5',\n                      logs.length === 0\n                        ? 'border-slate-200 bg-slate-50 text-slate-400 cursor-not-allowed'\n                        : 'border-red-200 bg-red-50 text-red-700 hover:bg-red-100'\n                    )}\n                    title=\"Clear all logs\"\n                  >\n                    <Trash2 className=\"h-3.5 w-3.5\" />\n                    Clear\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n          \n          {/* Content Area - Equal width container */}\n          <div className=\"p-6\">\n          {/* Info Section */}\n          <div className=\"mb-4\">\n            <button\n              onClick={() => setShowHowItWorks(!showHowItWorks)}\n              className=\"w-full flex items-center justify-between p-2 rounded-lg bg-blue-50 border border-blue-200 hover:bg-blue-100 transition\"\n            >\n              <p className=\"text-xs text-blue-800 font-medium flex items-center gap-1.5\">\n                <Info className=\"h-3.5 w-3.5\" />\n                How Log Capture Works\n              </p>\n              {showHowItWorks ? (\n                <ChevronUp className=\"h-4 w-4 text-blue-600\" />\n              ) : (\n                <ChevronDown className=\"h-4 w-4 text-blue-600\" />\n              )}\n            </button>\n            {showHowItWorks && (\n              <div className=\"mt-2 p-3 rounded-lg bg-blue-50 border border-blue-200\">\n                <ol className=\"text-xs text-blue-700 space-y-1 list-decimal list-inside ml-1\">\n                  <li><strong>Content Script</strong> runs inside each webpage tab</li>\n                  <li>It intercepts <code className=\"bg-blue-100 px-1 rounded text-blue-900\">console.log</code>, errors, <code className=\"bg-blue-100 px-1 rounded text-blue-900\">fetch</code>, and network requests</li>\n                  <li>Logs are sent from the tab → <strong>Background Service Worker</strong> → stored per tab</li>\n                  <li>This viewer displays logs in real-time</li>\n                  <li><strong>Select tabs and click \"Start Capture\" to begin logging</strong></li>\n                </ol>\n              </div>\n            )}\n          </div>\n\n          {/* Insights/Stats with Refresh/Export */}\n          {logs.length > 0 && (\n            <div className=\"mb-4\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <h2 className=\"text-sm font-semibold text-slate-700\">Log Statistics</h2>\n                <div className=\"flex items-center gap-2\">\n                  <button\n                    onClick={loadTabsAndLogs}\n                    className=\"rounded-lg border border-slate-200 bg-white px-3 py-1.5 text-xs font-medium text-slate-600 hover:bg-slate-50 transition flex items-center gap-1.5\"\n                    title=\"Refresh logs\"\n                  >\n                    <RefreshCw className=\"h-3.5 w-3.5\" />\n                    Refresh\n                  </button>\n                  \n                  {/* Export Dropdown */}\n                  <div className=\"relative\">\n                    <button\n                      onClick={() => setShowExportMenu(!showExportMenu)}\n                      className=\"rounded-lg border border-slate-200 bg-white px-3 py-1.5 text-xs font-medium text-slate-600 hover:bg-slate-50 transition flex items-center gap-1.5\"\n                      title=\"Export logs\"\n                    >\n                      <Download className=\"h-3.5 w-3.5\" />\n                      Export\n                      <ChevronDown className=\"h-3 w-3\" />\n                    </button>\n                    {showExportMenu && (\n                      <>\n                        <div \n                          className=\"fixed inset-0 z-40\" \n                          onClick={() => setShowExportMenu(false)}\n                        />\n                        <div className=\"absolute right-0 top-full mt-1 w-40 bg-white border border-slate-200 rounded-lg shadow-lg z-50 py-1\">\n                          <button\n                            onClick={() => {\n                              exportLogs('json');\n                              setShowExportMenu(false);\n                            }}\n                            className=\"w-full text-left px-3 py-2 text-xs text-slate-700 hover:bg-slate-50 transition flex items-center gap-2\"\n                          >\n                            <Download className=\"h-3.5 w-3.5\" />\n                            Export as JSON\n                          </button>\n                          <button\n                            onClick={() => {\n                              exportLogs('csv');\n                              setShowExportMenu(false);\n                            }}\n                            className=\"w-full text-left px-3 py-2 text-xs text-slate-700 hover:bg-slate-50 transition flex items-center gap-2\"\n                          >\n                            <Download className=\"h-3.5 w-3.5\" />\n                            Export as CSV\n                          </button>\n                          <button\n                            onClick={() => {\n                              exportLogs('har');\n                              setShowExportMenu(false);\n                            }}\n                            className=\"w-full text-left px-3 py-2 text-xs text-slate-700 hover:bg-slate-50 transition flex items-center gap-2\"\n                          >\n                            <Download className=\"h-3.5 w-3.5\" />\n                            Export as HAR\n                          </button>\n                        </div>\n                      </>\n                    )}\n                  </div>\n                </div>\n              </div>\n              <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-2\">\n              <button\n                onClick={() => {\n                  setFilterLevel('all');\n                  setFilterType('all');\n                }}\n                className=\"rounded-lg border border-slate-200 bg-white p-3 text-left hover:bg-slate-50 transition cursor-pointer\"\n              >\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <Activity className=\"h-4 w-4 text-slate-500\" />\n                  <span className=\"text-xs font-medium text-slate-600\">Total</span>\n                </div>\n                <div className=\"text-lg font-bold text-slate-900\">{logStats.total}</div>\n              </button>\n              <button\n                onClick={() => {\n                  setFilterLevel('error');\n                  setFilterType('all');\n                }}\n                className=\"rounded-lg border border-red-200 bg-red-50 p-3 text-left hover:bg-red-100 transition cursor-pointer\"\n              >\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <AlertCircle className=\"h-4 w-4 text-red-600\" />\n                  <span className=\"text-xs font-medium text-red-700\">Errors</span>\n                </div>\n                <div className=\"text-lg font-bold text-red-700\">{logStats.errors}</div>\n              </button>\n              <button\n                onClick={() => {\n                  setFilterLevel('warn');\n                  setFilterType('all');\n                }}\n                className=\"rounded-lg border border-yellow-200 bg-yellow-50 p-3 text-left hover:bg-yellow-100 transition cursor-pointer\"\n              >\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <AlertTriangle className=\"h-4 w-4 text-yellow-600\" />\n                  <span className=\"text-xs font-medium text-yellow-700\">Warnings</span>\n                </div>\n                <div className=\"text-lg font-bold text-yellow-700\">{logStats.warnings}</div>\n              </button>\n              <button\n                onClick={() => {\n                  setFilterLevel('all');\n                  setFilterType('network');\n                }}\n                className=\"rounded-lg border border-blue-200 bg-blue-50 p-3 text-left hover:bg-blue-100 transition cursor-pointer\"\n              >\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <Network className=\"h-4 w-4 text-blue-600\" />\n                  <span className=\"text-xs font-medium text-blue-700\">Network</span>\n                </div>\n                <div className=\"text-lg font-bold text-blue-700\">{logStats.network}</div>\n              </button>\n              <button\n                onClick={() => {\n                  setFilterLevel('all');\n                  setFilterType('console');\n                }}\n                className=\"rounded-lg border border-purple-200 bg-purple-50 p-3 text-left hover:bg-purple-100 transition cursor-pointer\"\n              >\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <FileText className=\"h-4 w-4 text-purple-600\" />\n                  <span className=\"text-xs font-medium text-purple-700\">Console</span>\n                </div>\n                <div className=\"text-lg font-bold text-purple-700\">{logStats.console}</div>\n              </button>\n              <button\n                onClick={() => {\n                  setFilterLevel('all');\n                  setFilterType('network');\n                  setFilterStatus('failed');\n                }}\n                className=\"rounded-lg border border-orange-200 bg-orange-50 p-3 text-left hover:bg-orange-100 transition cursor-pointer\"\n              >\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <X className=\"h-4 w-4 text-orange-600\" />\n                  <span className=\"text-xs font-medium text-orange-700\">Failed</span>\n                </div>\n                <div className=\"text-lg font-bold text-orange-700\">{logStats.failedRequests}</div>\n              </button>\n              {logStats.avgLatency > 0 && (\n                <div className=\"rounded-lg border border-indigo-200 bg-indigo-50 p-3\">\n                  <div className=\"flex items-center gap-2 mb-1\">\n                    <Zap className=\"h-4 w-4 text-indigo-600\" />\n                    <span className=\"text-xs font-medium text-indigo-700\">Avg Latency</span>\n                  </div>\n                  <div className=\"text-lg font-bold text-indigo-700\">{logStats.avgLatency}ms</div>\n                </div>\n              )}\n              {logStats.totalSize > 0 && (\n                <div className=\"rounded-lg border border-teal-200 bg-teal-50 p-3\">\n                  <div className=\"flex items-center gap-2 mb-1\">\n                    <BarChart3 className=\"h-4 w-4 text-teal-600\" />\n                    <span className=\"text-xs font-medium text-teal-700\">Data</span>\n                  </div>\n                  <div className=\"text-lg font-bold text-teal-700\">\n                    {(logStats.totalSize / 1024).toFixed(1)}KB\n                  </div>\n                </div>\n              )}\n              </div>\n            </div>\n          )}\n\n          {/* Tab Selection */}\n          <div className=\"mb-4\">\n              <div className=\"flex items-center justify-between mb-3\">\n              <div className=\"flex-1\">\n                <label className=\"text-sm font-semibold text-slate-900 block\">\n                  {selectedTabId || selectedTabIds.size > 0 \n                    ? `Selected Tab${selectedTabIds.size > 1 ? 's' : ''} (${selectedTabIds.size || (selectedTabId ? 1 : 0)})` \n                    : 'Select Tab to Monitor'}\n                </label>\n                <p className=\"text-xs text-slate-500 mt-1\">\n                  {selectedTabId || selectedTabIds.size > 0\n                    ? `${isCapturing ? '✓ Capturing logs from' : 'Ready to capture'} ${selectedTabIds.size || (selectedTabId ? 1 : 0)} tab(s). ${isCapturing ? '' : 'Click \"Start Capture\" to begin logging.'}`\n                    : 'Search and select tabs to monitor. Scripts are auto-injected but logging is inactive until you activate it.'}\n                </p>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <div className=\"relative\">\n                  <button\n                    onClick={() => setShowTabDropdown(!showTabDropdown)}\n                    className=\"rounded-lg border-2 border-slate-300 bg-white px-3 py-1.5 text-xs font-medium text-slate-700 hover:bg-slate-50 transition flex items-center gap-1.5 shadow-sm\"\n                    title=\"Search and add tabs\"\n                  >\n                    <Search className=\"h-3.5 w-3.5\" />\n                    {selectedTabId || selectedTabIds.size > 0 ? 'Add/Change Tab' : 'Search Tabs'}\n                  </button>\n                  \n                  {/* Dropdown */}\n                  {showTabDropdown && (\n                    <div className=\"absolute right-0 top-full mt-2 w-96 bg-white border-2 border-slate-200 rounded-lg shadow-xl z-50 max-h-[500px] flex flex-col\">\n                      <div className=\"p-3 border-b border-slate-200\">\n                        <div className=\"relative\">\n                          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400\" />\n                          <input\n                            type=\"text\"\n                            placeholder=\"Search tabs by title or URL...\"\n                            value={tabSearchQuery}\n                            onChange={(e) => setTabSearchQuery(e.target.value)}\n                            onFocus={() => setShowTabDropdown(true)}\n                            className=\"w-full rounded-lg border border-slate-200 bg-white pl-9 pr-9 py-2 text-sm text-slate-900 placeholder:text-slate-400 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20\"\n                            autoFocus\n                          />\n                          {tabSearchQuery && (\n                            <button\n                              onClick={() => setTabSearchQuery('')}\n                              className=\"absolute right-2 top-1/2 -translate-y-1/2 p-1 rounded hover:bg-slate-100 text-slate-400 hover:text-slate-600\"\n                              title=\"Clear search\"\n                            >\n                              <X className=\"h-3.5 w-3.5\" />\n                            </button>\n                          )}\n                        </div>\n                      </div>\n                      <div className=\"overflow-y-auto flex-1 p-2\">\n                        {(() => {\n                          const filteredTabs = tabSearchQuery\n                            ? allAvailableTabs.filter(tab => {\n                                const query = tabSearchQuery.toLowerCase();\n                                return (tab.title || '').toLowerCase().includes(query) ||\n                                       (tab.url || '').toLowerCase().includes(query) ||\n                                       (tab.displayName || '').toLowerCase().includes(query);\n                              })\n                            : allAvailableTabs.slice(0, 20); // Show first 20 when no search\n                          \n                          if (filteredTabs.length === 0) {\n                            return (\n                              <div className=\"text-center py-8 text-sm text-slate-500\">\n                                <Search className=\"h-6 w-6 mx-auto mb-2 text-slate-400\" />\n                                <p>No tabs found</p>\n                                <p className=\"text-xs mt-1\">Try a different search term</p>\n                              </div>\n                            );\n                          }\n                          \n                          return (\n                            <div className=\"space-y-1\">\n                              {filteredTabs.map(tab => {\n                                const isSelected = selectedTabIds.has(tab.id) || selectedTabId === tab.id;\n                                \n                                return (\n                                  <button\n                                    key={tab.id}\n                                    onClick={() => {\n                                      if (isSelected) {\n                                        // Remove from selection\n                                        const newSelected = new Set(selectedTabIds);\n                                        newSelected.delete(tab.id);\n                                        setSelectedTabIds(newSelected);\n                                        if (selectedTabId === tab.id) {\n                                          setSelectedTabId(null);\n                                        }\n                                        if (newSelected.size === 0) {\n                                          setTabs([]);\n                                          setLogs([]);\n                                        } else {\n                                          loadLogsForSelectedTabs();\n                                        }\n                                      } else {\n                                        // Add to selection\n                                        const newSelected = new Set(selectedTabIds);\n                                        newSelected.add(tab.id);\n                                        setSelectedTabIds(newSelected);\n                                        setSelectedTabId(tab.id);\n                                        loadLogsForTab(tab.id);\n                                      }\n                                    }}\n                                    className={clsx(\n                                      'w-full text-left px-3 py-2 rounded-lg transition flex items-center gap-2 group',\n                                      isSelected\n                                        ? 'bg-primary/10 border-2 border-primary'\n                                        : 'hover:bg-slate-50 border-2 border-transparent'\n                                    )}\n                                  >\n                                    {isSelected ? (\n                                      <CheckSquare className=\"h-4 w-4 text-primary flex-shrink-0\" />\n                                    ) : (\n                                      <Square className=\"h-4 w-4 text-slate-400 group-hover:text-slate-600 flex-shrink-0\" />\n                                    )}\n                                    {tab.active && <div className=\"h-2 w-2 rounded-full bg-green-500 flex-shrink-0\" />}\n                                    <div className=\"flex-1 min-w-0\">\n                                      <div className=\"text-sm font-medium text-slate-900 truncate\">\n                                        {tab.title || tab.displayName || `Tab ${tab.id}`}\n                                      </div>\n                                      <div className=\"text-xs text-slate-500 truncate\">{tab.url}</div>\n                                      {tab.hasLogs && (\n                                        <div className=\"text-xs text-slate-600 mt-0.5\">\n                                          {tab.logCount || 0} log{tab.logCount !== 1 ? 's' : ''}\n                                        </div>\n                                      )}\n                                    </div>\n                                  </button>\n                                );\n                              })}\n                            </div>\n                          );\n                        })()}\n                      </div>\n                      {!tabSearchQuery && allAvailableTabs.length > 20 && (\n                        <div className=\"px-3 py-2 border-t border-slate-200 text-xs text-slate-500 text-center\">\n                          Showing first 20 tabs. Search to find more.\n                        </div>\n                      )}\n                    </div>\n                  )}\n                </div>\n                \n                {isCapturing ? (\n                  <button\n                    onClick={stopCapture}\n                    className=\"rounded-lg border-2 border-red-300 bg-red-50 px-3 py-1.5 text-xs font-semibold text-red-700 hover:bg-red-100 transition flex items-center gap-1.5 shadow-sm\"\n                    title=\"Stop capturing logs\"\n                  >\n                    <X className=\"h-3.5 w-3.5\" />\n                    Stop Capture\n                  </button>\n                ) : (\n                  <button\n                    onClick={startCapture}\n                    disabled={selectedTabIds.size === 0 && !selectedTabId}\n                    className={clsx(\n                      'rounded-lg border-2 px-3 py-1.5 text-xs font-semibold transition flex items-center gap-1.5 shadow-sm',\n                      (selectedTabIds.size === 0 && !selectedTabId)\n                        ? 'border-slate-200 bg-slate-100 text-slate-400 cursor-not-allowed'\n                        : 'border-green-400 bg-green-500 text-white hover:bg-green-600'\n                    )}\n                    title=\"Start capturing logs from selected tabs\"\n                  >\n                    <Activity className=\"h-3.5 w-3.5\" />\n                    Start Capture\n                  </button>\n                )}\n              </div>\n            </div>\n            \n            {/* Click outside to close dropdown */}\n            {showTabDropdown && (\n              <div \n                className=\"fixed inset-0 z-40\" \n                onClick={() => setShowTabDropdown(false)}\n              />\n            )}\n            \n            {injectionStatus && (\n              <div className={clsx(\n                'mb-3 px-3 py-2 rounded-lg text-xs',\n                injectionStatus.startsWith('✓') \n                  ? 'bg-green-50 text-green-700 border border-green-200'\n                  : injectionStatus.startsWith('✗')\n                  ? 'bg-red-50 text-red-700 border border-red-200'\n                  : 'bg-blue-50 text-blue-700 border border-blue-200'\n              )}>\n                {injectionStatus}\n              </div>\n            )}\n            \n            {/* Show selected tabs */}\n            {selectedTabId || selectedTabIds.size > 0 ? (\n              <div className=\"space-y-2\">\n                {(() => {\n                  const selectedTabsList = selectedTabIds.size > 0 \n                    ? Array.from(selectedTabIds).map(id => allAvailableTabs.find(t => t.id === id)).filter(Boolean)\n                    : selectedTabId \n                      ? [allAvailableTabs.find(t => t.id === selectedTabId)].filter(Boolean)\n                      : [];\n                  \n                  return selectedTabsList.map(tab => (\n                    <div \n                      key={tab.id} \n                      className=\"rounded-lg border-2 border-primary/20 bg-primary/5 p-3 flex items-center justify-between group\"\n                    >\n                      <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n                        {tab.active && <div className=\"h-2.5 w-2.5 rounded-full bg-green-500 flex-shrink-0\" />}\n                        <div className=\"flex-1 min-w-0\">\n                          <div className=\"font-semibold text-slate-900 text-sm truncate\">\n                            {tab.title || tab.displayName || `Tab ${tab.id}`}\n                          </div>\n                          <div className=\"text-xs text-slate-500 truncate mt-0.5\">{tab.url}</div>\n                          {tab.hasLogs && (\n                            <div className=\"text-xs text-slate-600 mt-1 font-medium\">\n                              {tab.logCount || 0} log{tab.logCount !== 1 ? 's' : ''} captured\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                      <button\n                        onClick={() => {\n                          // Remove this tab from selection\n                          const newSelected = new Set(selectedTabIds);\n                          newSelected.delete(tab.id);\n                          setSelectedTabIds(newSelected);\n                          if (selectedTabId === tab.id) {\n                            setSelectedTabId(newSelected.size > 0 ? Array.from(newSelected)[0] : null);\n                          }\n                          if (newSelected.size === 0) {\n                            setTabs([]);\n                            setLogs([]);\n                          } else {\n                            loadLogsForSelectedTabs();\n                          }\n                        }}\n                        className=\"ml-3 p-1.5 rounded-lg hover:bg-red-50 text-slate-400 hover:text-red-600 transition flex-shrink-0 opacity-0 group-hover:opacity-100\"\n                        title=\"Remove tab\"\n                      >\n                        <X className=\"h-4 w-4\" />\n                      </button>\n                    </div>\n                  ));\n                })()}\n              </div>\n            ) : (\n              <div className=\"text-sm text-slate-500 py-8 text-center border-2 border-dashed border-slate-200 rounded-lg bg-slate-50\">\n                <Search className=\"h-6 w-6 mx-auto mb-2 text-slate-400\" />\n                <p className=\"font-medium\">No tabs selected</p>\n                <p className=\"text-xs mt-1\">Click \"Search Tabs\" above to find and select tabs to monitor</p>\n              </div>\n            )}\n          </div>\n\n          {/* Filters and Search - Improved UI */}\n          <div className=\"mb-4 space-y-3\">\n            {/* Search Bar - Prominent */}\n            <div className=\"relative\">\n              <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-400\" />\n              <input\n                type=\"text\"\n                placeholder=\"Search logs by message, URL, or method...\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                className=\"w-full rounded-xl border-2 border-slate-200 bg-white pl-12 pr-4 py-3 text-sm text-slate-900 placeholder:text-slate-400 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20\"\n              />\n              {searchQuery && (\n                <button\n                  onClick={() => setSearchQuery('')}\n                  className=\"absolute right-3 top-1/2 -translate-y-1/2 p-1 rounded-full hover:bg-slate-100 text-slate-400 hover:text-slate-600\"\n                  title=\"Clear search\"\n                >\n                  <X className=\"h-4 w-4\" />\n                </button>\n              )}\n            </div>\n\n            {/* Active Filters Pills */}\n            {(filterLevel !== 'all' || filterType !== 'all' || filterStatus !== 'all' || filterResourceType !== 'all' || filterDomain || searchQuery) && (\n              <div className=\"flex items-center gap-2 flex-wrap\">\n                <span className=\"text-xs font-semibold text-slate-600\">Active Filters:</span>\n                {filterLevel !== 'all' && (\n                  <span className=\"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-red-100 text-red-700 text-xs font-medium\">\n                    Level: {filterLevel}\n                    <button onClick={() => setFilterLevel('all')} className=\"hover:text-red-900\">\n                      <X className=\"h-3 w-3\" />\n                    </button>\n                  </span>\n                )}\n                {filterType !== 'all' && (\n                  <span className=\"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-blue-100 text-blue-700 text-xs font-medium\">\n                    Type: {filterType}\n                    <button onClick={() => setFilterType('all')} className=\"hover:text-blue-900\">\n                      <X className=\"h-3 w-3\" />\n                    </button>\n                  </span>\n                )}\n                {filterStatus !== 'all' && (\n                  <span className=\"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-orange-100 text-orange-700 text-xs font-medium\">\n                    Status: {filterStatus}\n                    <button onClick={() => setFilterStatus('all')} className=\"hover:text-orange-900\">\n                      <X className=\"h-3 w-3\" />\n                    </button>\n                  </span>\n                )}\n                {filterResourceType !== 'all' && (\n                  <span className=\"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-purple-100 text-purple-700 text-xs font-medium\">\n                    Resource: {filterResourceType}\n                    <button onClick={() => setFilterResourceType('all')} className=\"hover:text-purple-900\">\n                      <X className=\"h-3 w-3\" />\n                    </button>\n                  </span>\n                )}\n                {filterDomain && (\n                  <span className=\"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-indigo-100 text-indigo-700 text-xs font-medium\">\n                    Domain: {filterDomain}\n                    <button onClick={() => setFilterDomain('')} className=\"hover:text-indigo-900\">\n                      <X className=\"h-3 w-3\" />\n                    </button>\n                  </span>\n                )}\n                {searchQuery && (\n                  <span className=\"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-slate-100 text-slate-700 text-xs font-medium\">\n                    Search: \"{searchQuery.substring(0, 20)}{searchQuery.length > 20 ? '...' : ''}\"\n                    <button onClick={() => setSearchQuery('')} className=\"hover:text-slate-900\">\n                      <X className=\"h-3 w-3\" />\n                    </button>\n                  </span>\n                )}\n                <button\n                  onClick={() => {\n                    setFilterLevel('all');\n                    setFilterType('all');\n                    setFilterStatus('all');\n                    setFilterResourceType('all');\n                    setFilterDomain('');\n                    setSearchQuery('');\n                  }}\n                  className=\"text-xs font-medium text-slate-600 hover:text-slate-900 underline\"\n                >\n                  Clear All\n                </button>\n              </div>\n            )}\n\n            {/* Filter Controls - Organized Sections */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3\">\n              {/* Level Filter */}\n              <div className=\"space-y-1\">\n                <label className=\"text-xs font-semibold text-slate-700 flex items-center gap-1.5\">\n                  <Filter className=\"h-3.5 w-3.5\" />\n                  Level\n                </label>\n                <CustomDropdown\n                  value={filterLevel}\n                  onChange={setFilterLevel}\n                  options={[\n                    { value: 'all', label: 'All Levels' },\n                    { value: 'error', label: '🔴 Errors' },\n                    { value: 'warn', label: '🟡 Warnings' },\n                    { value: 'info', label: '🔵 Info' },\n                    { value: 'debug', label: '⚪ Debug' },\n                  ]}\n                  placeholder=\"All Levels\"\n                />\n              </div>\n\n              {/* Type Filter */}\n              <div className=\"space-y-1\">\n                <label className=\"text-xs font-semibold text-slate-700 flex items-center gap-1.5\">\n                  <FileText className=\"h-3.5 w-3.5\" />\n                  Type\n                </label>\n                <CustomDropdown\n                  value={filterType}\n                  onChange={setFilterType}\n                  options={[\n                    { value: 'all', label: 'All Types' },\n                    { value: 'console', label: '📝 Console' },\n                    { value: 'network', label: '🌐 Network' },\n                    { value: 'error', label: '❌ Errors' },\n                    { value: 'performance', label: '⚡ Performance' },\n                  ]}\n                  placeholder=\"All Types\"\n                />\n              </div>\n\n              {/* Status Filter (shown when network type selected) */}\n              {(filterType === 'network' || filterType === 'all') && (\n                <div className=\"space-y-1\">\n                  <label className=\"text-xs font-semibold text-slate-700 flex items-center gap-1.5\">\n                    <Activity className=\"h-3.5 w-3.5\" />\n                    HTTP Status\n                  </label>\n                  <CustomDropdown\n                    value={filterStatus}\n                    onChange={setFilterStatus}\n                    options={[\n                      { value: 'all', label: 'All Status' },\n                      { value: '2xx', label: '✅ 2xx Success' },\n                      { value: '4xx', label: '⚠️ 4xx Client Error' },\n                      { value: '5xx', label: '❌ 5xx Server Error' },\n                      { value: 'failed', label: '🔴 Failed/Pending' },\n                    ]}\n                    placeholder=\"All Status\"\n                  />\n                </div>\n              )}\n\n              {/* Resource Type Filter */}\n              {(filterType === 'all' || filterType === 'network') && (\n                <div className=\"space-y-1\">\n                  <label className=\"text-xs font-semibold text-slate-700 flex items-center gap-1.5\">\n                    <Network className=\"h-3.5 w-3.5\" />\n                    Resources\n                  </label>\n                  <CustomDropdown\n                    value={filterResourceType}\n                    onChange={setFilterResourceType}\n                    options={[\n                      { value: 'all', label: 'All Resources' },\n                      { value: 'api', label: '🔌 API Only (Hide Static)' },\n                      { value: 'static', label: '📦 Static Only' },\n                    ]}\n                    placeholder=\"All Resources\"\n                  />\n                </div>\n              )}\n            </div>\n\n            {/* Advanced Filters Row */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3\">\n              {/* Domain Filter */}\n              <div className=\"space-y-1\">\n                <label className=\"text-xs font-semibold text-slate-700 flex items-center gap-1.5\">\n                  <Search className=\"h-3.5 w-3.5\" />\n                  Domain/URL\n                </label>\n                <div className=\"relative\">\n                  <input\n                    type=\"text\"\n                    placeholder=\"e.g., api.example.com\"\n                    value={filterDomain}\n                    onChange={(e) => setFilterDomain(e.target.value)}\n                    className=\"w-full rounded-lg border-2 border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 placeholder:text-slate-400 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20\"\n                  />\n                  {filterDomain && (\n                    <button\n                      onClick={() => setFilterDomain('')}\n                      className=\"absolute right-2 top-1/2 -translate-y-1/2 p-1 rounded hover:bg-slate-100 text-slate-400 hover:text-slate-600\"\n                      title=\"Clear domain filter\"\n                    >\n                      <X className=\"h-3.5 w-3.5\" />\n                    </button>\n                  )}\n                </div>\n              </div>\n\n              {/* Grouping */}\n              <div className=\"space-y-1\">\n                <label className=\"text-xs font-semibold text-slate-700 flex items-center gap-1.5\">\n                  <BarChart3 className=\"h-3.5 w-3.5\" />\n                  Group By\n                </label>\n                <CustomDropdown\n                  value={groupBy}\n                  onChange={setGroupBy}\n                  options={[\n                    { value: 'none', label: 'No Grouping' },\n                    { value: 'level', label: 'By Level' },\n                    { value: 'type', label: 'By Type' },\n                    { value: 'url', label: 'By URL Pattern' },\n                  ]}\n                  placeholder=\"No Grouping\"\n                />\n              </div>\n\n              {/* Sort */}\n              <div className=\"space-y-1\">\n                <label className=\"text-xs font-semibold text-slate-700 flex items-center gap-1.5\">\n                  <ChevronDown className=\"h-3.5 w-3.5\" />\n                  Sort\n                </label>\n                <div className=\"flex items-center gap-2\">\n                  <CustomDropdown\n                    value={sortBy}\n                    onChange={setSortBy}\n                    options={[\n                      { value: 'timestamp', label: 'By Time' },\n                      { value: 'level', label: 'By Level' },\n                    ]}\n                    placeholder=\"By Time\"\n                    className=\"flex-1\"\n                  />\n                  <button\n                    onClick={() => setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc')}\n                    className=\"rounded-lg border-2 border-slate-200 bg-white px-3 py-2 text-sm text-slate-600 hover:bg-slate-50 transition\"\n                    title={`Sort ${sortOrder === 'asc' ? 'Descending' : 'Ascending'}`}\n                  >\n                    {sortOrder === 'asc' ? <ChevronUp className=\"h-4 w-4\" /> : <ChevronDown className=\"h-4 w-4\" />}\n                  </button>\n                </div>\n              </div>\n\n              {/* Time Deltas Toggle */}\n              <div className=\"space-y-1\">\n                <label className=\"text-xs font-semibold text-slate-700 flex items-center gap-1.5\">\n                  <Clock className=\"h-3.5 w-3.5\" />\n                  Time Deltas\n                </label>\n                <button\n                  onClick={() => setShowTimeDeltas(!showTimeDeltas)}\n                  className={clsx(\n                    'w-full rounded-lg border-2 px-3 py-2 text-sm font-medium transition flex items-center justify-center gap-1.5',\n                    showTimeDeltas \n                      ? 'border-green-300 bg-green-50 text-green-700' \n                      : 'border-slate-200 bg-white text-slate-600 hover:bg-slate-50'\n                  )}\n                  title=\"Show time deltas between logs\"\n                >\n                  <Clock className=\"h-4 w-4\" />\n                  {showTimeDeltas ? 'ON' : 'OFF'}\n                </button>\n              </div>\n            </div>\n          </div>\n        {/* Logs Table - Professional table view with sortable columns */}\n        <div className=\"rounded-xl border-2 border-slate-200 bg-white shadow-sm overflow-hidden w-full\">\n          <div ref={logsContainerRef} className=\"max-h-[calc(100vh-300px)] overflow-x-auto overflow-y-auto\">\n            {Object.entries(groupedLogs).map(([groupKey, groupLogs]) => {\n              if (groupBy !== 'none') {\n                const isExpanded = expandedGroups.has(groupKey);\n                return (\n                  <div key={groupKey} className=\"border-b border-slate-200 last:border-b-0\">\n                    <button\n                      onClick={() => toggleGroup(groupKey)}\n                      className=\"w-full px-4 py-3 flex items-center justify-between bg-slate-50 hover:bg-slate-100 transition\"\n                    >\n                      <span className=\"font-semibold text-slate-900\">{groupKey} ({groupLogs.length})</span>\n                      {isExpanded ? <ChevronUp className=\"h-4 w-4\" /> : <ChevronDown className=\"h-4 w-4\" />}\n                    </button>\n                    {isExpanded && (\n                      <TableLogsView \n                        logs={groupLogs}\n                        showTimeDeltas={showTimeDeltas}\n                        calculateTimeDelta={calculateTimeDelta}\n                        sortBy={sortBy}\n                        sortOrder={sortOrder}\n                        handleSort={handleSort}\n                        getLevelIcon={getLevelIcon}\n                        formatTimestamp={formatTimestamp}\n                        formatMessage={formatMessage}\n                        allLogs={logs}\n                      />\n                    )}\n                  </div>\n                );\n              }\n              return (\n                <TableLogsView \n                  key={groupKey}\n                  logs={groupLogs}\n                  showTimeDeltas={showTimeDeltas}\n                  calculateTimeDelta={calculateTimeDelta}\n                  sortBy={sortBy}\n                  sortOrder={sortOrder}\n                  handleSort={handleSort}\n                  getLevelIcon={getLevelIcon}\n                  formatTimestamp={formatTimestamp}\n                  formatMessage={formatMessage}\n                  allLogs={filteredLogs}\n                />\n              );\n            })}\n            {filteredLogs.length === 0 && (\n              <div className=\"p-12 text-center\">\n                <div className=\"max-w-md mx-auto\">\n                  {logs.length === 0 ? (\n                    <>\n                      <FileText className=\"h-16 w-16 mx-auto mb-4 text-slate-300\" />\n                      <h3 className=\"text-lg font-semibold text-slate-700 mb-2\">No Logs Captured Yet</h3>\n                      <p className=\"text-sm text-slate-500 mb-4\">\n                        Select a tab and click \"Start Capture\" to begin logging console messages, network requests, and errors.\n                      </p>\n                      <div className=\"flex items-center justify-center gap-2 text-xs text-slate-400\">\n                        <Activity className=\"h-4 w-4\" />\n                        <span>Logs will appear here once capture is started</span>\n                      </div>\n                    </>\n                  ) : (\n                    <>\n                      <Filter className=\"h-16 w-16 mx-auto mb-4 text-slate-300\" />\n                      <h3 className=\"text-lg font-semibold text-slate-700 mb-2\">No Logs Match Your Filters</h3>\n                      <p className=\"text-sm text-slate-500 mb-4\">\n                        We have <span className=\"font-semibold text-slate-700\">{logs.length}</span> log{logs.length !== 1 ? 's' : ''} total, but none match your current filter settings.\n                      </p>\n                      <button\n                        onClick={() => {\n                          setFilterLevel('all');\n                          setFilterType('all');\n                          setFilterStatus('all');\n                          setFilterResourceType('all');\n                          setFilterDomain('');\n                          setSearchQuery('');\n                        }}\n                        className=\"px-4 py-2 bg-primary text-white rounded-lg text-sm font-medium hover:bg-primary/90 transition\"\n                      >\n                        Clear All Filters\n                      </button>\n                    </>\n                  )}\n                </div>\n              </div>\n            )}\n            <div ref={logsEndRef} />\n          </div>\n        </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Table view component for logs\nconst TableLogsView = ({ logs, showTimeDeltas, calculateTimeDelta, sortBy, sortOrder, handleSort, getLevelIcon, formatTimestamp, formatMessage, allLogs }) => {\n  const [expandedRows, setExpandedRows] = useState(new Set());\n  \n  const toggleRow = (logId) => {\n    const newExpanded = new Set(expandedRows);\n    if (newExpanded.has(logId)) {\n      newExpanded.delete(logId);\n    } else {\n      newExpanded.add(logId);\n    }\n    setExpandedRows(newExpanded);\n  };\n\n  const getStatusBadgeColor = (status) => {\n    if (!status || status === 'pending' || status === 'failed') return 'bg-gray-500';\n    if (status >= 200 && status < 300) return 'bg-green-500';\n    if (status >= 300 && status < 400) return 'bg-blue-500';\n    if (status >= 400 && status < 500) return 'bg-orange-500';\n    if (status >= 500) return 'bg-red-500';\n    return 'bg-gray-500';\n  };\n\n  const SortableHeader = ({ column, children, className = '' }) => (\n    <th \n      onClick={() => handleSort(column)}\n      className={clsx(\n        'px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider cursor-pointer hover:bg-slate-100 transition select-none sticky top-0 bg-white z-10',\n        className\n      )}\n    >\n      <div className=\"flex items-center gap-2\">\n        <span>{children}</span>\n        {sortBy === column && (\n          sortOrder === 'asc' ? <ChevronUp className=\"h-3 w-3\" /> : <ChevronDown className=\"h-3 w-3\" />\n        )}\n      </div>\n    </th>\n  );\n\n  return (\n    <table className=\"w-full border-collapse\">\n      <thead>\n        <tr className=\"border-b-2 border-slate-300 bg-slate-50\">\n          <SortableHeader column=\"timestamp\" className=\"w-[140px]\">Time</SortableHeader>\n          <SortableHeader column=\"level\" className=\"w-[120px]\">Level</SortableHeader>\n          <SortableHeader column=\"status\" className=\"w-[100px]\">Status</SortableHeader>\n          <SortableHeader column=\"method\" className=\"w-[100px]\">Method</SortableHeader>\n          <th className=\"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider sticky top-0 bg-slate-50 z-10\">URL / Message</th>\n          <SortableHeader column=\"latency\" className=\"w-[100px]\">Latency</SortableHeader>\n          <th className=\"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider sticky top-0 bg-slate-50 z-10 w-[100px]\">Size</th>\n          <th className=\"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider sticky top-0 bg-slate-50 z-10 w-[80px]\">Actions</th>\n        </tr>\n      </thead>\n      <tbody>\n        {logs.map((log, idx) => {\n          const previousLog = idx > 0 ? logs[idx - 1] : null;\n          const timeDelta = showTimeDeltas ? calculateTimeDelta(log, previousLog) : null;\n          const isExpanded = expandedRows.has(log.id || idx);\n          \n          return (\n            <React.Fragment key={log.id || idx}>\n              <tr \n                className={clsx(\n                  'border-b border-slate-100 hover:bg-slate-50 transition',\n                  log.level === 'error' && 'bg-red-50/30',\n                  log.type === 'network' && (log.status >= 400 || log.status === 'failed') && 'bg-orange-50/30'\n                )}\n              >\n                {/* Time Column */}\n                <td className=\"px-4 py-2 text-xs font-mono text-slate-600\">\n                  <div className=\"flex flex-col gap-0.5\">\n                    <span>{formatTimestamp(log.timestamp)}</span>\n                    {timeDelta && (\n                      <span className=\"text-[10px] text-slate-400\" title=\"Time since previous log\">+{timeDelta}</span>\n                    )}\n                  </div>\n                </td>\n                \n                {/* Level Column */}\n                <td className=\"px-4 py-2\">\n                  <div className=\"flex items-center gap-2\">\n                    {getLevelIcon(log.level)}\n                    <span className=\"text-xs font-semibold uppercase\">{log.level}</span>\n                  </div>\n                </td>\n                \n                {/* Status Column */}\n                <td className=\"px-4 py-2\">\n                  {log.type === 'network' && log.status ? (\n                    <span className={clsx(\n                      'inline-block px-2 py-0.5 rounded text-xs font-semibold text-white',\n                      getStatusBadgeColor(log.status)\n                    )}>\n                      {log.status}\n                    </span>\n                  ) : (\n                    <span className=\"text-xs text-slate-400\">—</span>\n                  )}\n                </td>\n                \n                {/* Method Column */}\n                <td className=\"px-4 py-2\">\n                  {log.type === 'network' && log.method ? (\n                    <span className=\"text-xs font-mono font-semibold text-slate-700\">{log.method}</span>\n                  ) : (\n                    <span className=\"text-xs text-slate-400\">—</span>\n                  )}\n                </td>\n                \n                {/* URL / Message Column */}\n                <td className=\"px-4 py-2 max-w-md\">\n                  <div className=\"text-xs break-words font-mono\">\n                    {log.type === 'network' ? (\n                      <span className=\"text-slate-700 truncate block\" title={log.url || log.pageUrl || ''}>\n                        {log.url || log.pageUrl || '—'}\n                      </span>\n                    ) : (\n                      <span className=\"text-slate-700 line-clamp-2\" title={formatMessage(log)}>\n                        {formatMessage(log)}\n                      </span>\n                    )}\n                  </div>\n                </td>\n                \n                {/* Latency Column */}\n                <td className=\"px-4 py-2\">\n                  {log.type === 'network' && log.latency !== undefined ? (\n                    <span className=\"text-xs font-mono text-slate-600\">{log.latency}ms</span>\n                  ) : (\n                    <span className=\"text-xs text-slate-400\">—</span>\n                  )}\n                </td>\n                \n                {/* Size Column */}\n                <td className=\"px-4 py-2\">\n                  {log.type === 'network' && log.responseSize !== undefined ? (\n                    <span className=\"text-xs font-mono text-slate-600\">\n                      {(log.responseSize / 1024).toFixed(1)}KB\n                    </span>\n                  ) : (\n                    <span className=\"text-xs text-slate-400\">—</span>\n                  )}\n                </td>\n                \n                {/* Actions Column */}\n                <td className=\"px-4 py-2\">\n                  <button\n                    onClick={() => toggleRow(log.id || idx)}\n                    className=\"text-xs text-slate-500 hover:text-slate-700 font-medium\"\n                  >\n                    {isExpanded ? 'Less' : 'More'}\n                  </button>\n                </td>\n              </tr>\n              \n              {/* Expanded Details Row */}\n              {isExpanded && (\n                <tr>\n                  <td colSpan={8} className=\"px-4 py-3 bg-slate-50 border-b border-slate-200\">\n                    <LogItemDetails log={log} formatMessage={formatMessage} allLogs={allLogs} />\n                  </td>\n                </tr>\n              )}\n            </React.Fragment>\n          );\n        })}\n      </tbody>\n    </table>\n  );\n};\n\nconst LogItemDetails = ({ log, formatMessage, allLogs }) => {\n  return (\n    <div className=\"text-xs text-slate-600 space-y-2\">\n      {log.url && log.url !== log.pageUrl && <div><strong>Request URL:</strong> {log.url}</div>}\n      {log.method && <div><strong>Method:</strong> {log.method}</div>}\n      {log.status && <div><strong>Status:</strong> {log.status} {log.statusText || ''}</div>}\n      {log.latency !== undefined && <div><strong>Latency:</strong> {log.latency}ms</div>}\n      {log.responseSize !== undefined && <div><strong>Response Size:</strong> {(log.responseSize / 1024).toFixed(2)}KB</div>}\n      {log.stack && <div><strong>Stack:</strong> <pre className=\"whitespace-pre-wrap text-[10px] bg-white p-2 rounded border\">{log.stack}</pre></div>}\n      {log.filename && <div><strong>File:</strong> {log.filename}:{log.lineno}:{log.colno}</div>}\n      {log.requestHeaders && <div><strong>Request Headers:</strong> <pre className=\"whitespace-pre-wrap text-[10px] bg-white p-2 rounded border max-h-40 overflow-auto\">{JSON.stringify(log.requestHeaders, null, 2)}</pre></div>}\n      {log.responseHeaders && <div><strong>Response Headers:</strong> <pre className=\"whitespace-pre-wrap text-[10px] bg-white p-2 rounded border max-h-40 overflow-auto\">{JSON.stringify(log.responseHeaders, null, 2)}</pre></div>}\n      {log.responseBody && (\n        <div>\n          <strong>Response Body:</strong>\n          <pre className=\"whitespace-pre-wrap text-[10px] bg-white p-2 rounded border max-h-60 overflow-auto\">\n            {typeof log.responseBody === 'string' \n              ? log.responseBody \n              : JSON.stringify(log.responseBody, null, 2)}\n          </pre>\n        </div>\n      )}\n      {!log.responseBody && log.responseData && (\n        <div>\n          <strong>Response Data:</strong>\n          <pre className=\"whitespace-pre-wrap text-[10px] bg-white p-2 rounded border max-h-60 overflow-auto\">\n            {typeof log.responseData === 'string' \n              ? log.responseData \n              : JSON.stringify(log.responseData, null, 2)}\n          </pre>\n        </div>\n      )}\n      {!log.responseBody && !log.responseData && log.type === 'network' && (\n        <div className=\"text-slate-400 italic text-[10px]\">\n          Response body not captured (may be too large or capture failed)\n        </div>\n      )}\n      {log.data && typeof log.data === 'object' && <div><strong>Data:</strong> <pre className=\"whitespace-pre-wrap text-[10px] bg-white p-2 rounded border max-h-60 overflow-auto\">{JSON.stringify(log.data, null, 2)}</pre></div>}\n      {log.data && typeof log.data !== 'object' && log.data && <div><strong>Data:</strong> <span className=\"font-mono text-[10px]\">{String(log.data)}</span></div>}\n      {log.resourceType && <div><strong>Resource Type:</strong> {log.resourceType}</div>}\n      {log.duration !== undefined && <div><strong>Duration:</strong> {log.duration.toFixed(2)}ms</div>}\n      {log.transferSize !== undefined && <div><strong>Transfer Size:</strong> {(log.transferSize / 1024).toFixed(2)}KB</div>}\n    </div>\n  );\n};\n\nconst LogItem = ({ log, previousLog, timeDelta, allLogs, getLevelIcon, getLevelColor, formatTimestamp, formatMessage }) => {\n  const [expanded, setExpanded] = useState(false);\n  \n  // Find correlated logs (errors that happened around this network request, or console logs before/after)\n  const getCorrelatedLogs = () => {\n    if (!allLogs || !log.timestamp) return [];\n    const logTime = new Date(log.timestamp).getTime();\n    const timeWindow = 2000; // 2 seconds before/after\n    \n    return allLogs.filter(l => {\n      if (l.id === log.id) return false;\n      const lTime = new Date(l.timestamp).getTime();\n      const timeDiff = Math.abs(lTime - logTime);\n      \n      // If this is a failed network request, find errors that happened around it\n      if (log.type === 'network' && (log.status >= 400 || log.status === 'failed')) {\n        if (l.type === 'error' || l.level === 'error') {\n          return timeDiff < timeWindow;\n        }\n      }\n      \n      // Find console logs that happened just before this network request\n      if (log.type === 'network' && l.type === 'console') {\n        const diff = logTime - lTime;\n        return diff > 0 && diff < timeWindow; // Console log happened before network request\n      }\n      \n      return false;\n    }).slice(0, 3); // Limit to 3 correlated logs\n  };\n  \n  const correlatedLogs = getCorrelatedLogs();\n  \n  // Get status badge color\n  const getStatusBadgeColor = (status) => {\n    if (!status || status === 'pending' || status === 'failed') return 'bg-gray-500';\n    if (status >= 200 && status < 300) return 'bg-green-500';\n    if (status >= 300 && status < 400) return 'bg-blue-500';\n    if (status >= 400 && status < 500) return 'bg-orange-500'; // Changed to orange for 4xx\n    if (status >= 500) return 'bg-red-500';\n    return 'bg-gray-500';\n  };\n\n  return (\n    <div className={clsx(\n      'border-b border-slate-100 last:border-b-0 px-4 py-3 hover:bg-slate-50 transition relative',\n      getLevelColor(log.level),\n      log.type === 'network' && (log.status >= 400 || log.status === 'failed') ? 'border-l-4 border-l-red-400' : '',\n      log.level === 'error' ? 'border-l-4 border-l-red-400' : ''\n    )}>\n      <div className=\"flex items-start gap-3\">\n        <div className=\"flex-shrink-0 mt-0.5\">{getLevelIcon(log.level)}</div>\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-center justify-between gap-2 mb-1\">\n            <div className=\"flex items-center gap-2 flex-wrap\">\n              <span className=\"text-xs font-semibold uppercase\">{log.level}</span>\n              <span className=\"text-xs text-slate-500\">{formatTimestamp(log.timestamp)}</span>\n              {timeDelta && (\n                <span className=\"text-xs px-1.5 py-0.5 rounded bg-slate-100 text-slate-600 font-mono\" title=\"Time since previous log\">\n                  +{timeDelta}\n                </span>\n              )}\n              {log.type === 'network' && log.status && (\n                <span className={clsx(\n                  'text-xs px-2 py-0.5 rounded text-white font-semibold',\n                  getStatusBadgeColor(log.status)\n                )}>\n                  {log.status}\n                </span>\n              )}\n              {correlatedLogs.length > 0 && (\n                <span className=\"text-xs px-1.5 py-0.5 rounded bg-purple-100 text-purple-700\" title={`${correlatedLogs.length} related log(s) nearby`}>\n                  🔗 {correlatedLogs.length}\n                </span>\n              )}\n            </div>\n            <button\n              onClick={() => setExpanded(!expanded)}\n              className=\"text-xs text-slate-500 hover:text-slate-700\"\n            >\n              {expanded ? 'Less' : 'More'}\n            </button>\n          </div>\n          <div className=\"text-sm break-words\">\n            {log.type === 'console' && log.data && Array.isArray(log.data) ? (\n              <div className=\"space-y-1\">\n                {log.message && <div className=\"font-medium text-slate-900\">{String(log.message)}</div>}\n                {log.data.map((item, idx) => (\n                  <div key={idx} className=\"font-mono text-xs bg-slate-50 p-2 rounded border border-slate-200\">\n                    {typeof item === 'object' ? (\n                      <pre className=\"whitespace-pre-wrap\">{JSON.stringify(item, null, 2)}</pre>\n                    ) : (\n                      <span>{String(item)}</span>\n                    )}\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"font-mono\">{formatMessage(log)}</div>\n            )}\n          </div>\n          {expanded && (\n            <div className=\"mt-2 pt-2 border-t border-slate-200 text-xs text-slate-600 space-y-2\">\n              {/* Show correlated logs */}\n              {correlatedLogs.length > 0 && (\n                <div className=\"bg-purple-50 border border-purple-200 rounded p-2\">\n                  <div className=\"font-semibold text-purple-900 mb-1\">Related Logs ({correlatedLogs.length}):</div>\n                  {correlatedLogs.map((relatedLog, idx) => (\n                    <div key={relatedLog.id || idx} className=\"text-xs text-purple-700 mt-1 pl-2 border-l-2 border-purple-300\">\n                      <span className=\"font-medium\">{relatedLog.type}/{relatedLog.level}:</span> {formatMessage(relatedLog).substring(0, 100)}\n                      {formatMessage(relatedLog).length > 100 && '...'}\n                    </div>\n                  ))}\n                </div>\n              )}\n              \n              {/* Failed request context */}\n              {log.type === 'network' && (log.status >= 400 || log.status === 'failed') && (\n                <div className=\"bg-red-50 border border-red-200 rounded p-2\">\n                  <div className=\"font-semibold text-red-900 mb-1\">⚠️ Failed Request Details:</div>\n                  <div className=\"text-xs text-red-800 space-y-0.5\">\n                    {log.status && <div><strong>Status:</strong> {log.status} {log.statusText || ''}</div>}\n                    {log.error && <div><strong>Error:</strong> {log.error}</div>}\n                    {log.url && <div><strong>URL:</strong> {log.url}</div>}\n                    {log.method && <div><strong>Method:</strong> {log.method}</div>}\n                  </div>\n                </div>\n              )}\n              \n              {/* Standard details */}\n              {log.pageUrl && <div><strong>Page URL:</strong> {log.pageUrl}</div>}\n              {log.url && log.url !== log.pageUrl && <div><strong>Request URL:</strong> {log.url}</div>}\n              {log.method && <div><strong>Method:</strong> {log.method}</div>}\n              {log.status && <div><strong>Status:</strong> {log.status} {log.statusText || ''}</div>}\n              {log.latency !== undefined && <div><strong>Latency:</strong> {log.latency}ms</div>}\n              {log.responseSize !== undefined && <div><strong>Response Size:</strong> {(log.responseSize / 1024).toFixed(2)}KB</div>}\n              {log.stack && <div><strong>Stack:</strong> <pre className=\"whitespace-pre-wrap\">{log.stack}</pre></div>}\n              {log.filename && <div><strong>File:</strong> {log.filename}:{log.lineno}:{log.colno}</div>}\n              {log.requestHeaders && <div><strong>Request Headers:</strong> <pre className=\"whitespace-pre-wrap\">{JSON.stringify(log.requestHeaders, null, 2)}</pre></div>}\n              {log.responseHeaders && <div><strong>Response Headers:</strong> <pre className=\"whitespace-pre-wrap\">{JSON.stringify(log.responseHeaders, null, 2)}</pre></div>}\n              {log.responseBody && <div><strong>Response Body:</strong> <pre className=\"whitespace-pre-wrap text-xs max-h-60 overflow-auto bg-slate-50 p-2 rounded border\">{typeof log.responseBody === 'string' ? log.responseBody : JSON.stringify(log.responseBody, null, 2)}</pre></div>}\n              {log.responseData && <div><strong>Response Data:</strong> <pre className=\"whitespace-pre-wrap text-xs max-h-60 overflow-auto bg-slate-50 p-2 rounded border\">{typeof log.responseData === 'string' ? log.responseData : JSON.stringify(log.responseData, null, 2)}</pre></div>}\n              {log.data && typeof log.data === 'object' && <div><strong>Data:</strong> <pre className=\"whitespace-pre-wrap text-xs max-h-60 overflow-auto bg-slate-50 p-2 rounded border\">{JSON.stringify(log.data, null, 2)}</pre></div>}\n              {log.data && typeof log.data !== 'object' && log.data && <div><strong>Data:</strong> <span className=\"font-mono text-xs\">{String(log.data)}</span></div>}\n              {log.resourceType && <div><strong>Resource Type:</strong> {log.resourceType}</div>}\n              {log.duration !== undefined && <div><strong>Duration:</strong> {log.duration.toFixed(2)}ms</div>}\n              {log.transferSize !== undefined && <div><strong>Transfer Size:</strong> {(log.transferSize / 1024).toFixed(2)}KB</div>}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nReactDOM.createRoot(document.getElementById('root')).render(<LogViewer />);\n\n"],"names":["__iconNode","Activity","createLucideIcon","ChartColumn","FileText","SquareCheckBig","Square","TriangleAlert","Zap","FEATURES","ShieldCheck","Key","Network","FileCode","FileJson","LogViewer","logs","setLogs","useState","allTabs","setAllTabs","tabs","setTabs","selectedTabId","setSelectedTabId","selectedTabIds","setSelectedTabIds","tabSearchQuery","setTabSearchQuery","showTabSelector","setShowTabSelector","allAvailableTabs","setAllAvailableTabs","showTabDropdown","setShowTabDropdown","filterLevel","setFilterLevel","filterType","setFilterType","filterStatus","setFilterStatus","filterResourceType","setFilterResourceType","filterDomain","setFilterDomain","searchQuery","setSearchQuery","sortBy","setSortBy","sortOrder","setSortOrder","groupBy","setGroupBy","showTimeDeltas","setShowTimeDeltas","expandedGroups","setExpandedGroups","autoScroll","setAutoScroll","sidebarOpen","setSidebarOpen","sidebarSearchQuery","setSidebarSearchQuery","showExportMenu","setShowExportMenu","logsEndRef","useRef","logsContainerRef","userScrolledRef","isAtBottomRef","filteredFeatures","f","categories","useEffect","result","activeTabs","currentTabs","setIsCapturing","tabId","loadTabsAndLogs","listener","message","loadTabs","interval","loadLogsForSelectedTabs","tabIdParam","loadLogsForTab","activeTabId","t","firstTabWithLogs","checkIfAtBottom","container","scrollTop","scrollHeight","clientHeight","isAtBottom","handleScroll","wasAtBottom","isNowAtBottom","logsResponse","allOpenTabs","resolve","tab","tabsWithLogs","tabsMap","displayName","a","b","selectedTabsArray","selectedTabsOnly","injecting","setInjecting","injectionStatus","setInjectionStatus","showHowItWorks","setShowHowItWorks","isCapturing","startCapture","tabIdsToActivate","err","stopCapture","tabIdsToDeactivate","allActiveTabs","tabIdsToLoad","allLogs","response","log","clearLogs","exportLogs","format","filteredLogs","getFilteredLogs","content","mimeType","filename","headers","rows","row","cell","networkLogs","har","name","value","blob","url","filtered","extension","query","method","aVal","bVal","logStats","useMemo","stats","l","sum","logsWithSize","groupedLogs","groups","key","urlObj","pathParts","match","toggleGroup","newExpanded","handleSort","column","getLevelIcon","level","jsx","AlertCircle","AlertTriangle","Info","formatTimestamp","timestamp","date","calculateTimeDelta","currentLog","previousLog","currentTime","previousTime","delta","formatMessage","status","latency","data","formatted","item","jsxs","clsx","e","ChevronLeft","Search","category","categoryFeatures","feature","Icon","isActive","ChevronRight","newAutoScroll","Clock","Trash2","ChevronUp","ChevronDown","RefreshCw","Download","Fragment","X","BarChart3","filteredTabs","isSelected","newSelected","CheckSquare","id","Filter","CustomDropdown","groupKey","groupLogs","isExpanded","TableLogsView","expandedRows","setExpandedRows","toggleRow","logId","getStatusBadgeColor","SortableHeader","children","className","idx","timeDelta","React","LogItemDetails","ReactDOM"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6]}