import{c as O,S as lt,F as nt,R as it,j as e,r as o,a as ot}from"./styles-BrZbNQrY.js";import{K as ct,N as xe,F as dt,c as C,C as xt,S as B,a as mt}from"./clsx-BM42V34V.js";import{F as $e,C as W}from"./CustomDropdown-DD3Iye2a.js";import{C as Ce}from"./clock-B3LHeq54.js";import{T as ut}from"./trash-2-8a72TOgL.js";import{I as He}from"./info-YKvzrScd.js";import{C as me,X as w}from"./x-C-hZFkk1.js";import{C as _}from"./chevron-down-BdCELbz4.js";import{R as ht}from"./refresh-cw-DtooVfZS.js";import{D as oe}from"./download-BhLSdUGL.js";import{C as qe}from"./circle-alert-BRfnStPt.js";const pt=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],ce=O("activity",pt);const ft=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],We=O("chart-column",ft);const gt=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],de=O("file-text",gt);const bt=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],jt=O("square-check-big",bt);const wt=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],vt=O("square",wt);const Nt=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],_e=O("triangle-alert",Nt);const yt=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],St=O("zap",yt),Je=[{id:"jwt",name:"JWT Decoder",icon:lt,category:"Authentication",status:"active",url:chrome.runtime?.getURL?chrome.runtime.getURL("jwt.html"):"jwt.html"},{id:"saml",name:"SAML Inspector",icon:ct,category:"Authentication",status:"active",url:chrome.runtime?.getURL?chrome.runtime.getURL("saml.html"):"saml.html"},{id:"rest",name:"REST API Tester",icon:xe,category:"API Testing",status:"active",url:chrome.runtime?.getURL?chrome.runtime.getURL("rest.html"):"rest.html"},{id:"har",name:"HAR Analyzer",icon:dt,category:"Debugging",status:"active",url:chrome.runtime?.getURL?chrome.runtime.getURL("har-analyzer.html"):"har-analyzer.html"},{id:"json",name:"JSON Utility",icon:nt,category:"Utilities",status:"active",url:chrome.runtime?.getURL?chrome.runtime.getURL("json-utility.html"):"json-utility.html"}],Ct=()=>{const[l,I]=o.useState([]),[ue,ke]=o.useState([]),[h,$]=o.useState([]),[x,v]=o.useState(null),[d,N]=o.useState(new Set),[U,ee]=o.useState(""),[Le,Te]=o.useState(!1),[y,i]=o.useState([]),[p,E]=o.useState(!1),[k,g]=o.useState("all"),[f,L]=o.useState("all"),[T,J]=o.useState("all"),[F,te]=o.useState("all"),[A,P]=o.useState(""),[z,V]=o.useState(""),[S,Re]=o.useState("timestamp"),[b,he]=o.useState("desc"),[M,Ve]=o.useState("none"),[G,Ge]=o.useState(!0),[Ae,Qe]=o.useState(new Set),[Q,pe]=o.useState(!0),[ze,se]=o.useState(!0),[fe,Ke]=o.useState(""),[Ie,K]=o.useState(!1),ae=o.useRef(null),re=o.useRef(null),ge=o.useRef(!1),Y=o.useRef(!0),Ye=Je.filter(s=>s.name.toLowerCase().includes(fe.toLowerCase())||s.category.toLowerCase().includes(fe.toLowerCase())),Xe=[...new Set(Je.map(s=>s.category))];o.useEffect(()=>{chrome.storage&&chrome.storage.local.get(["activeLoggingTabs"],s=>{const t=s.activeLoggingTabs||[],a=d.size>0?Array.from(d):x?[x]:[];we(a.some(r=>t.includes(r)))})},[x,d]),o.useEffect(()=>{if(ve(),chrome.runtime&&chrome.runtime.id){const s=a=>{a&&a.type==="NEW_LOG"&&(!x||a.tabId===x?ve():le())};chrome.runtime.onMessage.addListener(s);const t=setInterval(()=>{le(),H()},1e3);return()=>{try{chrome.runtime.onMessage.removeListener(s)}catch{}clearInterval(t)}}},[x,d]),o.useEffect(()=>{const t=new URLSearchParams(window.location.search).get("tabId");if(t){const a=parseInt(t,10);if(!isNaN(a)){v(a),N(new Set([a])),q(a);return}}},[]),o.useEffect(()=>{if(!x&&d.size===0&&h.length>0)if(chrome.tabs)chrome.tabs.query({active:!0,currentWindow:!0},s=>{if(s.length>0){const t=s[0].id;if(h.find(r=>r.id===t))h.length>5&&N(new Set([t])),v(t),q(t);else{const r=h.find(n=>n.hasLogs)||h[0];h.length>5&&N(new Set([r.id])),v(r.id),q(r.id)}}else{const t=h.find(a=>a.hasLogs)||h[0];h.length>5&&N(new Set([t.id])),v(t.id),q(t.id)}});else{const s=h.find(t=>t.hasLogs)||h[0];h.length>5&&N(new Set([s.id])),v(s.id),q(s.id)}},[h]);const Ue=()=>{if(!re.current)return!1;const s=re.current,t=s.scrollTop,a=s.scrollHeight,r=s.clientHeight,j=a-t-r<50;return Y.current=j,j};o.useEffect(()=>{const s=re.current;if(!s)return;const t=()=>{const a=Y.current,r=Ue();a&&!r?(ge.current=!0,pe(!1)):!a&&r&&(ge.current=!1,pe(!0))};return s.addEventListener("scroll",t,{passive:!0}),()=>{s.removeEventListener("scroll",t)}},[]),o.useEffect(()=>{Q&&ae.current&&Y.current&&requestAnimationFrame(()=>{ae.current&&Y.current&&ae.current.scrollIntoView({behavior:"smooth"})})},[l,Q]);const le=async()=>{if(!(!chrome.runtime||!chrome.runtime.id))try{const s=await chrome.runtime.sendMessage({action:"get_logs",tabId:null});let t=[];if(chrome.tabs)try{t=(await new Promise(c=>{chrome.tabs.query({},c)})).filter(c=>c.url&&!c.url.startsWith("chrome://")&&!c.url.startsWith("chrome-extension://")&&!c.url.startsWith("moz-extension://")&&!c.url.startsWith("edge://")&&!c.url.startsWith("about:")).map(c=>({id:c.id,url:c.url,title:c.title,active:c.active,windowId:c.windowId}))}catch{}const a=s?.tabs||[],r=new Map;a.forEach(m=>{r.set(m.id,{...m,hasLogs:!0})}),t.forEach(m=>{let c=m.title;if(!c&&m.url)try{c=new URL(m.url).hostname||m.url}catch{c=m.url.length>50?`${m.url.substring(0,50)}...`:m.url}c||(c=`Tab ${m.id}`),r.has(m.id)?r.set(m.id,{...r.get(m.id),...m,displayName:c}):r.set(m.id,{...m,hasLogs:!1,logCount:0,lastUpdate:0,displayName:c})});const n=Array.from(r.values());n.sort((m,c)=>m.active&&!c.active?-1:!m.active&&c.active?1:m.hasLogs&&!c.hasLogs?-1:!m.hasLogs&&c.hasLogs?1:(c.lastUpdate||0)-(m.lastUpdate||0));const j=d.size>0?Array.from(d):x?[x]:[];if(i(n),j.length>0){const m=n.filter(c=>j.includes(c.id));$(m)}else h.length===0&&$([])}catch{}},[Lt,Tt]=o.useState(!1),[ne,D]=o.useState(""),[be,Ze]=o.useState(!1),[je,we]=o.useState(!1),et=async()=>{if(!chrome.runtime||!chrome.runtime.id)return;const s=d.size>0?Array.from(d):x?[x]:[];if(s.length===0){D("âœ— No tabs selected. Please select tabs first."),setTimeout(()=>D(""),3e3);return}try{for(const t of s)try{await chrome.scripting.executeScript({target:{tabId:t},files:["content-script.js"]})}catch(a){console.debug("Script injection (may already be injected):",a.message)}await chrome.runtime.sendMessage({action:"activate_logging",tabIds:s}),we(!0),D(`âœ“ Log capture activated for ${s.length} tab(s)! Make some console.log calls or network requests to see them here.`),setTimeout(()=>{H(),D("")},2e3)}catch(t){console.error("Failed to activate logging",t),D(`âœ— Failed to activate logging: ${t.message||"Unknown error"}`),setTimeout(()=>D(""),5e3)}},tt=async()=>{if(!chrome.runtime||!chrome.runtime.id)return;const s=d.size>0?Array.from(d):x?[x]:[];s.length===0?chrome.storage.local.get(["activeLoggingTabs"],t=>{const a=t.activeLoggingTabs||[];chrome.runtime.sendMessage({action:"deactivate_logging",tabIds:a})}):await chrome.runtime.sendMessage({action:"deactivate_logging",tabIds:s}),we(!1),D("âœ“ Log capture stopped - no new logs will be captured"),setTimeout(()=>D(""),5e3),setTimeout(()=>{le()},500)},ve=async()=>{await le(),await H()},H=async()=>{if(!chrome.runtime||!chrome.runtime.id)return;const s=d.size>0?Array.from(d):x?[x]:[];if(s.length===0){I([]);return}try{const t=[];for(const a of s){const r=await chrome.runtime.sendMessage({action:"get_logs",tabId:a});r&&r.logs&&t.push(...r.logs.map(n=>({...n,sourceTabId:a})))}t.sort((a,r)=>new Date(a.timestamp)-new Date(r.timestamp)),I(t)}catch(t){console.error("Failed to load logs",t)}},q=async s=>{v(s),N(new Set([s])),await H()},st=async()=>{if(!(!chrome.runtime||!chrome.runtime.id))try{await chrome.runtime.sendMessage({action:"clear_logs",tabId:x}),I([])}catch(s){console.error("Failed to clear logs",s)}},Ne=s=>{const t=De();let a,r,n;if(s==="json")a=JSON.stringify(t,null,2),r="application/json",n=`logs-${new Date().toISOString().split("T")[0]}.json`;else if(s==="csv"){const ie=["Timestamp","Level","Type","Message","URL","Status","Method","Latency","Response Size"],ye=t.map(u=>[u.timestamp,u.level,u.type||"console",JSON.stringify(u.message||u.data||""),u.url||u.pageUrl||"",u.status||u.statusCode||"",u.method||"",u.latency||"",u.responseSize||""]);a=[ie,...ye].map(u=>u.map(Z=>`"${String(Z).replace(/"/g,'""')}"`).join(",")).join(`
`),r="text/csv",n=`logs-${new Date().toISOString().split("T")[0]}.csv`}else if(s==="har"){const ie=t.filter(u=>u.type==="network"),ye={log:{version:"1.2",creator:{name:"NowAssist",version:"0.1.0"},entries:ie.map(u=>({startedDateTime:u.timestamp,time:u.latency||0,request:{method:u.method||"GET",url:u.url||u.pageUrl||"",headers:u.headers?Object.entries(u.headers).map(([Z,Se])=>({name:Z,value:Se})):[]},response:{status:u.status||u.statusCode||0,statusText:u.statusText||"",headers:u.responseHeaders?Object.entries(u.responseHeaders).map(([Z,Se])=>({name:Z,value:Se})):[],content:{size:u.responseSize||0}}}))}};a=JSON.stringify(ye,null,2),r="application/json",n=`logs-${new Date().toISOString().split("T")[0]}.har`}const j=new Blob([a],{type:r}),m=URL.createObjectURL(j),c=document.createElement("a");c.href=m,c.download=n,c.click(),URL.revokeObjectURL(m)},De=()=>{let s=l;if(k!=="all"&&(s=s.filter(t=>t.level===k)),f!=="all"&&(s=s.filter(t=>f==="console"?t.type==="console":f==="network"?t.type==="network":f==="error"?t.type==="error"||t.level==="error":f==="performance"?t.type==="performance":!0)),T!=="all"&&(s=s.filter(t=>t.type!=="network"||!t.status?!1:T==="2xx"?t.status>=200&&t.status<300:T==="4xx"?t.status>=400&&t.status<500:T==="5xx"?t.status>=500:T==="failed"?t.status==="failed"||t.status==="pending":!0)),F==="api"?s=s.filter(t=>{if(t.type!=="network")return!0;const r=(t.url||"").toLowerCase().split(".").pop()?.split("?")[0]||"";return!["jpg","jpeg","png","gif","svg","webp","ico","woff","woff2","ttf","eot","css","js","map"].includes(r)}):F==="static"&&(s=s.filter(t=>{if(t.type!=="network")return!1;const r=(t.url||"").toLowerCase().split(".").pop()?.split("?")[0]||"";return["jpg","jpeg","png","gif","svg","webp","ico","woff","woff2","ttf","eot","css","js","map"].includes(r)})),A&&(s=s.filter(t=>{const a=(t.url||t.pageUrl||"").toLowerCase();try{return new URL(a).hostname.includes(A.toLowerCase())}catch{return a.includes(A.toLowerCase())}})),z){const t=z.toLowerCase();s=s.filter(a=>{const r=JSON.stringify(a.message||a.data||"").toLowerCase(),n=(a.url||a.pageUrl||"").toLowerCase(),j=(a.method||"").toLowerCase();return r.includes(t)||n.includes(t)||j.includes(t)})}return s=[...s].sort((t,a)=>{let r,n;if(S==="timestamp")r=new Date(t.timestamp).getTime(),n=new Date(a.timestamp).getTime();else{if(S==="level")return r=t.level||"",n=a.level||"",b==="asc"?r.localeCompare(n):n.localeCompare(r);if(S==="status")r=t.status||t.statusCode||0,n=a.status||a.statusCode||0;else{if(S==="method")return r=(t.method||"").toLowerCase(),n=(a.method||"").toLowerCase(),b==="asc"?r.localeCompare(n):n.localeCompare(r);if(S==="url")return r=(t.url||t.pageUrl||"").toLowerCase(),n=(a.url||a.pageUrl||"").toLowerCase(),b==="asc"?r.localeCompare(n):n.localeCompare(r);if(S==="latency")r=t.latency||0,n=a.latency||0;else return r=t.level||"",n=a.level||"",b==="asc"?r.localeCompare(n):n.localeCompare(r)}}return b==="asc"?r-n:n-r}),s},R=o.useMemo(()=>{const s={total:l.length,errors:l.filter(r=>r.level==="error"||r.type==="error").length,warnings:l.filter(r=>r.level==="warn").length,network:l.filter(r=>r.type==="network").length,console:l.filter(r=>r.type==="console").length,failedRequests:l.filter(r=>r.type==="network"&&(r.status>=400||!r.status)).length,avgLatency:0,totalSize:0},t=l.filter(r=>r.type==="network"&&r.latency);t.length>0&&(s.avgLatency=Math.round(t.reduce((r,n)=>r+(n.latency||0),0)/t.length));const a=l.filter(r=>r.responseSize);return a.length>0&&(s.totalSize=a.reduce((r,n)=>r+(n.responseSize||0),0)),s},[l]),X=o.useMemo(()=>De(),[l,k,f,T,F,A,z,S,b]),at=o.useMemo(()=>{if(M==="none")return{"All Logs":X};const s={};return X.forEach(t=>{let a;if(M==="level")a=t.level.toUpperCase();else if(M==="url")try{const r=t.url||t.pageUrl||"";if(r){const n=new URL(r),j=n.pathname.split("/").filter(Boolean);j.length>=2?a=`${n.origin}/${j.slice(0,2).join("/")}`:a=n.origin}else a="No URL"}catch{const r=t.url||t.pageUrl||"",n=r.match(/https?:\/\/([^\/]+)/);a=n?n[1]:r||"Unknown"}else M==="type"&&(a=(t.type||"console").toUpperCase());s[a]||(s[a]=[]),s[a].push(t)}),s},[X,M]),rt=s=>{const t=new Set(Ae);t.has(s)?t.delete(s):t.add(s),Qe(t)},Ee=s=>{S===s?he(b==="asc"?"desc":"asc"):(Re(s),he("desc"))},Fe=s=>{switch(s){case"error":return e.jsx(qe,{className:"h-4 w-4 text-red-500"});case"warn":return e.jsx(_e,{className:"h-4 w-4 text-yellow-500"});case"info":return e.jsx(He,{className:"h-4 w-4 text-blue-500"});case"network":return e.jsx(xe,{className:"h-4 w-4 text-purple-500"});default:return e.jsx(de,{className:"h-4 w-4 text-gray-500"})}},Me=s=>{const t=new Date(s);return t.toLocaleTimeString()+"."+t.getMilliseconds().toString().padStart(3,"0")},Be=(s,t)=>{if(!t||!s?.timestamp||!t?.timestamp)return null;const a=new Date(s.timestamp).getTime(),r=new Date(t.timestamp).getTime(),n=a-r;return n<1?"<1ms":n<1e3?`${n}ms`:`${(n/1e3).toFixed(2)}s`},Oe=s=>{if(s.type==="network"){const t=s.status||s.statusCode||"Pending",a=s.latency?` (${s.latency}ms)`:"";return`${s.method||"GET"} ${s.url||s.pageUrl||""} - ${t}${a}`}if(s.type==="performance")return`${s.resourceType||"Resource"} - ${s.url||""} (${s.duration?.toFixed(2)}ms, ${(s.transferSize/1024).toFixed(2)}KB)`;if(s.type==="console"||s.type==="error"){const t=s.message||"",a=s.data;if(a&&Array.isArray(a)&&a.length>0){const r=a.map(n=>{if(typeof n=="object")try{return JSON.stringify(n,null,2)}catch{return String(n)}return String(n)}).join(" ");return t?`${t} ${r}`:r}if(typeof t=="object")try{return JSON.stringify(t,null,2)}catch{return String(t)}return String(t||a||"")}return typeof s.message=="object"?JSON.stringify(s.message,null,2):String(s.message||s.data||"")};return e.jsxs("div",{className:"flex min-h-screen bg-slate-50",children:[e.jsx("div",{className:C("border-r border-slate-200 bg-white transition-all duration-300",ze?"w-64":"w-0 overflow-hidden"),children:e.jsxs("div",{className:"flex h-full flex-col p-4",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"NowAssist"}),e.jsx("button",{onClick:()=>se(!1),onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),se(!1))},className:"rounded-lg p-1.5 text-slate-600 transition hover:bg-slate-100 active:scale-95 focus:outline-none",tabIndex:0,"aria-label":"Collapse sidebar",children:e.jsx(xt,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(B,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search features...",value:fe,onChange:s=>Ke(s.target.value),className:"w-full rounded-lg border border-slate-200 bg-white py-2 pl-9 pr-3 text-sm text-slate-900 placeholder:text-slate-400 focus:border-primary focus:outline-none",tabIndex:0})]})}),e.jsx("div",{className:"flex-1 space-y-4 overflow-y-auto",children:Xe.map(s=>{const t=Ye.filter(a=>a.category===s);return t.length===0?null:e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-xs font-semibold uppercase tracking-wide text-slate-500",children:s}),e.jsx("div",{className:"space-y-1",children:t.map(a=>{const r=a.icon,n=a.id==="logs";return e.jsxs("a",{href:a.url,className:C("flex items-center gap-3 rounded-lg px-3 py-2 text-sm transition",n?"bg-slate-100 font-medium text-slate-900":"text-slate-600 hover:bg-slate-50",a.status==="coming-soon"&&"pointer-events-none opacity-60"),tabIndex:a.status==="coming-soon"?-1:0,children:[e.jsx(r,{className:"h-4 w-4"}),e.jsx("span",{className:"flex-1",children:a.name}),a.status==="coming-soon"&&e.jsx("span",{className:"text-xs text-slate-400",children:"Soon"})]},a.id)})})]},s)})})]})}),!ze&&e.jsx("button",{onClick:()=>se(!0),onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),se(!0))},className:"fixed left-0 top-1/2 z-10 -translate-y-1/2 rounded-r-lg border border-slate-200 bg-white p-2 text-slate-600 shadow-lg transition hover:bg-slate-50 active:scale-95 focus:outline-none",tabIndex:0,"aria-label":"Expand sidebar",children:e.jsx(mt,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("div",{className:"w-full max-w-7xl mx-auto",children:[e.jsx("div",{className:"sticky top-0 z-30 bg-white border-b border-slate-200 shadow-sm",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-slate-900",children:"Browser Logs"}),e.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Monitor console logs, errors, and network requests"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>{const s=!Q;pe(s),s&&setTimeout(()=>{Ue()&&(ge.current=!1,Y.current=!0)},100)},className:C("rounded-lg border px-3 py-1.5 text-xs font-medium transition flex items-center gap-1.5",Q?"border-green-300 bg-green-50 text-green-700":"border-slate-200 bg-white text-slate-600 hover:bg-slate-50"),title:Q?"Auto-scroll enabled":"Auto-scroll disabled",children:[e.jsx(Ce,{className:"h-3.5 w-3.5"}),"Auto-scroll"]}),e.jsxs("button",{onClick:st,disabled:l.length===0,className:C("rounded-lg border px-3 py-1.5 text-xs font-medium transition flex items-center gap-1.5",l.length===0?"border-slate-200 bg-slate-50 text-slate-400 cursor-not-allowed":"border-red-200 bg-red-50 text-red-700 hover:bg-red-100"),title:"Clear all logs",children:[e.jsx(ut,{className:"h-3.5 w-3.5"}),"Clear"]})]})]})})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("button",{onClick:()=>Ze(!be),className:"w-full flex items-center justify-between p-2 rounded-lg bg-blue-50 border border-blue-200 hover:bg-blue-100 transition",children:[e.jsxs("p",{className:"text-xs text-blue-800 font-medium flex items-center gap-1.5",children:[e.jsx(He,{className:"h-3.5 w-3.5"}),"How Log Capture Works"]}),be?e.jsx(me,{className:"h-4 w-4 text-blue-600"}):e.jsx(_,{className:"h-4 w-4 text-blue-600"})]}),be&&e.jsx("div",{className:"mt-2 p-3 rounded-lg bg-blue-50 border border-blue-200",children:e.jsxs("ol",{className:"text-xs text-blue-700 space-y-1 list-decimal list-inside ml-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Content Script"})," runs inside each webpage tab"]}),e.jsxs("li",{children:["It intercepts ",e.jsx("code",{className:"bg-blue-100 px-1 rounded text-blue-900",children:"console.log"}),", errors, ",e.jsx("code",{className:"bg-blue-100 px-1 rounded text-blue-900",children:"fetch"}),", and network requests"]}),e.jsxs("li",{children:["Logs are sent from the tab â†’ ",e.jsx("strong",{children:"Background Service Worker"})," â†’ stored per tab"]}),e.jsx("li",{children:"This viewer displays logs in real-time"}),e.jsx("li",{children:e.jsx("strong",{children:'Select tabs and click "Start Capture" to begin logging'})})]})})]}),l.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h2",{className:"text-sm font-semibold text-slate-700",children:"Log Statistics"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:ve,className:"rounded-lg border border-slate-200 bg-white px-3 py-1.5 text-xs font-medium text-slate-600 hover:bg-slate-50 transition flex items-center gap-1.5",title:"Refresh logs",children:[e.jsx(ht,{className:"h-3.5 w-3.5"}),"Refresh"]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>K(!Ie),className:"rounded-lg border border-slate-200 bg-white px-3 py-1.5 text-xs font-medium text-slate-600 hover:bg-slate-50 transition flex items-center gap-1.5",title:"Export logs",children:[e.jsx(oe,{className:"h-3.5 w-3.5"}),"Export",e.jsx(_,{className:"h-3 w-3"})]}),Ie&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>K(!1)}),e.jsxs("div",{className:"absolute right-0 top-full mt-1 w-40 bg-white border border-slate-200 rounded-lg shadow-lg z-50 py-1",children:[e.jsxs("button",{onClick:()=>{Ne("json"),K(!1)},className:"w-full text-left px-3 py-2 text-xs text-slate-700 hover:bg-slate-50 transition flex items-center gap-2",children:[e.jsx(oe,{className:"h-3.5 w-3.5"}),"Export as JSON"]}),e.jsxs("button",{onClick:()=>{Ne("csv"),K(!1)},className:"w-full text-left px-3 py-2 text-xs text-slate-700 hover:bg-slate-50 transition flex items-center gap-2",children:[e.jsx(oe,{className:"h-3.5 w-3.5"}),"Export as CSV"]}),e.jsxs("button",{onClick:()=>{Ne("har"),K(!1)},className:"w-full text-left px-3 py-2 text-xs text-slate-700 hover:bg-slate-50 transition flex items-center gap-2",children:[e.jsx(oe,{className:"h-3.5 w-3.5"}),"Export as HAR"]})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-2",children:[e.jsxs("button",{onClick:()=>{g("all"),L("all")},className:"rounded-lg border border-slate-200 bg-white p-3 text-left hover:bg-slate-50 transition cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ce,{className:"h-4 w-4 text-slate-500"}),e.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Total"})]}),e.jsx("div",{className:"text-lg font-bold text-slate-900",children:R.total})]}),e.jsxs("button",{onClick:()=>{g("error"),L("all")},className:"rounded-lg border border-red-200 bg-red-50 p-3 text-left hover:bg-red-100 transition cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(qe,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-xs font-medium text-red-700",children:"Errors"})]}),e.jsx("div",{className:"text-lg font-bold text-red-700",children:R.errors})]}),e.jsxs("button",{onClick:()=>{g("warn"),L("all")},className:"rounded-lg border border-yellow-200 bg-yellow-50 p-3 text-left hover:bg-yellow-100 transition cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(_e,{className:"h-4 w-4 text-yellow-600"}),e.jsx("span",{className:"text-xs font-medium text-yellow-700",children:"Warnings"})]}),e.jsx("div",{className:"text-lg font-bold text-yellow-700",children:R.warnings})]}),e.jsxs("button",{onClick:()=>{g("all"),L("network")},className:"rounded-lg border border-blue-200 bg-blue-50 p-3 text-left hover:bg-blue-100 transition cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(xe,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-xs font-medium text-blue-700",children:"Network"})]}),e.jsx("div",{className:"text-lg font-bold text-blue-700",children:R.network})]}),e.jsxs("button",{onClick:()=>{g("all"),L("console")},className:"rounded-lg border border-purple-200 bg-purple-50 p-3 text-left hover:bg-purple-100 transition cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(de,{className:"h-4 w-4 text-purple-600"}),e.jsx("span",{className:"text-xs font-medium text-purple-700",children:"Console"})]}),e.jsx("div",{className:"text-lg font-bold text-purple-700",children:R.console})]}),e.jsxs("button",{onClick:()=>{g("all"),L("network"),J("failed")},className:"rounded-lg border border-orange-200 bg-orange-50 p-3 text-left hover:bg-orange-100 transition cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(w,{className:"h-4 w-4 text-orange-600"}),e.jsx("span",{className:"text-xs font-medium text-orange-700",children:"Failed"})]}),e.jsx("div",{className:"text-lg font-bold text-orange-700",children:R.failedRequests})]}),R.avgLatency>0&&e.jsxs("div",{className:"rounded-lg border border-indigo-200 bg-indigo-50 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(St,{className:"h-4 w-4 text-indigo-600"}),e.jsx("span",{className:"text-xs font-medium text-indigo-700",children:"Avg Latency"})]}),e.jsxs("div",{className:"text-lg font-bold text-indigo-700",children:[R.avgLatency,"ms"]})]}),R.totalSize>0&&e.jsxs("div",{className:"rounded-lg border border-teal-200 bg-teal-50 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(We,{className:"h-4 w-4 text-teal-600"}),e.jsx("span",{className:"text-xs font-medium text-teal-700",children:"Data"})]}),e.jsxs("div",{className:"text-lg font-bold text-teal-700",children:[(R.totalSize/1024).toFixed(1),"KB"]})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-semibold text-slate-900 block",children:x||d.size>0?`Selected Tab${d.size>1?"s":""} (${d.size||(x?1:0)})`:"Select Tab to Monitor"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:x||d.size>0?`${je?"âœ“ Capturing logs from":"Ready to capture"} ${d.size||(x?1:0)} tab(s). ${je?"":'Click "Start Capture" to begin logging.'}`:"Search and select tabs to monitor. Scripts are auto-injected but logging is inactive until you activate it."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>E(!p),className:"rounded-lg border-2 border-slate-300 bg-white px-3 py-1.5 text-xs font-medium text-slate-700 hover:bg-slate-50 transition flex items-center gap-1.5 shadow-sm",title:"Search and add tabs",children:[e.jsx(B,{className:"h-3.5 w-3.5"}),x||d.size>0?"Add/Change Tab":"Search Tabs"]}),p&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-96 bg-white border-2 border-slate-200 rounded-lg shadow-xl z-50 max-h-[500px] flex flex-col",children:[e.jsx("div",{className:"p-3 border-b border-slate-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(B,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search tabs by title or URL...",value:U,onChange:s=>ee(s.target.value),onFocus:()=>E(!0),className:"w-full rounded-lg border border-slate-200 bg-white pl-9 pr-9 py-2 text-sm text-slate-900 placeholder:text-slate-400 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",autoFocus:!0}),U&&e.jsx("button",{onClick:()=>ee(""),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 rounded hover:bg-slate-100 text-slate-400 hover:text-slate-600",title:"Clear search",children:e.jsx(w,{className:"h-3.5 w-3.5"})})]})}),e.jsx("div",{className:"overflow-y-auto flex-1 p-2",children:(()=>{const s=U?y.filter(t=>{const a=U.toLowerCase();return(t.title||"").toLowerCase().includes(a)||(t.url||"").toLowerCase().includes(a)||(t.displayName||"").toLowerCase().includes(a)}):y.slice(0,20);return s.length===0?e.jsxs("div",{className:"text-center py-8 text-sm text-slate-500",children:[e.jsx(B,{className:"h-6 w-6 mx-auto mb-2 text-slate-400"}),e.jsx("p",{children:"No tabs found"}),e.jsx("p",{className:"text-xs mt-1",children:"Try a different search term"})]}):e.jsx("div",{className:"space-y-1",children:s.map(t=>{const a=d.has(t.id)||x===t.id;return e.jsxs("button",{onClick:()=>{if(a){const r=new Set(d);r.delete(t.id),N(r),x===t.id&&v(null),r.size===0?($([]),I([])):H()}else{const r=new Set(d);r.add(t.id),N(r),v(t.id),q(t.id)}},className:C("w-full text-left px-3 py-2 rounded-lg transition flex items-center gap-2 group",a?"bg-primary/10 border-2 border-primary":"hover:bg-slate-50 border-2 border-transparent"),children:[a?e.jsx(jt,{className:"h-4 w-4 text-primary flex-shrink-0"}):e.jsx(vt,{className:"h-4 w-4 text-slate-400 group-hover:text-slate-600 flex-shrink-0"}),t.active&&e.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-slate-900 truncate",children:t.title||t.displayName||`Tab ${t.id}`}),e.jsx("div",{className:"text-xs text-slate-500 truncate",children:t.url}),t.hasLogs&&e.jsxs("div",{className:"text-xs text-slate-600 mt-0.5",children:[t.logCount||0," log",t.logCount!==1?"s":""]})]})]},t.id)})})})()}),!U&&y.length>20&&e.jsx("div",{className:"px-3 py-2 border-t border-slate-200 text-xs text-slate-500 text-center",children:"Showing first 20 tabs. Search to find more."})]})]}),je?e.jsxs("button",{onClick:tt,className:"rounded-lg border-2 border-red-300 bg-red-50 px-3 py-1.5 text-xs font-semibold text-red-700 hover:bg-red-100 transition flex items-center gap-1.5 shadow-sm",title:"Stop capturing logs",children:[e.jsx(w,{className:"h-3.5 w-3.5"}),"Stop Capture"]}):e.jsxs("button",{onClick:et,disabled:d.size===0&&!x,className:C("rounded-lg border-2 px-3 py-1.5 text-xs font-semibold transition flex items-center gap-1.5 shadow-sm",d.size===0&&!x?"border-slate-200 bg-slate-100 text-slate-400 cursor-not-allowed":"border-green-400 bg-green-500 text-white hover:bg-green-600"),title:"Start capturing logs from selected tabs",children:[e.jsx(ce,{className:"h-3.5 w-3.5"}),"Start Capture"]})]})]}),p&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>E(!1)}),ne&&e.jsx("div",{className:C("mb-3 px-3 py-2 rounded-lg text-xs",ne.startsWith("âœ“")?"bg-green-50 text-green-700 border border-green-200":ne.startsWith("âœ—")?"bg-red-50 text-red-700 border border-red-200":"bg-blue-50 text-blue-700 border border-blue-200"),children:ne}),x||d.size>0?e.jsx("div",{className:"space-y-2",children:(d.size>0?Array.from(d).map(t=>y.find(a=>a.id===t)).filter(Boolean):x?[y.find(t=>t.id===x)].filter(Boolean):[]).map(t=>e.jsxs("div",{className:"rounded-lg border-2 border-primary/20 bg-primary/5 p-3 flex items-center justify-between group",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[t.active&&e.jsx("div",{className:"h-2.5 w-2.5 rounded-full bg-green-500 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-semibold text-slate-900 text-sm truncate",children:t.title||t.displayName||`Tab ${t.id}`}),e.jsx("div",{className:"text-xs text-slate-500 truncate mt-0.5",children:t.url}),t.hasLogs&&e.jsxs("div",{className:"text-xs text-slate-600 mt-1 font-medium",children:[t.logCount||0," log",t.logCount!==1?"s":""," captured"]})]})]}),e.jsx("button",{onClick:()=>{const a=new Set(d);a.delete(t.id),N(a),x===t.id&&v(a.size>0?Array.from(a)[0]:null),a.size===0?($([]),I([])):H()},className:"ml-3 p-1.5 rounded-lg hover:bg-red-50 text-slate-400 hover:text-red-600 transition flex-shrink-0 opacity-0 group-hover:opacity-100",title:"Remove tab",children:e.jsx(w,{className:"h-4 w-4"})})]},t.id))}):e.jsxs("div",{className:"text-sm text-slate-500 py-8 text-center border-2 border-dashed border-slate-200 rounded-lg bg-slate-50",children:[e.jsx(B,{className:"h-6 w-6 mx-auto mb-2 text-slate-400"}),e.jsx("p",{className:"font-medium",children:"No tabs selected"}),e.jsx("p",{className:"text-xs mt-1",children:'Click "Search Tabs" above to find and select tabs to monitor'})]})]}),e.jsxs("div",{className:"mb-4 space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(B,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search logs by message, URL, or method...",value:z,onChange:s=>V(s.target.value),className:"w-full rounded-xl border-2 border-slate-200 bg-white pl-12 pr-4 py-3 text-sm text-slate-900 placeholder:text-slate-400 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20"}),z&&e.jsx("button",{onClick:()=>V(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 rounded-full hover:bg-slate-100 text-slate-400 hover:text-slate-600",title:"Clear search",children:e.jsx(w,{className:"h-4 w-4"})})]}),(k!=="all"||f!=="all"||T!=="all"||F!=="all"||A||z)&&e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-xs font-semibold text-slate-600",children:"Active Filters:"}),k!=="all"&&e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-red-100 text-red-700 text-xs font-medium",children:["Level: ",k,e.jsx("button",{onClick:()=>g("all"),className:"hover:text-red-900",children:e.jsx(w,{className:"h-3 w-3"})})]}),f!=="all"&&e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-blue-100 text-blue-700 text-xs font-medium",children:["Type: ",f,e.jsx("button",{onClick:()=>L("all"),className:"hover:text-blue-900",children:e.jsx(w,{className:"h-3 w-3"})})]}),T!=="all"&&e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-orange-100 text-orange-700 text-xs font-medium",children:["Status: ",T,e.jsx("button",{onClick:()=>J("all"),className:"hover:text-orange-900",children:e.jsx(w,{className:"h-3 w-3"})})]}),F!=="all"&&e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-purple-100 text-purple-700 text-xs font-medium",children:["Resource: ",F,e.jsx("button",{onClick:()=>te("all"),className:"hover:text-purple-900",children:e.jsx(w,{className:"h-3 w-3"})})]}),A&&e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-indigo-100 text-indigo-700 text-xs font-medium",children:["Domain: ",A,e.jsx("button",{onClick:()=>P(""),className:"hover:text-indigo-900",children:e.jsx(w,{className:"h-3 w-3"})})]}),z&&e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-slate-100 text-slate-700 text-xs font-medium",children:['Search: "',z.substring(0,20),z.length>20?"...":"",'"',e.jsx("button",{onClick:()=>V(""),className:"hover:text-slate-900",children:e.jsx(w,{className:"h-3 w-3"})})]}),e.jsx("button",{onClick:()=>{g("all"),L("all"),J("all"),te("all"),P(""),V("")},className:"text-xs font-medium text-slate-600 hover:text-slate-900 underline",children:"Clear All"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-xs font-semibold text-slate-700 flex items-center gap-1.5",children:[e.jsx($e,{className:"h-3.5 w-3.5"}),"Level"]}),e.jsx(W,{value:k,onChange:g,options:[{value:"all",label:"All Levels"},{value:"error",label:"ðŸ”´ Errors"},{value:"warn",label:"ðŸŸ¡ Warnings"},{value:"info",label:"ðŸ”µ Info"},{value:"debug",label:"âšª Debug"}],placeholder:"All Levels"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-xs font-semibold text-slate-700 flex items-center gap-1.5",children:[e.jsx(de,{className:"h-3.5 w-3.5"}),"Type"]}),e.jsx(W,{value:f,onChange:L,options:[{value:"all",label:"All Types"},{value:"console",label:"ðŸ“ Console"},{value:"network",label:"ðŸŒ Network"},{value:"error",label:"âŒ Errors"},{value:"performance",label:"âš¡ Performance"}],placeholder:"All Types"})]}),(f==="network"||f==="all")&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-xs font-semibold text-slate-700 flex items-center gap-1.5",children:[e.jsx(ce,{className:"h-3.5 w-3.5"}),"HTTP Status"]}),e.jsx(W,{value:T,onChange:J,options:[{value:"all",label:"All Status"},{value:"2xx",label:"âœ… 2xx Success"},{value:"4xx",label:"âš ï¸ 4xx Client Error"},{value:"5xx",label:"âŒ 5xx Server Error"},{value:"failed",label:"ðŸ”´ Failed/Pending"}],placeholder:"All Status"})]}),(f==="all"||f==="network")&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-xs font-semibold text-slate-700 flex items-center gap-1.5",children:[e.jsx(xe,{className:"h-3.5 w-3.5"}),"Resources"]}),e.jsx(W,{value:F,onChange:te,options:[{value:"all",label:"All Resources"},{value:"api",label:"ðŸ”Œ API Only (Hide Static)"},{value:"static",label:"ðŸ“¦ Static Only"}],placeholder:"All Resources"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-xs font-semibold text-slate-700 flex items-center gap-1.5",children:[e.jsx(B,{className:"h-3.5 w-3.5"}),"Domain/URL"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"e.g., api.example.com",value:A,onChange:s=>P(s.target.value),className:"w-full rounded-lg border-2 border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 placeholder:text-slate-400 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20"}),A&&e.jsx("button",{onClick:()=>P(""),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 rounded hover:bg-slate-100 text-slate-400 hover:text-slate-600",title:"Clear domain filter",children:e.jsx(w,{className:"h-3.5 w-3.5"})})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-xs font-semibold text-slate-700 flex items-center gap-1.5",children:[e.jsx(We,{className:"h-3.5 w-3.5"}),"Group By"]}),e.jsx(W,{value:M,onChange:Ve,options:[{value:"none",label:"No Grouping"},{value:"level",label:"By Level"},{value:"type",label:"By Type"},{value:"url",label:"By URL Pattern"}],placeholder:"No Grouping"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-xs font-semibold text-slate-700 flex items-center gap-1.5",children:[e.jsx(_,{className:"h-3.5 w-3.5"}),"Sort"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{value:S,onChange:Re,options:[{value:"timestamp",label:"By Time"},{value:"level",label:"By Level"}],placeholder:"By Time",className:"flex-1"}),e.jsx("button",{onClick:()=>he(b==="asc"?"desc":"asc"),className:"rounded-lg border-2 border-slate-200 bg-white px-3 py-2 text-sm text-slate-600 hover:bg-slate-50 transition",title:`Sort ${b==="asc"?"Descending":"Ascending"}`,children:b==="asc"?e.jsx(me,{className:"h-4 w-4"}):e.jsx(_,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-xs font-semibold text-slate-700 flex items-center gap-1.5",children:[e.jsx(Ce,{className:"h-3.5 w-3.5"}),"Time Deltas"]}),e.jsxs("button",{onClick:()=>Ge(!G),className:C("w-full rounded-lg border-2 px-3 py-2 text-sm font-medium transition flex items-center justify-center gap-1.5",G?"border-green-300 bg-green-50 text-green-700":"border-slate-200 bg-white text-slate-600 hover:bg-slate-50"),title:"Show time deltas between logs",children:[e.jsx(Ce,{className:"h-4 w-4"}),G?"ON":"OFF"]})]})]})]}),e.jsx("div",{className:"rounded-xl border-2 border-slate-200 bg-white shadow-sm overflow-hidden w-full",children:e.jsxs("div",{ref:re,className:"max-h-[calc(100vh-300px)] overflow-x-auto overflow-y-auto",children:[Object.entries(at).map(([s,t])=>{if(M!=="none"){const a=Ae.has(s);return e.jsxs("div",{className:"border-b border-slate-200 last:border-b-0",children:[e.jsxs("button",{onClick:()=>rt(s),className:"w-full px-4 py-3 flex items-center justify-between bg-slate-50 hover:bg-slate-100 transition",children:[e.jsxs("span",{className:"font-semibold text-slate-900",children:[s," (",t.length,")"]}),a?e.jsx(me,{className:"h-4 w-4"}):e.jsx(_,{className:"h-4 w-4"})]}),a&&e.jsx(Pe,{logs:t,showTimeDeltas:G,calculateTimeDelta:Be,sortBy:S,sortOrder:b,handleSort:Ee,getLevelIcon:Fe,formatTimestamp:Me,formatMessage:Oe,allLogs:l})]},s)}return e.jsx(Pe,{logs:t,showTimeDeltas:G,calculateTimeDelta:Be,sortBy:S,sortOrder:b,handleSort:Ee,getLevelIcon:Fe,formatTimestamp:Me,formatMessage:Oe,allLogs:X},s)}),X.length===0&&e.jsx("div",{className:"p-12 text-center",children:e.jsx("div",{className:"max-w-md mx-auto",children:l.length===0?e.jsxs(e.Fragment,{children:[e.jsx(de,{className:"h-16 w-16 mx-auto mb-4 text-slate-300"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"No Logs Captured Yet"}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:'Select a tab and click "Start Capture" to begin logging console messages, network requests, and errors.'}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-slate-400",children:[e.jsx(ce,{className:"h-4 w-4"}),e.jsx("span",{children:"Logs will appear here once capture is started"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx($e,{className:"h-16 w-16 mx-auto mb-4 text-slate-300"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"No Logs Match Your Filters"}),e.jsxs("p",{className:"text-sm text-slate-500 mb-4",children:["We have ",e.jsx("span",{className:"font-semibold text-slate-700",children:l.length})," log",l.length!==1?"s":""," total, but none match your current filter settings."]}),e.jsx("button",{onClick:()=>{g("all"),L("all"),J("all"),te("all"),P(""),V("")},className:"px-4 py-2 bg-primary text-white rounded-lg text-sm font-medium hover:bg-primary/90 transition",children:"Clear All Filters"})]})})}),e.jsx("div",{ref:ae})]})})]})]})})]})},Pe=({logs:l,showTimeDeltas:I,calculateTimeDelta:ue,sortBy:ke,sortOrder:h,handleSort:$,getLevelIcon:x,formatTimestamp:v,formatMessage:d,allLogs:N})=>{const[U,ee]=o.useState(new Set),Le=i=>{const p=new Set(U);p.has(i)?p.delete(i):p.add(i),ee(p)},Te=i=>!i||i==="pending"||i==="failed"?"bg-gray-500":i>=200&&i<300?"bg-green-500":i>=300&&i<400?"bg-blue-500":i>=400&&i<500?"bg-orange-500":i>=500?"bg-red-500":"bg-gray-500",y=({column:i,children:p,className:E=""})=>e.jsx("th",{onClick:()=>$(i),className:C("px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider cursor-pointer hover:bg-slate-100 transition select-none sticky top-0 bg-white z-10",E),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:p}),ke===i&&(h==="asc"?e.jsx(me,{className:"h-3 w-3"}):e.jsx(_,{className:"h-3 w-3"}))]})});return e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-slate-300 bg-slate-50",children:[e.jsx(y,{column:"timestamp",className:"w-[140px]",children:"Time"}),e.jsx(y,{column:"level",className:"w-[120px]",children:"Level"}),e.jsx(y,{column:"status",className:"w-[100px]",children:"Status"}),e.jsx(y,{column:"method",className:"w-[100px]",children:"Method"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider sticky top-0 bg-slate-50 z-10",children:"URL / Message"}),e.jsx(y,{column:"latency",className:"w-[100px]",children:"Latency"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider sticky top-0 bg-slate-50 z-10 w-[100px]",children:"Size"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider sticky top-0 bg-slate-50 z-10 w-[80px]",children:"Actions"})]})}),e.jsx("tbody",{children:l.map((i,p)=>{const E=p>0?l[p-1]:null,k=I?ue(i,E):null,g=U.has(i.id||p);return e.jsxs(ot.Fragment,{children:[e.jsxs("tr",{className:C("border-b border-slate-100 hover:bg-slate-50 transition",i.level==="error"&&"bg-red-50/30",i.type==="network"&&(i.status>=400||i.status==="failed")&&"bg-orange-50/30"),children:[e.jsx("td",{className:"px-4 py-2 text-xs font-mono text-slate-600",children:e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("span",{children:v(i.timestamp)}),k&&e.jsxs("span",{className:"text-[10px] text-slate-400",title:"Time since previous log",children:["+",k]})]})}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[x(i.level),e.jsx("span",{className:"text-xs font-semibold uppercase",children:i.level})]})}),e.jsx("td",{className:"px-4 py-2",children:i.type==="network"&&i.status?e.jsx("span",{className:C("inline-block px-2 py-0.5 rounded text-xs font-semibold text-white",Te(i.status)),children:i.status}):e.jsx("span",{className:"text-xs text-slate-400",children:"â€”"})}),e.jsx("td",{className:"px-4 py-2",children:i.type==="network"&&i.method?e.jsx("span",{className:"text-xs font-mono font-semibold text-slate-700",children:i.method}):e.jsx("span",{className:"text-xs text-slate-400",children:"â€”"})}),e.jsx("td",{className:"px-4 py-2 max-w-md",children:e.jsx("div",{className:"text-xs break-words font-mono",children:i.type==="network"?e.jsx("span",{className:"text-slate-700 truncate block",title:i.url||i.pageUrl||"",children:i.url||i.pageUrl||"â€”"}):e.jsx("span",{className:"text-slate-700 line-clamp-2",title:d(i),children:d(i)})})}),e.jsx("td",{className:"px-4 py-2",children:i.type==="network"&&i.latency!==void 0?e.jsxs("span",{className:"text-xs font-mono text-slate-600",children:[i.latency,"ms"]}):e.jsx("span",{className:"text-xs text-slate-400",children:"â€”"})}),e.jsx("td",{className:"px-4 py-2",children:i.type==="network"&&i.responseSize!==void 0?e.jsxs("span",{className:"text-xs font-mono text-slate-600",children:[(i.responseSize/1024).toFixed(1),"KB"]}):e.jsx("span",{className:"text-xs text-slate-400",children:"â€”"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("button",{onClick:()=>Le(i.id||p),className:"text-xs text-slate-500 hover:text-slate-700 font-medium",children:g?"Less":"More"})})]}),g&&e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-3 bg-slate-50 border-b border-slate-200",children:e.jsx(kt,{log:i,formatMessage:d,allLogs:N})})})]},i.id||p)})})]})},kt=({log:l,formatMessage:I,allLogs:ue})=>e.jsxs("div",{className:"text-xs text-slate-600 space-y-2",children:[l.url&&l.url!==l.pageUrl&&e.jsxs("div",{children:[e.jsx("strong",{children:"Request URL:"})," ",l.url]}),l.method&&e.jsxs("div",{children:[e.jsx("strong",{children:"Method:"})," ",l.method]}),l.status&&e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",l.status," ",l.statusText||""]}),l.latency!==void 0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Latency:"})," ",l.latency,"ms"]}),l.responseSize!==void 0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Response Size:"})," ",(l.responseSize/1024).toFixed(2),"KB"]}),l.stack&&e.jsxs("div",{children:[e.jsx("strong",{children:"Stack:"})," ",e.jsx("pre",{className:"whitespace-pre-wrap text-[10px] bg-white p-2 rounded border",children:l.stack})]}),l.filename&&e.jsxs("div",{children:[e.jsx("strong",{children:"File:"})," ",l.filename,":",l.lineno,":",l.colno]}),l.requestHeaders&&e.jsxs("div",{children:[e.jsx("strong",{children:"Request Headers:"})," ",e.jsx("pre",{className:"whitespace-pre-wrap text-[10px] bg-white p-2 rounded border max-h-40 overflow-auto",children:JSON.stringify(l.requestHeaders,null,2)})]}),l.responseHeaders&&e.jsxs("div",{children:[e.jsx("strong",{children:"Response Headers:"})," ",e.jsx("pre",{className:"whitespace-pre-wrap text-[10px] bg-white p-2 rounded border max-h-40 overflow-auto",children:JSON.stringify(l.responseHeaders,null,2)})]}),l.responseBody&&e.jsxs("div",{children:[e.jsx("strong",{children:"Response Body:"}),e.jsx("pre",{className:"whitespace-pre-wrap text-[10px] bg-white p-2 rounded border max-h-60 overflow-auto",children:typeof l.responseBody=="string"?l.responseBody:JSON.stringify(l.responseBody,null,2)})]}),!l.responseBody&&l.responseData&&e.jsxs("div",{children:[e.jsx("strong",{children:"Response Data:"}),e.jsx("pre",{className:"whitespace-pre-wrap text-[10px] bg-white p-2 rounded border max-h-60 overflow-auto",children:typeof l.responseData=="string"?l.responseData:JSON.stringify(l.responseData,null,2)})]}),!l.responseBody&&!l.responseData&&l.type==="network"&&e.jsx("div",{className:"text-slate-400 italic text-[10px]",children:"Response body not captured (may be too large or capture failed)"}),l.data&&typeof l.data=="object"&&e.jsxs("div",{children:[e.jsx("strong",{children:"Data:"})," ",e.jsx("pre",{className:"whitespace-pre-wrap text-[10px] bg-white p-2 rounded border max-h-60 overflow-auto",children:JSON.stringify(l.data,null,2)})]}),l.data&&typeof l.data!="object"&&l.data&&e.jsxs("div",{children:[e.jsx("strong",{children:"Data:"})," ",e.jsx("span",{className:"font-mono text-[10px]",children:String(l.data)})]}),l.resourceType&&e.jsxs("div",{children:[e.jsx("strong",{children:"Resource Type:"})," ",l.resourceType]}),l.duration!==void 0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Duration:"})," ",l.duration.toFixed(2),"ms"]}),l.transferSize!==void 0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Transfer Size:"})," ",(l.transferSize/1024).toFixed(2),"KB"]})]});it.createRoot(document.getElementById("root")).render(e.jsx(Ct,{}));
//# sourceMappingURL=logs-DsbsFAz3.js.map
