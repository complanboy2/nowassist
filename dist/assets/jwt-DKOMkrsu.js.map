{"version":3,"file":"jwt-DKOMkrsu.js","sources":["../../node_modules/lucide-react/dist/esm/icons/table.js","../../node_modules/jwt-decode/build/esm/index.js","../../src/utils/jwtSecurity.js","../../src/utils/jwks.js","../../src/utils/jwtRedaction.js","../../src/utils/jwtComparison.js","../../src/jwt.jsx"],"sourcesContent":["/**\n * @license lucide-react v0.554.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 3v18\", key: \"108xh3\" }],\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", key: \"afitv7\" }],\n  [\"path\", { d: \"M3 9h18\", key: \"1pudct\" }],\n  [\"path\", { d: \"M3 15h18\", key: \"5xshup\" }]\n];\nconst Table = createLucideIcon(\"table\", __iconNode);\n\nexport { __iconNode, Table as default };\n//# sourceMappingURL=table.js.map\n","export class InvalidTokenError extends Error {\n}\nInvalidTokenError.prototype.name = \"InvalidTokenError\";\nfunction b64DecodeUnicode(str) {\n    return decodeURIComponent(atob(str).replace(/(.)/g, (m, p) => {\n        let code = p.charCodeAt(0).toString(16).toUpperCase();\n        if (code.length < 2) {\n            code = \"0\" + code;\n        }\n        return \"%\" + code;\n    }));\n}\nfunction base64UrlDecode(str) {\n    let output = str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    switch (output.length % 4) {\n        case 0:\n            break;\n        case 2:\n            output += \"==\";\n            break;\n        case 3:\n            output += \"=\";\n            break;\n        default:\n            throw new Error(\"base64 string is not of the correct length\");\n    }\n    try {\n        return b64DecodeUnicode(output);\n    }\n    catch (err) {\n        return atob(output);\n    }\n}\nexport function jwtDecode(token, options) {\n    if (typeof token !== \"string\") {\n        throw new InvalidTokenError(\"Invalid token specified: must be a string\");\n    }\n    options || (options = {});\n    const pos = options.header === true ? 0 : 1;\n    const part = token.split(\".\")[pos];\n    if (typeof part !== \"string\") {\n        throw new InvalidTokenError(`Invalid token specified: missing part #${pos + 1}`);\n    }\n    let decoded;\n    try {\n        decoded = base64UrlDecode(part);\n    }\n    catch (e) {\n        throw new InvalidTokenError(`Invalid token specified: invalid base64 for part #${pos + 1} (${e.message})`);\n    }\n    try {\n        return JSON.parse(decoded);\n    }\n    catch (e) {\n        throw new InvalidTokenError(`Invalid token specified: invalid json for part #${pos + 1} (${e.message})`);\n    }\n}\n","/**\n * JWT Security Validation & Linting Utilities\n * Comprehensive security analysis for JWT tokens\n */\n\nexport const SECURITY_SEVERITY = {\n  CRITICAL: 'critical',\n  HIGH: 'high',\n  MEDIUM: 'medium',\n  LOW: 'low',\n  INFO: 'info',\n};\n\nexport const CLAIM_INFO = {\n  // Standard JWT Claims\n  iss: {\n    name: 'Issuer',\n    description: 'Identifies the principal that issued the JWT',\n    required: false,\n    category: 'Standard',\n  },\n  sub: {\n    name: 'Subject',\n    description: 'Identifies the subject of the JWT (usually the user)',\n    required: false,\n    category: 'Standard',\n  },\n  aud: {\n    name: 'Audience',\n    description: 'Identifies the recipients that the JWT is intended for. Should always be present in production tokens.',\n    required: false,\n    recommended: true,\n    category: 'Standard',\n  },\n  exp: {\n    name: 'Expiration Time',\n    description: 'Identifies the expiration time on or after which the JWT must not be accepted for processing',\n    required: false,\n    recommended: true,\n    category: 'Standard',\n  },\n  nbf: {\n    name: 'Not Before',\n    description: 'Identifies the time before which the JWT must not be accepted for processing',\n    required: false,\n    category: 'Standard',\n  },\n  iat: {\n    name: 'Issued At',\n    description: 'Identifies the time at which the JWT was issued',\n    required: false,\n    recommended: true,\n    category: 'Standard',\n  },\n  jti: {\n    name: 'JWT ID',\n    description: 'Provides a unique identifier for the JWT. Can be used to prevent token replay attacks.',\n    required: false,\n    category: 'Standard',\n  },\n  \n  // Common custom claims\n  email: {\n    name: 'Email',\n    description: 'User email address',\n    required: false,\n    category: 'Custom',\n  },\n  name: {\n    name: 'Name',\n    description: 'User full name',\n    required: false,\n    category: 'Custom',\n  },\n  scope: {\n    name: 'Scope',\n    description: 'OAuth 2.0 scope values',\n    required: false,\n    category: 'OAuth',\n  },\n  \n  // ServiceNow claims\n  sys_id: {\n    name: 'ServiceNow Sys ID',\n    description: 'ServiceNow system record identifier',\n    required: false,\n    category: 'ServiceNow',\n  },\n  user_name: {\n    name: 'ServiceNow Username',\n    description: 'ServiceNow user name',\n    required: false,\n    category: 'ServiceNow',\n  },\n  instance: {\n    name: 'ServiceNow Instance',\n    description: 'ServiceNow instance identifier',\n    required: false,\n    category: 'ServiceNow',\n  },\n  \n  // Salesforce claims\n  organization_id: {\n    name: 'Salesforce Organization ID',\n    description: 'Salesforce organization identifier',\n    required: false,\n    category: 'Salesforce',\n  },\n  user_id: {\n    name: 'Salesforce User ID',\n    description: 'Salesforce user identifier',\n    required: false,\n    category: 'Salesforce',\n  },\n};\n\n/**\n * Comprehensive security validation for JWT tokens\n */\nexport const validateJWT = (header, payload, signature, currentTime = Date.now()) => {\n  const issues = [];\n  \n  if (!header) {\n    issues.push({\n      severity: SECURITY_SEVERITY.CRITICAL,\n      code: 'MISSING_HEADER',\n      title: 'Missing Header',\n      message: 'JWT header is missing or invalid',\n      recommendation: 'Ensure the token has a valid header segment',\n    });\n    return { issues, riskScore: 100 };\n  }\n  \n  if (!payload) {\n    issues.push({\n      severity: SECURITY_SEVERITY.CRITICAL,\n      code: 'MISSING_PAYLOAD',\n      title: 'Missing Payload',\n      message: 'JWT payload is missing or invalid',\n      recommendation: 'Ensure the token has a valid payload segment',\n    });\n    return { issues, riskScore: 100 };\n  }\n  \n  const alg = header.alg;\n  \n  // Critical: None algorithm\n  if (alg === 'none' || alg === 'None' || alg === 'NONE') {\n    issues.push({\n      severity: SECURITY_SEVERITY.CRITICAL,\n      code: 'NONE_ALGORITHM',\n      title: 'None Algorithm Detected',\n      message: 'Token uses the \"none\" algorithm, which provides no security',\n      recommendation: 'Never use the \"none\" algorithm in production. Use HS256, RS256, or ES256.',\n      riskScore: 100,\n    });\n  }\n  \n  // High: Missing signature\n  if (!signature || signature.length === 0) {\n    issues.push({\n      severity: SECURITY_SEVERITY.HIGH,\n      code: 'MISSING_SIGNATURE',\n      title: 'Missing Signature',\n      message: 'Token has no signature (unsigned token)',\n      recommendation: 'Always sign tokens in production to ensure integrity and authenticity',\n      riskScore: 80,\n    });\n  }\n  \n  // High: Missing expiration\n  if (!payload.exp) {\n    issues.push({\n      severity: SECURITY_SEVERITY.HIGH,\n      code: 'MISSING_EXP',\n      title: 'Missing Expiration Claim',\n      message: 'Token has no expiration time (exp claim)',\n      recommendation: 'Always include an expiration time to limit token lifetime and reduce risk if compromised',\n      riskScore: 70,\n    });\n  } else {\n    // Check if expired\n    const expMs = payload.exp * 1000;\n    if (expMs < currentTime) {\n      const deltaDays = Math.floor((currentTime - expMs) / (1000 * 60 * 60 * 24));\n      issues.push({\n        severity: SECURITY_SEVERITY.HIGH,\n        code: 'EXPIRED_TOKEN',\n        title: 'Token Expired',\n        message: `Token expired ${deltaDays > 0 ? `${deltaDays} day(s)` : 'recently'} ago`,\n        recommendation: 'Do not accept expired tokens. Request a new token from the identity provider',\n        riskScore: 60,\n      });\n    }\n  }\n  \n  // High: Missing audience\n  if (!payload.aud) {\n    issues.push({\n      severity: SECURITY_SEVERITY.HIGH,\n      code: 'MISSING_AUD',\n      title: 'Missing Audience Claim',\n      message: 'Token has no audience (aud claim)',\n      recommendation: 'Include an audience claim to ensure tokens are only used by intended recipients',\n      riskScore: 65,\n    });\n  }\n  \n  // Medium: Missing issued at\n  if (!payload.iat) {\n    issues.push({\n      severity: SECURITY_SEVERITY.MEDIUM,\n      code: 'MISSING_IAT',\n      title: 'Missing Issued At Claim',\n      message: 'Token has no issued at time (iat claim)',\n      recommendation: 'Include iat claim to track when the token was issued',\n      riskScore: 30,\n    });\n  } else {\n    // Check if issued in the future (clock skew)\n    const iatMs = payload.iat * 1000;\n    const skewMinutes = (iatMs - currentTime) / (1000 * 60);\n    if (skewMinutes > 5) {\n      issues.push({\n        severity: SECURITY_SEVERITY.MEDIUM,\n        code: 'FUTURE_IAT',\n        title: 'Future Issued At Time',\n        message: `Token appears to be issued ${Math.round(skewMinutes)} minutes in the future`,\n        recommendation: 'Check system clocks for clock skew between issuer and validator',\n        riskScore: 40,\n      });\n    }\n  }\n  \n  // Medium: Long expiration time\n  if (payload.exp && payload.iat) {\n    const lifetimeHours = (payload.exp - payload.iat) / 3600;\n    if (lifetimeHours > 24) {\n      issues.push({\n        severity: SECURITY_SEVERITY.MEDIUM,\n        code: 'LONG_EXPIRY',\n        title: 'Long Token Lifetime',\n        message: `Token lifetime is ${Math.round(lifetimeHours)} hours (${Math.round(lifetimeHours / 24)} days)`,\n        recommendation: 'Access tokens should typically expire within 1 hour. Use refresh tokens for longer sessions',\n        riskScore: 45,\n      });\n    }\n  }\n  \n  // Medium: Weak algorithm\n  if (alg === 'HS256') {\n    issues.push({\n      severity: SECURITY_SEVERITY.MEDIUM,\n      code: 'WEAK_ALGORITHM',\n      title: 'HMAC Algorithm Used',\n      message: 'Token uses HMAC (symmetric) signing algorithm',\n      recommendation: 'Consider using RS256 or ES256 (asymmetric) for better key management in distributed systems',\n      riskScore: 35,\n      note: 'HS256 is acceptable if secret is properly managed',\n    });\n  }\n  \n  // Low: Missing JWT ID\n  if (!payload.jti) {\n    issues.push({\n      severity: SECURITY_SEVERITY.LOW,\n      code: 'MISSING_JTI',\n      title: 'Missing JWT ID',\n      message: 'Token has no unique identifier (jti claim)',\n      recommendation: 'Include jti claim to enable token revocation and prevent replay attacks',\n      riskScore: 20,\n    });\n  }\n  \n  // Low: Not Before claim validation\n  if (payload.nbf) {\n    const nbfMs = payload.nbf * 1000;\n    if (nbfMs > currentTime) {\n      const deltaMinutes = Math.round((nbfMs - currentTime) / (1000 * 60));\n      issues.push({\n        severity: SECURITY_SEVERITY.INFO,\n        code: 'NOT_YET_VALID',\n        title: 'Token Not Yet Valid',\n        message: `Token will be valid in ${deltaMinutes} minutes`,\n        recommendation: 'Wait until nbf time before accepting this token',\n        riskScore: 10,\n      });\n    }\n  }\n  \n  // Calculate overall risk score (0-100)\n  const riskScore = Math.min(100, Math.max(0, \n    issues.reduce((score, issue) => score + (issue.riskScore || 0), 0) / Math.max(issues.length, 1)\n  ));\n  \n  return { issues, riskScore };\n};\n\n/**\n * Get risk level from score\n */\nexport const getRiskLevel = (riskScore) => {\n  if (riskScore >= 80) return { level: 'Critical', color: 'text-red-600', bg: 'bg-red-50', border: 'border-red-200' };\n  if (riskScore >= 60) return { level: 'High', color: 'text-orange-600', bg: 'bg-orange-50', border: 'border-orange-200' };\n  if (riskScore >= 40) return { level: 'Medium', color: 'text-yellow-600', bg: 'bg-yellow-50', border: 'border-yellow-200' };\n  if (riskScore >= 20) return { level: 'Low', color: 'text-blue-600', bg: 'bg-blue-50', border: 'border-blue-200' };\n  return { level: 'Info', color: 'text-green-600', bg: 'bg-green-50', border: 'border-green-200' };\n};\n\n/**\n * Get claim information\n */\nexport const getClaimInfo = (claimName) => {\n  return CLAIM_INFO[claimName] || {\n    name: claimName,\n    description: 'Custom claim',\n    required: false,\n    category: 'Custom',\n  };\n};\n\n/**\n * Format relative time\n */\nexport const formatRelativeTime = (timestamp, currentTime = Date.now()) => {\n  if (!timestamp) return '—';\n  const ts = typeof timestamp === 'number' ? timestamp * 1000 : timestamp;\n  const date = new Date(ts);\n  if (Number.isNaN(date.getTime())) return 'Invalid timestamp';\n  \n  const seconds = Math.floor((ts - currentTime) / 1000);\n  const minutes = Math.floor(seconds / 60);\n  const hours = Math.floor(minutes / 60);\n  const days = Math.floor(hours / 24);\n  \n  const relative = new Intl.RelativeTimeFormat('en', { numeric: 'auto' });\n  \n  if (Math.abs(days) > 0) {\n    return `${date.toLocaleString()} (${relative.format(days, 'day')})`;\n  } else if (Math.abs(hours) > 0) {\n    return `${date.toLocaleString()} (${relative.format(hours, 'hour')})`;\n  } else if (Math.abs(minutes) > 0) {\n    return `${date.toLocaleString()} (${relative.format(minutes, 'minute')})`;\n  } else {\n    return `${date.toLocaleString()} (${relative.format(seconds, 'second')})`;\n  }\n};\n\n/**\n * Calculate time to live\n */\nexport const calculateTTL = (exp, currentTime = Date.now()) => {\n  if (!exp) return null;\n  const expMs = exp * 1000;\n  const ttlMs = expMs - currentTime;\n  const ttlPercentage = Math.max(0, Math.min(100, (ttlMs / (expMs - (currentTime - 86400000))) * 100));\n  return {\n    ms: ttlMs,\n    seconds: Math.floor(ttlMs / 1000),\n    minutes: Math.floor(ttlMs / (1000 * 60)),\n    hours: Math.floor(ttlMs / (1000 * 60 * 60)),\n    days: Math.floor(ttlMs / (1000 * 60 * 60 * 24)),\n    percentage: ttlPercentage,\n    expired: ttlMs < 0,\n  };\n};\n\n/**\n * Group claims by category\n */\nexport const groupClaims = (payload) => {\n  if (!payload) return {};\n  \n  const groups = {\n    Standard: {},\n    Custom: {},\n    OAuth: {},\n    ServiceNow: {},\n    Salesforce: {},\n  };\n  \n  Object.entries(payload).forEach(([key, value]) => {\n    const info = getClaimInfo(key);\n    const category = info.category || 'Custom';\n    if (groups[category]) {\n      groups[category][key] = value;\n    } else {\n      groups.Custom[key] = value;\n    }\n  });\n  \n  return groups;\n};\n\n","/**\n * JWKS (JSON Web Key Set) Utilities\n * Support for fetching and managing keys from JWKS endpoints\n */\n\n/**\n * Fetch JWKS from URL\n */\nexport const fetchJWKS = async (jwksUrl) => {\n  try {\n    const response = await fetch(jwksUrl);\n    if (!response.ok) {\n      throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n    }\n    const jwks = await response.json();\n    \n    if (!jwks.keys || !Array.isArray(jwks.keys)) {\n      throw new Error('Invalid JWKS format: missing keys array');\n    }\n    \n    return {\n      success: true,\n      jwks,\n      keys: jwks.keys,\n      count: jwks.keys.length,\n    };\n  } catch (error) {\n    return {\n      success: false,\n      error: error.message || 'Failed to fetch JWKS',\n      jwks: null,\n      keys: [],\n      count: 0,\n    };\n  }\n};\n\n/**\n * Find key by kid (Key ID)\n */\nexport const findKeyByKid = (jwks, kid) => {\n  if (!jwks || !jwks.keys) return null;\n  return jwks.keys.find(key => key.kid === kid) || null;\n};\n\n/**\n * Get key algorithm from JWK\n */\nexport const getKeyAlgorithm = (jwk) => {\n  if (!jwk || !jwk.alg) return null;\n  return jwk.alg;\n};\n\n/**\n * Import JWK to CryptoKey for verification\n */\nexport const importJWKForVerification = async (jwk) => {\n  try {\n    const algorithm = jwk.alg || 'RS256';\n    \n    // Determine algorithm type\n    let algorithmDetails;\n    if (algorithm.startsWith('RS')) {\n      algorithmDetails = {\n        name: 'RSASSA-PKCS1-v1_5',\n        hash: algorithm === 'RS256' ? 'SHA-256' : algorithm === 'RS384' ? 'SHA-384' : 'SHA-512',\n      };\n    } else if (algorithm.startsWith('ES')) {\n      algorithmDetails = {\n        name: 'ECDSA',\n        hash: algorithm === 'ES256' ? 'SHA-256' : algorithm === 'ES384' ? 'SHA-384' : 'SHA-512',\n      };\n      // Add named curve\n      if (jwk.crv) {\n        algorithmDetails.namedCurve = jwk.crv;\n      } else if (algorithm === 'ES256') {\n        algorithmDetails.namedCurve = 'P-256';\n      } else if (algorithm === 'ES384') {\n        algorithmDetails.namedCurve = 'P-384';\n      } else if (algorithm === 'ES512') {\n        algorithmDetails.namedCurve = 'P-521';\n      }\n    } else {\n      throw new Error(`Unsupported algorithm: ${algorithm}`);\n    }\n    \n    const cryptoKey = await crypto.subtle.importKey(\n      'jwk',\n      jwk,\n      algorithmDetails,\n      false,\n      ['verify']\n    );\n    \n    return { success: true, cryptoKey, algorithm: algorithmDetails };\n  } catch (error) {\n    return { success: false, error: error.message || 'Failed to import JWK' };\n  }\n};\n\n/**\n * Validate JWKS structure\n */\nexport const validateJWKS = (jwks) => {\n  const errors = [];\n  \n  if (!jwks) {\n    errors.push('JWKS is null or undefined');\n    return { valid: false, errors };\n  }\n  \n  if (!jwks.keys || !Array.isArray(jwks.keys)) {\n    errors.push('JWKS must have a \"keys\" array');\n    return { valid: false, errors };\n  }\n  \n  if (jwks.keys.length === 0) {\n    errors.push('JWKS keys array is empty');\n    return { valid: false, errors };\n  }\n  \n  jwks.keys.forEach((key, index) => {\n    if (!key.kty) {\n      errors.push(`Key ${index}: missing \"kty\" (key type)`);\n    }\n    if (!key.kid) {\n      errors.push(`Key ${index}: missing \"kid\" (key ID)`);\n    }\n    if (!key.use && !key.alg) {\n      errors.push(`Key ${index}: missing \"use\" or \"alg\" (key usage or algorithm)`);\n    }\n  });\n  \n  return {\n    valid: errors.length === 0,\n    errors,\n  };\n};\n\n/**\n * Cache JWKS responses (in-memory, for session)\n */\nconst jwksCache = new Map();\nconst CACHE_TTL = 5 * 60 * 1000; // 5 minutes\n\nexport const getCachedJWKS = (url) => {\n  const cached = jwksCache.get(url);\n  if (cached && Date.now() - cached.timestamp < CACHE_TTL) {\n    return cached.jwks;\n  }\n  return null;\n};\n\nexport const setCachedJWKS = (url, jwks) => {\n  jwksCache.set(url, {\n    jwks,\n    timestamp: Date.now(),\n  });\n};\n\nexport const clearJWKSCache = (url = null) => {\n  if (url) {\n    jwksCache.delete(url);\n  } else {\n    jwksCache.clear();\n  }\n};\n\n","/**\n * JWT Redaction Utilities\n * Safe token handling - mask sensitive claims before sharing\n */\n\nconst SENSITIVE_CLAIMS = [\n  'password',\n  'secret',\n  'token',\n  'access_token',\n  'refresh_token',\n  'api_key',\n  'apikey',\n  'auth',\n  'authorization',\n  'credit_card',\n  'ssn',\n  'social_security',\n  'pin',\n  'pii',\n  'phi',\n];\n\nconst SENSITIVE_PATTERNS = [\n  /password/i,\n  /secret/i,\n  /token/i,\n  /key/i,\n  /auth/i,\n  /credential/i,\n  /passphrase/i,\n  /private/i,\n];\n\n/**\n * Check if a claim name is sensitive\n */\nexport const isSensitiveClaim = (claimName) => {\n  const lower = claimName.toLowerCase();\n  \n  // Direct match\n  if (SENSITIVE_CLAIMS.some(sensitive => lower.includes(sensitive))) {\n    return true;\n  }\n  \n  // Pattern match\n  return SENSITIVE_PATTERNS.some(pattern => pattern.test(claimName));\n};\n\n/**\n * Redact sensitive claims from payload\n */\nexport const redactClaims = (payload, claimsToRedact = [], maskChar = '*', maskLength = 8) => {\n  if (!payload) return payload;\n  \n  const redacted = { ...payload };\n  const toRedact = new Set(claimsToRedact);\n  \n  // Auto-detect sensitive claims if none specified\n  if (claimsToRedact.length === 0) {\n    Object.keys(payload).forEach(key => {\n      if (isSensitiveClaim(key)) {\n        toRedact.add(key);\n      }\n    });\n  }\n  \n  // Redact specified claims\n  toRedact.forEach(claim => {\n    if (claim in redacted) {\n      const value = redacted[claim];\n      if (typeof value === 'string') {\n        redacted[claim] = maskChar.repeat(Math.min(maskLength, value.length)) + (value.length > maskLength ? '...' : '');\n      } else if (typeof value === 'object' && value !== null) {\n        redacted[claim] = '[REDACTED]';\n      } else {\n        redacted[claim] = maskChar.repeat(maskLength);\n      }\n    }\n  });\n  \n  return redacted;\n};\n\n/**\n * Generate redacted JWT (header.payload.[REDACTED])\n */\nexport const generateRedactedJWT = (header, redactedPayload, originalSignature = '') => {\n  try {\n    const base64UrlEncode = (str) => {\n      const utf8 = encodeURIComponent(str)\n        .replace(/%([0-9A-F]{2})/g, (_, p1) => String.fromCharCode(parseInt(p1, 16)));\n      return btoa(utf8)\n        .replace(/\\+/g, '-')\n        .replace(/\\//g, '_')\n        .replace(/=/g, '');\n    };\n    \n    const headerEncoded = base64UrlEncode(JSON.stringify(header));\n    const payloadEncoded = base64UrlEncode(JSON.stringify(redactedPayload));\n    \n    return `${headerEncoded}.${payloadEncoded}.${originalSignature.substring(0, 10)}...REDACTED`;\n  } catch (error) {\n    return null;\n  }\n};\n\n/**\n * Export redacted token info for sharing\n */\nexport const exportRedactedToken = (header, payload, redactedClaims, options = {}) => {\n  const {\n    includeHeader = true,\n    includePayload = true,\n    maskChar = '*',\n    maskLength = 8,\n  } = options;\n  \n  const redacted = redactClaims(payload, redactedClaims, maskChar, maskLength);\n  \n  return {\n    header: includeHeader ? header : null,\n    payload: includePayload ? redacted : null,\n    redactedClaims: Array.from(redactedClaims),\n    timestamp: new Date().toISOString(),\n    note: 'This token has been redacted for safe sharing. Sensitive claims have been masked.',\n  };\n};\n\n","/**\n * JWT Comparison Utilities\n * Side-by-side token comparison and diff\n */\n\n/**\n * Compare two JWT tokens\n */\nexport const compareTokens = (token1, token2) => {\n  const parseToken = (token) => {\n    if (!token) return null;\n    const parts = token.split('.');\n    if (parts.length !== 3) return null;\n    \n    try {\n      const base64UrlDecode = (segment) => {\n        const padded = segment.replace(/-/g, '+').replace(/_/g, '/').padEnd(\n          segment.length + (segment.length % 4 ? 4 - (segment.length % 4) : 0), \n          '='\n        );\n        const decoded = atob(padded);\n        try {\n          return decodeURIComponent(\n            decoded\n              .split('')\n              .map((c) => `%${`00${c.charCodeAt(0).toString(16)}`.slice(-2)}`)\n              .join('')\n          );\n        } catch {\n          return decoded;\n        }\n      };\n      \n      const headerRaw = base64UrlDecode(parts[0]);\n      const payloadRaw = base64UrlDecode(parts[1]);\n      \n      return {\n        header: JSON.parse(headerRaw),\n        payload: JSON.parse(payloadRaw),\n        signature: parts[2],\n        headerRaw,\n        payloadRaw,\n      };\n    } catch {\n      return null;\n    }\n  };\n  \n  const t1 = parseToken(token1);\n  const t2 = parseToken(token2);\n  \n  if (!t1 || !t2) {\n    return {\n      valid: false,\n      error: 'One or both tokens are invalid',\n    };\n  }\n  \n  // Compare headers\n  const headerDiff = diffObjects(t1.header, t2.header);\n  \n  // Compare payloads\n  const payloadDiff = diffObjects(t1.payload, t2.payload);\n  \n  // Compare signatures\n  const signaturesMatch = t1.signature === t2.signature;\n  \n  return {\n    valid: true,\n    token1: t1,\n    token2: t2,\n    headerDiff,\n    payloadDiff,\n    signaturesMatch,\n    summary: {\n      headerChanges: headerDiff.added.length + headerDiff.removed.length + headerDiff.changed.length,\n      payloadChanges: payloadDiff.added.length + payloadDiff.removed.length + payloadDiff.changed.length,\n      signaturesMatch,\n    },\n  };\n};\n\n/**\n * Diff two objects\n */\nconst diffObjects = (obj1, obj2) => {\n  const allKeys = new Set([...Object.keys(obj1 || {}), ...Object.keys(obj2 || {})]);\n  const added = [];\n  const removed = [];\n  const changed = [];\n  const unchanged = [];\n  \n  allKeys.forEach(key => {\n    const val1 = obj1?.[key];\n    const val2 = obj2?.[key];\n    \n    if (!(key in (obj1 || {}))) {\n      added.push({ key, value: val2 });\n    } else if (!(key in (obj2 || {}))) {\n      removed.push({ key, value: val1 });\n    } else if (JSON.stringify(val1) !== JSON.stringify(val2)) {\n      changed.push({ key, oldValue: val1, newValue: val2 });\n    } else {\n      unchanged.push({ key, value: val1 });\n    }\n  });\n  \n  return { added, removed, changed, unchanged };\n};\n\n/**\n * Get diff summary text\n */\nexport const getDiffSummary = (comparison) => {\n  if (!comparison.valid) {\n    return comparison.error || 'Comparison failed';\n  }\n  \n  const { headerDiff, payloadDiff, signaturesMatch } = comparison;\n  \n  const parts = [];\n  \n  if (headerDiff.added.length > 0) parts.push(`${headerDiff.added.length} header field(s) added`);\n  if (headerDiff.removed.length > 0) parts.push(`${headerDiff.removed.length} header field(s) removed`);\n  if (headerDiff.changed.length > 0) parts.push(`${headerDiff.changed.length} header field(s) changed`);\n  \n  if (payloadDiff.added.length > 0) parts.push(`${payloadDiff.added.length} claim(s) added`);\n  if (payloadDiff.removed.length > 0) parts.push(`${payloadDiff.removed.length} claim(s) removed`);\n  if (payloadDiff.changed.length > 0) parts.push(`${payloadDiff.changed.length} claim(s) changed`);\n  \n  if (signaturesMatch) {\n    parts.push('Signatures match');\n  } else {\n    parts.push('Signatures differ');\n  }\n  \n  return parts.join(', ') || 'Tokens are identical';\n};\n\n","import React, { useEffect, useMemo, useRef, useState } from 'react';\nimport ReactDOM from 'react-dom/client';\nimport {\n  AlertCircle,\n  CheckCircle2,\n  ChevronDown,\n  ChevronLeft,\n  ChevronRight,\n  ChevronUp,\n  Copy,\n  Info,\n  Key,\n  ListChecks,\n  Network,\n  Search,\n  ShieldCheck,\n  Table,\n  Upload,\n  X,\n  FileText,\n  FileCode,\n  FileJson,\n  Clock,\n  Eye,\n  EyeOff,\n  GitCompare,\n  Download,\n  RefreshCw,\n  Lock,\n} from 'lucide-react';\nimport { jwtDecode } from 'jwt-decode';\nimport clsx from 'clsx';\nimport Navigation from './components/Navigation';\nimport Footer from './components/Footer';\nimport './styles.css';\nimport { \n  validateJWT, \n  getRiskLevel, \n  getClaimInfo, \n  formatRelativeTime, \n  calculateTTL, \n  groupClaims,\n  SECURITY_SEVERITY \n} from './utils/jwtSecurity';\nimport {\n  fetchJWKS,\n  findKeyByKid,\n  getCachedJWKS,\n  setCachedJWKS,\n  clearJWKSCache,\n  validateJWKS,\n  importJWKForVerification,\n} from './utils/jwks';\nimport {\n  redactClaims,\n  isSensitiveClaim,\n  generateRedactedJWT,\n  exportRedactedToken,\n} from './utils/jwtRedaction';\nimport {\n  compareTokens,\n  getDiffSummary,\n} from './utils/jwtComparison';\n\n// Company themes\nconst COMPANY_THEMES = {\n  servicenow: {\n    name: 'ServiceNow',\n    primary: '#81B5A1',\n    primaryDark: '#5A8F7A',\n    primaryLight: '#A8D4C4',\n    bgGradient: 'from-green-50 to-emerald-50',\n    badgeBg: '#81B5A1',\n    badgeText: '#FFFFFF',\n  },\n  salesforce: {\n    name: 'Salesforce',\n    primary: '#00A1E0',\n    primaryDark: '#0070D2',\n    primaryLight: '#4FC3F7',\n    bgGradient: 'from-blue-50 to-cyan-50',\n    badgeBg: '#00A1E0',\n    badgeText: '#FFFFFF',\n  },\n};\n\n// Company detection from payload\nconst detectCompany = (payload) => {\n  if (!payload) return 'servicenow';\n  \n  if (payload.sys_id || payload.instance || payload.instance_url || \n      payload.user_name || (payload.email && payload.email.includes('servicenow'))) {\n    return 'servicenow';\n  }\n  \n  if (payload.organization_id || payload.user_id || payload.sfdc_instance_url ||\n      payload.scope || (payload.email && payload.email.includes('salesforce'))) {\n    return 'salesforce';\n  }\n  \n  return 'servicenow';\n};\n\nconst getCompanyHints = (payload, company) => {\n  if (!payload) return [];\n  const hints = [];\n  \n  if (company === 'servicenow') {\n    if (payload.sys_id) hints.push('Contains ServiceNow sys_id');\n    if (payload.user_name || payload.userName) hints.push('User principal claim detected');\n    if (payload.instance || payload.instance_url) hints.push('Instance metadata present');\n  } else if (company === 'salesforce') {\n    if (payload.organization_id) hints.push('Contains Salesforce organization_id');\n    if (payload.user_id) hints.push('User ID claim detected');\n    if (payload.sfdc_instance_url) hints.push('Salesforce instance URL present');\n    if (payload.scope) hints.push('OAuth scope defined');\n  }\n  \n  return hints;\n};\n\nconst getCompanyClaimSet = (payload, company) => {\n  if (!payload) return new Set();\n  const claimSet = new Set();\n  \n  if (company === 'servicenow') {\n    if (payload.sys_id) claimSet.add('sys_id');\n    if (payload.user_name || payload.userName) claimSet.add('user_name');\n    if (payload.instance || payload.instance_url) {\n      claimSet.add('instance');\n      claimSet.add('instance_url');\n    }\n  } else if (company === 'salesforce') {\n    if (payload.organization_id) claimSet.add('organization_id');\n    if (payload.user_id) claimSet.add('user_id');\n    if (payload.sfdc_instance_url) claimSet.add('sfdc_instance_url');\n    if (payload.scope) claimSet.add('scope');\n  }\n  \n  return claimSet;\n};\n\nconst base64UrlDecode = (segment) => {\n  if (!segment) return '';\n  const padded = segment.replace(/-/g, '+').replace(/_/g, '/').padEnd(segment.length + (segment.length % 4 ? 4 - (segment.length % 4) : 0), '=');\n  const decoded = atob(padded);\n  try {\n    return decodeURIComponent(\n      decoded\n        .split('')\n        .map((c) => `%${`00${c.charCodeAt(0).toString(16)}`.slice(-2)}`)\n        .join('')\n    );\n  } catch {\n    return decoded;\n  }\n};\n\nconst pretty = (segment) => {\n  if (!segment) return '';\n  try {\n    return JSON.stringify(JSON.parse(segment), null, 2);\n  } catch {\n    return segment;\n  }\n};\n\nconst formatTimestamp = (value) => {\n  if (!value) return '—';\n  const date = new Date(value * 1000);\n  if (Number.isNaN(date.getTime())) return 'Invalid timestamp';\n  const relative = new Intl.RelativeTimeFormat('en', { numeric: 'auto' });\n  const hours = Math.round((date.getTime() - Date.now()) / (1000 * 60 * 60));\n  return `${date.toLocaleString()} (${relative.format(hours, 'hour')})`;\n};\n\nconst analyzeStatus = (payload) => {\n  if (!payload?.exp) {\n    return {\n      tone: 'warning',\n      icon: AlertCircle,\n      message: 'Missing exp claim',\n    };\n  }\n  const now = Date.now();\n  const expMs = payload.exp * 1000;\n  if (expMs < now) {\n    const deltaDays = Math.floor((now - expMs) / (1000 * 60 * 60 * 24));\n    return {\n      tone: 'error',\n      icon: AlertCircle,\n      message: deltaDays > 0 ? `Expired ${deltaDays} day(s) ago` : 'Recently expired',\n    };\n  }\n  const diffHours = (expMs - now) / (1000 * 60 * 60);\n  if (diffHours <= 1) {\n    return {\n      tone: 'warning',\n      icon: AlertCircle,\n      message: `Expiring in ${Math.round(diffHours * 60)} minutes`,\n    };\n  }\n  return {\n    tone: 'success',\n    icon: CheckCircle2,\n    message: `Valid for ${Math.round(diffHours)} hour(s)`,\n  };\n};\n\nconst toneStyles = {\n  success: { text: 'text-success', bg: 'bg-success/10', border: 'border-success/20' },\n  warning: { text: 'text-warning', bg: 'bg-warning/10', border: 'border-warning/20' },\n  error: { text: 'text-error', bg: 'bg-error/10', border: 'border-error/20' },\n};\n\nconst targetClaims = ['sub', 'name', 'email', 'user_name', 'sys_id', 'iat', 'exp'];\n\n// Test RSA Public Key (corresponds to private key used for signing)\nconst TEST_RSA_PUBLIC_KEY = `-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA4f5wg5l2hKsTeNem/V41\nfGnJm6gOdrj8ym3rFkEjWT2bt1gNkZnjIe9E0HPR+ZaVCgLj3qMPWtHPF9hwlEU\njJ0OZJgI9V1PpQXl0+3qXEzZPJ2V0Y5J8TqFzXZQ7i3qW3+7r0G7jZQ1+3qW3+7\nr0G7jZQ1+3qW3+7r0G7jZQ1+3qW3+7r0G7jZQ1+3qW3+7r0G7jZQ1+3qW3+7r0\nG7jZQ1+3qW3+7r0G7jZQ1+3qW3+7r0G7jZQ1+3qW3+7r0G7jZQ1+3qW3+7r0G7\njZQ1+3qW3+7r0G7jZQ1+3qW3+7r0G7jZQ1+3qW3+7r0G7jZQ1+3qW3+7r0G7jZ\nQwIDAQAB\n-----END PUBLIC KEY-----`;\n\n// Test ECDSA Public Key (P-256)\nconst TEST_ECDSA_PUBLIC_KEY = `-----BEGIN PUBLIC KEY-----\nMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAE2K2S7O8Z8Y7qY7qY7qY7qY7qY7q\nY7qY7qY7qY7qY7qY7qY7qY7qY7qY7qY7qY7qY7qY7qY7qY7qY7qY7qY7qY7qY\n-----END PUBLIC KEY-----`;\n\n// Generate random string for HMAC secret\nconst generateRandomSecret = (length = 32) => {\n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  let result = '';\n  for (let i = 0; i < length; i++) {\n    result += chars.charAt(Math.floor(Math.random() * chars.length));\n  }\n  return result;\n};\n\n// Generate random JWT example\nconst generateJWTExample = async (algorithm = 'HS256') => {\n  const firstNames = ['John', 'Jane', 'Alice', 'Bob', 'Charlie', 'David', 'Emma', 'Frank', 'Grace', 'Henry'];\n  const lastNames = ['Smith', 'Johnson', 'Williams', 'Brown', 'Jones', 'Garcia', 'Miller', 'Davis', 'Rodriguez', 'Martinez'];\n  const domains = ['example.com', 'test.com', 'demo.org', 'sample.net', 'dev.io'];\n  \n  const firstName = firstNames[Math.floor(Math.random() * firstNames.length)];\n  const lastName = lastNames[Math.floor(Math.random() * lastNames.length)];\n  const domain = domains[Math.floor(Math.random() * domains.length)];\n  const email = `${firstName.toLowerCase()}.${lastName.toLowerCase()}@${domain}`;\n  const userName = `${firstName.toLowerCase()}.${lastName.toLowerCase()}`;\n  const sysId = Array.from({ length: 32 }, () => Math.floor(Math.random() * 16).toString(16)).join('');\n  \n  const now = Math.floor(Date.now() / 1000);\n  const iat = now - Math.floor(Math.random() * 3600); // Issued up to 1 hour ago\n  const exp = now + Math.floor(Math.random() * 86400) + 3600; // Expires 1 hour to 1 day from now\n  \n  const header = {\n    alg: algorithm,\n    typ: 'JWT',\n    ...(algorithm.startsWith('RS') || algorithm.startsWith('ES') ? { kid: Math.floor(Math.random() * 1000000).toString() } : {})\n  };\n  \n  const payload = {\n    sub: email,\n    name: `${firstName} ${lastName}`,\n    email: email,\n    user_name: userName,\n    sys_id: sysId,\n    iat: iat,\n    exp: exp,\n    instance: `instance${Math.floor(Math.random() * 100)}.service-now.com`,\n    instance_url: `https://instance${Math.floor(Math.random() * 100)}.service-now.com`\n  };\n  \n  // Encode header and payload\n  const base64UrlEncode = (str) => {\n    const utf8 = encodeURIComponent(str)\n      .replace(/%([0-9A-F]{2})/g, (_, p1) => String.fromCharCode(parseInt(p1, 16)));\n    return btoa(utf8)\n      .replace(/\\+/g, '-')\n      .replace(/\\//g, '_')\n      .replace(/=/g, '');\n  };\n  \n  const headerEncoded = base64UrlEncode(JSON.stringify(header));\n  const payloadEncoded = base64UrlEncode(JSON.stringify(payload));\n  const message = `${headerEncoded}.${payloadEncoded}`;\n  \n  let signature;\n  let keyForVerification = '';\n  \n  if (algorithm.startsWith('HS')) {\n    // HMAC - generate random secret\n    const secret = generateRandomSecret();\n    keyForVerification = secret;\n    \n    const encoder = new TextEncoder();\n    const keyData = encoder.encode(secret);\n    const hashAlg = algorithm === 'HS256' ? 'SHA-256' : algorithm === 'HS384' ? 'SHA-384' : 'SHA-512';\n    const cryptoKey = await crypto.subtle.importKey(\n      'raw',\n      keyData,\n      { name: 'HMAC', hash: hashAlg },\n      false,\n      ['sign']\n    );\n    \n    const sigBytes = await crypto.subtle.sign('HMAC', cryptoKey, encoder.encode(message));\n    signature = btoa(String.fromCharCode(...new Uint8Array(sigBytes)))\n      .replace(/\\+/g, '-')\n      .replace(/\\//g, '_')\n      .replace(/=/g, '');\n  } else if (algorithm.startsWith('RS')) {\n    // RSA - generate key pair and sign\n    const hashAlg = algorithm === 'RS256' ? 'SHA-256' : algorithm === 'RS384' ? 'SHA-384' : 'SHA-512';\n    const keyPair = await crypto.subtle.generateKey(\n      {\n        name: 'RSASSA-PKCS1-v1_5',\n        modulusLength: 2048,\n        publicExponent: new Uint8Array([1, 0, 1]),\n        hash: hashAlg,\n      },\n      true,\n      ['sign', 'verify']\n    );\n    \n    // Sign with private key\n    const encoder = new TextEncoder();\n    const sigBytes = await crypto.subtle.sign(\n      'RSASSA-PKCS1-v1_5',\n      keyPair.privateKey,\n      encoder.encode(message)\n    );\n    signature = btoa(String.fromCharCode(...new Uint8Array(sigBytes)))\n      .replace(/\\+/g, '-')\n      .replace(/\\//g, '_')\n      .replace(/=/g, '');\n    \n    // Export public key in SPKI format and convert to PEM\n    const publicKeyData = await crypto.subtle.exportKey('spki', keyPair.publicKey);\n    const publicKeyBase64 = btoa(String.fromCharCode(...new Uint8Array(publicKeyData)));\n    keyForVerification = `-----BEGIN PUBLIC KEY-----\\n${publicKeyBase64.match(/.{1,64}/g).join('\\n')}\\n-----END PUBLIC KEY-----`;\n  } else if (algorithm.startsWith('ES')) {\n    // ECDSA - generate key pair and sign\n    const hashAlg = algorithm === 'ES256' ? 'SHA-256' : algorithm === 'ES384' ? 'SHA-384' : 'SHA-512';\n    const namedCurve = algorithm === 'ES256' ? 'P-256' : algorithm === 'ES384' ? 'P-384' : 'P-521';\n    const keyPair = await crypto.subtle.generateKey(\n      {\n        name: 'ECDSA',\n        namedCurve: namedCurve,\n      },\n      true,\n      ['sign', 'verify']\n    );\n    \n    // Sign with private key\n    const encoder = new TextEncoder();\n    const sigBytes = await crypto.subtle.sign(\n      {\n        name: 'ECDSA',\n        hash: hashAlg,\n      },\n      keyPair.privateKey,\n      encoder.encode(message)\n    );\n    signature = btoa(String.fromCharCode(...new Uint8Array(sigBytes)))\n      .replace(/\\+/g, '-')\n      .replace(/\\//g, '_')\n      .replace(/=/g, '');\n    \n    // Export public key in SPKI format and convert to PEM\n    const publicKeyData = await crypto.subtle.exportKey('spki', keyPair.publicKey);\n    const publicKeyBase64 = btoa(String.fromCharCode(...new Uint8Array(publicKeyData)));\n    keyForVerification = `-----BEGIN PUBLIC KEY-----\\n${publicKeyBase64.match(/.{1,64}/g).join('\\n')}\\n-----END PUBLIC KEY-----`;\n  }\n  \n  const token = `${message}.${signature}`;\n  return { token, key: keyForVerification, algorithm };\n};\n\nconst FEATURES = [\n  { id: 'jwt', name: 'JWT Decoder', icon: ShieldCheck, category: 'Authentication', status: 'active', url: chrome.runtime?.getURL ? chrome.runtime.getURL('jwt.html') : 'jwt.html' },\n  { id: 'saml', name: 'SAML Inspector', icon: Key, category: 'Authentication', status: 'active', url: chrome.runtime?.getURL ? chrome.runtime.getURL('saml.html') : 'saml.html' },\n  { id: 'rest', name: 'REST API Tester', icon: Network, category: 'API Testing', status: 'active', url: chrome.runtime?.getURL ? chrome.runtime.getURL('rest.html') : 'rest.html' },\n  { id: 'har', name: 'HAR Analyzer', icon: FileCode, category: 'Debugging', status: 'active', url: chrome.runtime?.getURL ? chrome.runtime.getURL('har-analyzer.html') : 'har-analyzer.html' },\n  { id: 'json', name: 'JSON Utility', icon: FileJson, category: 'Utilities', status: 'active', url: chrome.runtime?.getURL ? chrome.runtime.getURL('json-utility.html') : 'json-utility.html' },\n  // Browser Logs temporarily disabled - not ready for production\n  // { id: 'logs', name: 'Browser Logs', icon: FileText, category: 'Debugging', status: 'active', url: chrome.runtime?.getURL ? chrome.runtime.getURL('logs.html') : 'logs.html' },\n];\n\nconst copyText = async (text) => {\n  if (!text) return;\n  try {\n    await navigator.clipboard.writeText(text);\n  } catch (err) {\n    console.error('Copy failed', err);\n  }\n};\n\nconst verifySignature = async (token, key, algorithm, keyFormat) => {\n  try {\n    const parts = token.split('.');\n    if (parts.length !== 3) return { verified: false, error: 'Invalid JWT format' };\n\n    const header = JSON.parse(base64UrlDecode(parts[0]));\n    const alg = header.alg || algorithm || 'RS256';\n\n    if (alg.startsWith('HS')) {\n      const encoder = new TextEncoder();\n      const message = `${parts[0]}.${parts[1]}`;\n      const keyData = encoder.encode(key);\n      \n      const hashAlg = alg === 'HS256' ? 'SHA-256' : alg === 'HS384' ? 'SHA-384' : 'SHA-512';\n      const cryptoKey = await crypto.subtle.importKey(\n        'raw',\n        keyData,\n        { name: 'HMAC', hash: hashAlg },\n        false,\n        ['sign']\n      );\n\n      const signature = await crypto.subtle.sign('HMAC', cryptoKey, encoder.encode(message));\n      const signatureBase64 = btoa(String.fromCharCode(...new Uint8Array(signature)))\n        .replace(/\\+/g, '-')\n        .replace(/\\//g, '_')\n        .replace(/=/g, '');\n\n      const verified = signatureBase64 === parts[2];\n      return { verified, error: verified ? null : 'Signature verification failed' };\n    }\n\n    let cryptoKey;\n    if (keyFormat === 'JWK') {\n      const jwk = typeof key === 'string' ? JSON.parse(key) : key;\n      cryptoKey = await crypto.subtle.importKey(\n        'jwk',\n        jwk,\n        {\n          name: alg.startsWith('RS') ? 'RSASSA-PKCS1-v1_5' : 'ECDSA',\n          hash: alg === 'RS256' || alg === 'ES256' ? 'SHA-256' : alg === 'RS384' || alg === 'ES384' ? 'SHA-384' : 'SHA-512',\n        },\n        false,\n        ['verify']\n      );\n    } else {\n      const cleanKey = key\n        .replace(/-----BEGIN PUBLIC KEY-----/g, '')\n        .replace(/-----END PUBLIC KEY-----/g, '')\n        .replace(/-----BEGIN RSA PUBLIC KEY-----/g, '')\n        .replace(/-----END RSA PUBLIC KEY-----/g, '')\n        .replace(/\\s+/g, '');\n\n      const keyData = Uint8Array.from(atob(cleanKey), (c) => c.charCodeAt(0));\n\n      if (alg.startsWith('RS')) {\n        cryptoKey = await crypto.subtle.importKey(\n          'spki',\n          keyData.buffer,\n          {\n            name: 'RSASSA-PKCS1-v1_5',\n            hash: alg === 'RS256' ? 'SHA-256' : alg === 'RS384' ? 'SHA-384' : 'SHA-512',\n          },\n          false,\n          ['verify']\n        );\n      } else if (alg.startsWith('ES')) {\n        cryptoKey = await crypto.subtle.importKey(\n          'spki',\n          keyData.buffer,\n          {\n            name: 'ECDSA',\n            namedCurve: alg === 'ES256' ? 'P-256' : alg === 'ES384' ? 'P-384' : 'P-521',\n          },\n          false,\n          ['verify']\n        );\n      } else {\n        return { verified: false, error: `Algorithm ${alg} not supported for verification` };\n      }\n    }\n\n    const message = `${parts[0]}.${parts[1]}`;\n    const signatureBase64 = parts[2].replace(/-/g, '+').replace(/_/g, '/');\n    const padLength = signatureBase64.length % 4 ? 4 - (signatureBase64.length % 4) : 0;\n    const paddedSignature = signatureBase64 + '='.repeat(padLength);\n    const signatureBytes = Uint8Array.from(atob(paddedSignature), (c) => c.charCodeAt(0));\n\n    // For ECDSA, we need to pass the algorithm object with hash\n    const verifyAlgorithm = alg.startsWith('RS') \n      ? 'RSASSA-PKCS1-v1_5'\n      : {\n          name: 'ECDSA',\n          hash: alg === 'ES256' ? 'SHA-256' : alg === 'ES384' ? 'SHA-384' : 'SHA-512',\n        };\n\n    const verified = await crypto.subtle.verify(\n      verifyAlgorithm,\n      cryptoKey,\n      signatureBytes,\n      new TextEncoder().encode(message)\n    );\n\n    return { verified, error: verified ? null : 'Signature verification failed' };\n  } catch (err) {\n    return { verified: false, error: err.message || 'Verification error' };\n  }\n};\n\nconst useDecoded = (token) =>\n  useMemo(() => {\n    if (!token.trim()) {\n      return {\n        error: '',\n        header: null,\n        payload: null,\n        signature: '',\n        headerRaw: '',\n        payloadRaw: '',\n      };\n    }\n    const segments = token.split('.');\n    if (segments.length !== 3) {\n      return {\n        error: 'A JWT must contain three dot-separated segments.',\n        header: null,\n        payload: null,\n        signature: '',\n        headerRaw: '',\n        payloadRaw: '',\n      };\n    }\n    try {\n      const headerRaw = base64UrlDecode(segments[0]);\n      const payloadRaw = base64UrlDecode(segments[1]);\n      const signature = segments[2];\n      const header = JSON.parse(headerRaw);\n      const payload = jwtDecode(token);\n      return { error: '', header, payload, signature, headerRaw, payloadRaw };\n    } catch (err) {\n      return {\n        error: err.message || 'Unable to decode token.',\n        header: null,\n        payload: null,\n        signature: segments[2] || '',\n        headerRaw: '',\n        payloadRaw: '',\n      };\n    }\n  }, [token]);\n\nconst CodeSection = ({ title, content, description, onCopy, viewMode, onViewModeChange, theme, statusColor, isHeader = false, payload, targetClaims, getClaimInfo, companyClaimSet, currentCompany, currentTime, calculateTTL, editable, onContentChange, placeholder }) => {\n  const [copied, setCopied] = useState(false);\n  const lines = content ? content.split('\\n') : ['—'];\n  const parsedPayload = viewMode === 'table' && title?.startsWith('Payload:') ? (() => {\n    try {\n      return JSON.parse(content);\n    } catch {\n      return null;\n    }\n  })() : null;\n\n  const borderColor = statusColor?.border || 'border-slate-200/80';\n  const textColor = statusColor?.text || 'text-slate-900';\n\n  const defaultBorder = 'border-slate-200/80';\n  const defaultText = 'text-slate-900';\n  const finalBorder = statusColor ? borderColor : defaultBorder;\n  const finalText = statusColor ? textColor : defaultText;\n  const dotColor = statusColor \n    ? (statusColor.text.includes('error') ? '#ef4444' : statusColor.text.includes('warning') ? '#f59e0b' : theme.primary)\n    : theme.primary;\n\n  const handleCopy = async () => {\n    await onCopy(content);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  // Fixed height to prevent dynamic changes - Equal heights for Payload and Signature sections\n  const contentHeight = title?.startsWith('Payload:') || title?.startsWith('Signature:') ? 'auto' : isHeader ? 'auto' : '280px';\n  const isTableMode = viewMode === 'table' && parsedPayload && title?.startsWith('Payload:');\n\n  return (\n    <div className=\"border border-gray-200 rounded-xl bg-white flex flex-col overflow-hidden shadow-sm\">\n      <div className=\"flex items-center justify-between bg-gray-50 px-4 sm:px-5 lg:px-6 py-2.5 sm:py-3 lg:py-3.5 flex-shrink-0 border-b border-gray-200\">\n        <div className=\"flex items-center gap-2 sm:gap-3 flex-1 min-w-0\">\n          <div className=\"h-1.5 sm:h-2 w-1.5 sm:w-2 rounded-full flex-shrink-0\" style={{ backgroundColor: dotColor }} />\n          <div className=\"min-w-0 flex-1\">\n            <h3 className=\"text-xs sm:text-sm font-semibold text-gray-900 uppercase tracking-wide truncate\">{title}</h3>\n            {description && <p className=\"hidden sm:block text-xs text-gray-600 leading-tight mt-1\">{description}</p>}\n          </div>\n        </div>\n        <div className=\"flex items-center gap-1 sm:gap-1.5 flex-shrink-0\">\n          {title?.startsWith('Payload:') && (\n            <div className=\"flex items-center gap-0.5 bg-white p-0.5 border border-gray-300 rounded-md\">\n              <button\n                onClick={() => onViewModeChange('json')}\n                className={clsx('px-1.5 sm:px-2 py-0.5 sm:py-1 text-[10px] sm:text-xs font-medium transition-colors rounded', viewMode === 'json' ? 'bg-sky-500 text-white' : 'text-gray-700 hover:bg-gray-50')}\n                tabIndex={0}\n              >\n                JSON\n              </button>\n              <button\n                onClick={() => onViewModeChange('table')}\n                className={clsx('px-1.5 sm:px-2 py-0.5 sm:py-1 text-[10px] sm:text-xs font-medium transition-colors rounded inline-flex items-center gap-1', viewMode === 'table' ? 'bg-sky-500 text-white' : 'text-gray-700 hover:bg-gray-50')}\n                tabIndex={0}\n              >\n                <Table className=\"h-2.5 sm:h-3 w-2.5 sm:w-3\" />\n                <span className=\"hidden sm:inline\">Table</span>\n              </button>\n            </div>\n          )}\n          <button\n            onClick={handleCopy}\n            onKeyDown={(e) => {\n              if (e.key === 'Enter' || e.key === ' ') {\n                e.preventDefault();\n                handleCopy();\n              }\n            }}\n            onMouseDown={(e) => {\n              e.currentTarget.style.transform = 'scale(0.95)';\n              e.currentTarget.style.backgroundColor = '#e2e8f0';\n            }}\n            onMouseUp={(e) => {\n              e.currentTarget.style.transform = '';\n              e.currentTarget.style.backgroundColor = '';\n            }}\n            onTouchStart={(e) => {\n              e.currentTarget.style.transform = 'scale(0.95)';\n              e.currentTarget.style.backgroundColor = '#e2e8f0';\n            }}\n            onTouchEnd={(e) => {\n              setTimeout(() => {\n                e.currentTarget.style.transform = '';\n                e.currentTarget.style.backgroundColor = '';\n              }, 150);\n            }}\n            className={clsx(\n              'inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-semibold transition-all focus:outline-none border-[0.5px] border-gray-300 rounded-lg focus:outline-none shadow-sm',\n              copied \n                ? 'bg-green-50 border-green-400 text-green-700' \n                : 'text-gray-700 hover:bg-gray-50 hover:border-gray-400 bg-white border-gray-300 hover:shadow'\n            )}\n            tabIndex={0}\n          >\n            {copied ? <CheckCircle2 className=\"h-3.5 w-3.5\" /> : <Copy className=\"h-3.5 w-3.5\" />}\n            <span className=\"hidden sm:inline\">{copied ? 'Copied!' : 'Copy'}</span>\n          </button>\n        </div>\n      </div>\n      <div className={clsx('bg-white', isHeader || isTableMode ? 'overflow-visible' : 'overflow-auto')} style={isHeader || isTableMode || title?.startsWith('Signature:') ? {} : { height: contentHeight, maxHeight: contentHeight }}>\n        {viewMode === 'table' && parsedPayload ? (\n              <div className=\"p-3 sm:p-4 lg:p-5 w-full overflow-x-auto\">\n            <table className=\"w-full text-xs sm:text-sm\">\n              <thead>\n                <tr className=\"border-b-2 border-gray-200\">\n                  <th className=\"px-3 sm:px-4 lg:px-5 py-2 sm:py-3 text-left font-semibold text-gray-900\">Claim</th>\n                  <th className=\"px-3 sm:px-4 lg:px-5 py-2 sm:py-3 text-left font-semibold text-gray-900\">Value</th>\n                </tr>\n              </thead>\n              <tbody>\n                {Object.entries(parsedPayload).map(([key, value]) => (\n                  <tr key={key} className=\"border-b border-gray-100 hover:bg-gray-50 transition-colors\">\n                    <td className=\"px-3 sm:px-4 lg:px-5 py-2 sm:py-3 font-mono text-gray-700 text-xs sm:text-sm\">{key}</td>\n                    <td className=\"px-3 sm:px-4 lg:px-5 py-2 sm:py-3 text-gray-900 text-xs sm:text-sm break-words\">{typeof value === 'object' ? JSON.stringify(value) : String(value)}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        ) : title?.startsWith('Signature:') || (editable && title?.startsWith('Verify Signature:')) ? (\n          editable && title?.startsWith('Verify Signature:') ? (\n            <div className=\"p-3 sm:p-4\">\n              <textarea\n                value={content || ''}\n                onChange={(e) => onContentChange?.(e.target.value)}\n                placeholder={placeholder || ''}\n                className=\"w-full h-full min-h-[180px] resize-none border-0 bg-transparent px-0 py-0 font-mono text-xs sm:text-sm leading-relaxed text-gray-800 placeholder:text-gray-400 focus:outline-none focus:bg-sky-50/30\"\n                tabIndex={0}\n              />\n            </div>\n          ) : (\n            <div className=\"p-3 sm:p-4\">\n              <pre className=\"text-xs sm:text-sm leading-relaxed whitespace-pre-wrap break-words overflow-wrap-anywhere\">\n                <code className=\"font-mono text-gray-800\">\n                  {content || '—'}\n                </code>\n              </pre>\n            </div>\n          )\n        ) : (\n          <div className=\"flex bg-white\" style={{ flex: '1 1 auto', minHeight: '100%' }}>\n            {/* Line Numbers Banner - Left Side */}\n            <div className=\"flex-shrink-0 bg-gray-50 border-r-2 border-gray-200 text-right pr-2 sm:pr-3 lg:pr-4 pl-2 sm:pl-3 lg:pl-4 py-3 sm:py-4 lg:py-5 flex flex-col\" style={{ width: '45px', fontFamily: 'monospace', minHeight: '100%' }}>\n              {lines.map((line, index) => (\n                <div key={index} className=\"text-gray-400 text-[10px] sm:text-xs leading-relaxed select-none flex-shrink-0\" style={{ minHeight: '18px' }}>\n                  {index + 1}\n                </div>\n              ))}\n            </div>\n            \n            {/* Content - Right Side */}\n            <div className=\"flex-1 py-3 sm:py-4 lg:py-5 pl-3 sm:pl-4 lg:pl-6 pr-3 sm:pr-4 lg:pr-6 text-xs sm:text-sm leading-relaxed overflow-x-auto bg-white\">\n              <div className=\"font-mono text-gray-800\">\n                {lines.map((line, index) => {\n                  // For Key Claims, check if this line contains a claim key\n                  let claimInfo = null;\n                  let hasCompanyBadge = false;\n                  if (title?.startsWith('Key Claims:') && targetClaims && getClaimInfo && payload) {\n                    // Try to extract claim name from line (e.g., \"  \\\"sub\\\": ...\")\n                    const claimMatch = line.match(/^\\s*\"([^\"]+)\":\\s*(.+)/);\n                    if (claimMatch && targetClaims.includes(claimMatch[1])) {\n                      const claimName = claimMatch[1];\n                      claimInfo = getClaimInfo(claimName);\n                      hasCompanyBadge = companyClaimSet?.has(claimName) || false;\n                    }\n                  }\n                  \n                  // For Key Claims with info, split line and show icon after value\n                  if (title?.startsWith('Key Claims:') && claimInfo) {\n                    const colonIndex = line.indexOf(':');\n                    if (colonIndex !== -1) {\n                      const keyPart = line.substring(0, colonIndex + 1);\n                      const valuePart = line.substring(colonIndex + 1).trim();\n                      return (\n                        <div key={index} className=\"flex items-center gap-2\" style={{ minHeight: '22.4px' }}>\n                          <span className=\"text-slate-900 whitespace-pre\">{keyPart}</span>\n                          <span className=\"text-slate-900 whitespace-pre\">{valuePart}</span>\n                          {hasCompanyBadge && (\n                            <span className=\"inline-flex items-center rounded-full px-1.5 py-0.5 text-xs font-semibold uppercase text-white flex-shrink-0\" style={{ backgroundColor: theme.badgeBg }}>\n                              {currentCompany === 'servicenow' ? 'SN' : 'SF'}\n                            </span>\n                          )}\n                          <Tooltip\n                            content={\n                              <div className=\"max-w-sm\">\n                                <p className=\"font-semibold mb-1.5 text-sm text-white\">{claimInfo.name}</p>\n                                <p className=\"text-xs mb-2.5 text-slate-300 leading-relaxed\">{claimInfo.description}</p>\n                              </div>\n                            }\n                            position=\"left\"\n                          >\n                            <Info className=\"h-3.5 w-3.5 text-sky-500 cursor-help flex-shrink-0\" />\n                          </Tooltip>\n                        </div>\n                      );\n                    }\n                  }\n                  \n                  return (\n                    <div key={index} className=\"text-slate-900 whitespace-pre\" style={{ minHeight: '22.4px' }}>\n                      {line || ' '}\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nconst Tooltip = ({ children, content, position = 'top' }) => {\n  const [show, setShow] = useState(false);\n  const [coords, setCoords] = useState({ top: 0, left: 0 });\n  const tooltipRef = useRef(null);\n  const triggerRef = useRef(null);\n\n  const updatePosition = () => {\n    if (triggerRef.current && tooltipRef.current) {\n      const triggerRect = triggerRef.current.getBoundingClientRect();\n      const tooltipRect = tooltipRef.current.getBoundingClientRect();\n      let top = 0;\n      let left = 0;\n\n      switch (position) {\n        case 'right':\n          top = triggerRect.top + (triggerRect.height / 2) - (tooltipRect.height / 2);\n          left = triggerRect.right + 8;\n          break;\n        case 'left':\n          top = triggerRect.top + (triggerRect.height / 2) - (tooltipRect.height / 2);\n          left = triggerRect.left - tooltipRect.width - 8;\n          break;\n        case 'bottom':\n          top = triggerRect.bottom + 8;\n          left = triggerRect.left + (triggerRect.width / 2) - (tooltipRect.width / 2);\n          break;\n        default: // top\n          top = triggerRect.top - tooltipRect.height - 8;\n          left = triggerRect.left + (triggerRect.width / 2) - (tooltipRect.width / 2);\n      }\n\n      // Keep tooltip within viewport\n      const padding = 8;\n      if (left < padding) left = padding;\n      if (left + tooltipRect.width > window.innerWidth - padding) {\n        left = window.innerWidth - tooltipRect.width - padding;\n      }\n      if (top < padding) top = padding;\n      if (top + tooltipRect.height > window.innerHeight - padding) {\n        top = window.innerHeight - tooltipRect.height - padding;\n      }\n\n      setCoords({ top, left });\n    }\n  };\n\n  useEffect(() => {\n    if (show) {\n      // Use requestAnimationFrame to ensure DOM is updated\n      requestAnimationFrame(() => {\n        updatePosition();\n      });\n      const handleResize = () => {\n        requestAnimationFrame(() => {\n          updatePosition();\n        });\n      };\n      window.addEventListener('resize', handleResize);\n      window.addEventListener('scroll', handleResize, true);\n      return () => {\n        window.removeEventListener('resize', handleResize);\n        window.removeEventListener('scroll', handleResize, true);\n      };\n    }\n  }, [show, position]);\n\n  return (\n    <>\n      <div className=\"relative inline-block\">\n        <div ref={triggerRef} onMouseEnter={() => setShow(true)} onMouseLeave={() => setShow(false)} onFocus={() => setShow(true)} onBlur={() => setShow(false)} className=\"cursor-help\" tabIndex={0}>\n          {children}\n        </div>\n      </div>\n      {show && (\n        <>\n          <div\n            ref={tooltipRef}\n            className=\"fixed z-[9999] w-64 max-w-[calc(100vw-2rem)] rounded-lg bg-gray-900 border border-gray-700 p-3 text-xs text-white shadow-2xl\"\n            style={{ top: `${coords.top}px`, left: `${coords.left}px`, pointerEvents: 'auto' }}\n          >\n            {content}\n          </div>\n        </>\n      )}\n    </>\n  );\n};\n\nconst JWTDecoder = () => {\n  const [token, setToken] = useState('');\n  const [publicKey, setPublicKey] = useState('');\n  const [secret, setSecret] = useState('');\n  const [keyFormat, setKeyFormat] = useState('PEM');\n  const [keyFormatMenuOpen, setKeyFormatMenuOpen] = useState(false);\n  const [verificationResult, setVerificationResult] = useState(null);\n  const [isVerifying, setIsVerifying] = useState(false);\n  const [showVerification, setShowVerification] = useState(false);\n  const [payloadViewMode, setPayloadViewMode] = useState('json');\n  const [selectedCompany, setSelectedCompany] = useState('servicenow');\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [companyMenuOpen, setCompanyMenuOpen] = useState(false);\n  const [signatureCopied, setSignatureCopied] = useState(false);\n  const [showSecurityPanel, setShowSecurityPanel] = useState(false);\n  const [simulatedTime, setSimulatedTime] = useState(null); // For time simulation\n  const [showTimeSimulation] = useState(true); // Always show panel, just control expansion\n  const [showTimePanelExpanded, setShowTimePanelExpanded] = useState(false); // Collapsed by default\n  const [showRedactionExpanded, setShowRedactionExpanded] = useState(false); // Collapsed by default\n  const [showComparisonExpanded, setShowComparisonExpanded] = useState(false); // Collapsed by default\n  const [showJWKSExpanded, setShowJWKSExpanded] = useState(false); // Collapsed by default\n\n  const [jwksUrl, setJwksUrl] = useState('');\n  const [jwks, setJwks] = useState(null);\n  const [jwksLoading, setJwksLoading] = useState(false);\n  const [jwksError, setJwksError] = useState(null);\n  const [selectedKeyId, setSelectedKeyId] = useState('');\n  const [showRedaction] = useState(true); // Always visible, controlled by expanded state\n  const [redactedClaims, setRedactedClaims] = useState([]);\n  const [redactedToken, setRedactedToken] = useState(null);\n  const [showComparison] = useState(true); // Always visible, controlled by expanded state\n  const [comparisonToken, setComparisonToken] = useState('');\n  const [comparisonResult, setComparisonResult] = useState(null);\n  const [exampleAlgorithm, setExampleAlgorithm] = useState('HS256');\n  const [showExampleMenu, setShowExampleMenu] = useState(false);\n  const companyMenuRef = useRef(null);\n  const exampleMenuRef = useRef(null);\n  const keyFormatMenuRef = useRef(null);\n  const textareaRef = useRef(null);\n  const tokenTextareaRef = useRef(null);\n  const { error, header, payload, signature, headerRaw, payloadRaw } = useDecoded(token);\n  const status = analyzeStatus(payload);\n  \n  // Security validation\n  const currentTime = simulatedTime || Date.now();\n  const securityValidation = useMemo(() => {\n    if (!header || !payload) return null;\n    return validateJWT(header, payload, signature, currentTime);\n  }, [header, payload, signature, currentTime]);\n  \n  const riskLevel = useMemo(() => {\n    if (!securityValidation) return null;\n    return getRiskLevel(securityValidation.riskScore);\n  }, [securityValidation]);\n  \n  const detectedCompany = useMemo(() => detectCompany(payload), [payload]);\n  const currentCompany = selectedCompany || detectedCompany;\n  const theme = COMPANY_THEMES[currentCompany];\n  const companyHints = useMemo(() => getCompanyHints(payload, currentCompany), [payload, currentCompany]);\n  const companyClaimSet = useMemo(() => getCompanyClaimSet(payload, currentCompany), [payload, currentCompany]);\n  \n  const StatusIcon = status.icon;\n  const hasSignature = signature && signature.length > 0;\n  const isHMAC = header?.alg?.startsWith('HS');\n\n  // Auto-expand signature verification if signature detected\n  useEffect(() => {\n    if (hasSignature && !showVerification) {\n      setShowVerification(true);\n    }\n  }, [hasSignature]);\n\n  // Clear verification result when token changes\n  useEffect(() => {\n    setVerificationResult(null);\n  }, [token]);\n\n  // Auto-resize textarea based on content\n  useEffect(() => {\n    const textarea = textareaRef.current;\n    if (textarea) {\n      textarea.style.height = 'auto';\n      const newHeight = Math.min(textarea.scrollHeight, 400); // Max height 400px\n      textarea.style.height = `${newHeight}px`;\n    }\n  }, [token]);\n\n\n  // Keyboard navigation\n  useEffect(() => {\n    const handleKeyDown = (e) => {\n      if (e.key === 'Escape' && companyMenuOpen) {\n        setCompanyMenuOpen(false);\n      }\n      if (e.key === 'Escape' && showVerification) {\n        setShowVerification(false);\n      }\n    };\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [companyMenuOpen, showVerification]);\n\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (companyMenuRef.current && !companyMenuRef.current.contains(event.target)) {\n        setCompanyMenuOpen(false);\n      }\n      if (exampleMenuRef.current && !exampleMenuRef.current.contains(event.target)) {\n        setShowExampleMenu(false);\n      }\n      if (keyFormatMenuRef.current && !keyFormatMenuRef.current.contains(event.target)) {\n        setKeyFormatMenuOpen(false);\n      }\n    };\n    if (companyMenuOpen || showExampleMenu || keyFormatMenuOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [companyMenuOpen, showExampleMenu, keyFormatMenuOpen]);\n\n  const handleVerify = async () => {\n    if (!token) return;\n    setIsVerifying(true);\n    const key = isHMAC ? secret : publicKey;\n    const result = await verifySignature(token, key, header?.alg, keyFormat);\n    setVerificationResult(result);\n    setIsVerifying(false);\n  };\n\n  const handleFileUpload = (event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onload = (e) => {\n      if (keyFormat === 'JWK') {\n        try {\n          setPublicKey(JSON.stringify(JSON.parse(e.target.result), null, 2));\n        } catch {\n          setPublicKey(e.target.result);\n        }\n      } else {\n        setPublicKey(e.target.result);\n      }\n    };\n    reader.readAsText(file);\n  };\n\n  // JWKS handlers\n  const handleFetchJWKS = async () => {\n    if (!jwksUrl.trim()) return;\n    \n    setJwksLoading(true);\n    setJwksError(null);\n    \n    // Check cache first\n    const cached = getCachedJWKS(jwksUrl);\n    if (cached) {\n      setJwks(cached);\n      setJwksLoading(false);\n      return;\n    }\n    \n    const result = await fetchJWKS(jwksUrl);\n    if (result.success) {\n      setJwks(result.jwks);\n      setCachedJWKS(jwksUrl, result.jwks);\n      \n      // Auto-select key if token has kid in header\n      if (header?.kid && result.keys.length > 0) {\n        const matchingKey = findKeyByKid(result.jwks, header.kid);\n        if (matchingKey) {\n          setSelectedKeyId(header.kid);\n        }\n      }\n    } else {\n      setJwksError(result.error);\n      setJwks(null);\n    }\n    setJwksLoading(false);\n  };\n\n  // Use selected JWK for verification\n  useEffect(() => {\n    if (jwks && selectedKeyId && !isHMAC) {\n      const key = findKeyByKid(jwks, selectedKeyId);\n      if (key) {\n        setKeyFormat('JWK');\n        setPublicKey(JSON.stringify(key, null, 2));\n      }\n    }\n  }, [jwks, selectedKeyId, isHMAC]);\n\n  // Auto-detect sensitive claims for redaction\n  useEffect(() => {\n    if (payload && showRedaction) {\n      const sensitive = Object.keys(payload).filter(key => isSensitiveClaim(key));\n      if (sensitive.length > 0 && redactedClaims.length === 0) {\n        setRedactedClaims(sensitive);\n      }\n    }\n  }, [payload, showRedaction]);\n\n  // Redaction handlers\n  const handleToggleRedaction = (claim) => {\n    setRedactedClaims(prev => {\n      if (prev.includes(claim)) {\n        return prev.filter(c => c !== claim);\n      } else {\n        return [...prev, claim];\n      }\n    });\n  };\n\n  useEffect(() => {\n    if (header && payload) {\n      const redactedPayload = redactClaims(payload, redactedClaims);\n      const redacted = generateRedactedJWT(header, redactedPayload, signature);\n      setRedactedToken(redacted);\n    }\n  }, [header, payload, signature, redactedClaims]);\n\n  // Comparison handler\n  const handleCompareTokens = () => {\n    if (!token || !comparisonToken) return;\n    const result = compareTokens(token, comparisonToken);\n    setComparisonResult(result);\n  };\n\n  // Get status-based colors for headers and borders (only show when there's an actual issue)\n  const getStatusColor = (statusType) => {\n    if (statusType === 'error') return { text: 'text-error', border: 'border-error/40' };\n    if (statusType === 'warning') return { text: 'text-warning', border: 'border-warning/40' };\n    return null; // Don't color success - use default\n  };\n\n  const overallStatus = useMemo(() => {\n    if (error) return 'error';\n    if (!payload) return null;\n    // Only show error/warning if there's an actual problem\n    if (status.tone === 'error') return 'error';\n    if (verificationResult?.verified === false) return 'error';\n    // Don't show warning for unverified - that's normal\n    return null; // Default neutral styling\n  }, [error, payload, status, verificationResult]);\n\n  // Status banner items\n  const statusItems = useMemo(() => {\n    if (!payload) return [];\n    const items = [];\n    \n    // Structure\n    items.push({\n      label: 'Structure',\n      status: 'success',\n      icon: CheckCircle2,\n      message: 'Valid',\n    });\n    \n    // Expiry\n    items.push({\n      label: 'Expiry',\n      status: status.tone,\n      icon: StatusIcon,\n      message: status.message,\n    });\n    \n    // Signature\n    if (hasSignature) {\n      if (verificationResult?.verified) {\n        items.push({\n          label: 'Signature',\n          status: 'success',\n          icon: CheckCircle2,\n          message: 'Verified',\n        });\n      } else if (verificationResult?.verified === false) {\n        items.push({\n          label: 'Signature',\n          status: 'error',\n          icon: X,\n          message: 'Invalid',\n        });\n      } else {\n        items.push({\n          label: 'Signature',\n          status: 'warning',\n          icon: AlertCircle,\n          message: 'Not verified',\n        });\n      }\n    } else {\n      items.push({\n        label: 'Signature',\n        status: 'warning',\n        icon: AlertCircle,\n        message: 'Missing',\n      });\n    }\n    \n    return items;\n  }, [payload, status, hasSignature, verificationResult]);\n\n  return (\n    <div className=\"flex h-screen bg-white overflow-hidden\">\n      {/* Sidebar */}\n      <Navigation currentPageId=\"jwt\" sidebarOpen={sidebarOpen} onSidebarToggle={setSidebarOpen} />\n\n      {/* Main Content - Scrollable */}\n      <div className=\"flex-1 overflow-y-auto bg-gray-50\" style={{ width: '100%', minWidth: 0 }} >\n        <div className=\"mx-auto max-w-[1600px] w-full px-4 sm:px-6 lg:px-8 py-4 sm:py-6 lg:py-10\">\n          <div className=\"space-y-4 sm:space-y-6\">\n          {/* Professional Header with Border */}\n          <header className=\"bg-white border border-gray-300 rounded-xl shadow-sm px-4 sm:px-6 lg:px-8 py-4 sm:py-6 mb-4 sm:mb-6\">\n            <div className=\"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4\">\n              <div className=\"space-y-1 sm:space-y-2\">\n                <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-900\">JWT Debugger</h1>\n                <p className=\"text-sm sm:text-base text-gray-600\">\n                  Decode, verify, and inspect JSON Web Tokens\n                </p>\n              </div>\n              <div className=\"relative\" ref={companyMenuRef}>\n                <button\n                  className=\"flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-900 transition-all border-[0.5px] border-gray-300 rounded-lg hover:border-gray-500 hover:bg-gray-50 focus:outline-none focus:outline-none\"\n                  onClick={() => setCompanyMenuOpen(!companyMenuOpen)}\n                  onKeyDown={(e) => {\n                    if (e.key === 'Enter' || e.key === ' ') {\n                      e.preventDefault();\n                      setCompanyMenuOpen(!companyMenuOpen);\n                    }\n                  }}\n                  tabIndex={0}\n                  aria-label=\"Select company\"\n                  aria-expanded={companyMenuOpen}\n                >\n                  <span className=\"whitespace-nowrap\">{theme.name}</span>\n                  <ChevronDown className={clsx('h-4 w-4 text-gray-500 transition-transform duration-200', companyMenuOpen && 'rotate-180')} />\n                </button>\n                {companyMenuOpen && (\n                  <>\n                    <div className=\"fixed inset-0 z-40\" onClick={() => setCompanyMenuOpen(false)} />\n                    <div className=\"absolute right-0 top-full mt-2 w-40 bg-white border border-gray-200 rounded-lg shadow-xl z-50 overflow-hidden\">\n                      <button\n                        onClick={() => {\n                          setSelectedCompany('servicenow');\n                          setCompanyMenuOpen(false);\n                        }}\n                        className={clsx('w-full px-4 py-2.5 text-left text-sm transition-colors border-b border-gray-100 last:border-b-0 focus:outline-none', currentCompany === 'servicenow' ? 'bg-sky-50 text-sky-700 font-semibold' : 'text-gray-700 hover:bg-gray-50')}\n                        tabIndex={0}\n                      >\n                        ServiceNow\n                      </button>\n                      <button\n                        onClick={() => {\n                          setSelectedCompany('salesforce');\n                          setCompanyMenuOpen(false);\n                        }}\n                        className={clsx('w-full px-4 py-2.5 text-left text-sm transition-colors border-b border-gray-100 last:border-b-0 focus:outline-none', currentCompany === 'salesforce' ? 'bg-sky-50 text-sky-700 font-semibold' : 'text-gray-700 hover:bg-gray-50')}\n                        tabIndex={0}\n                      >\n                        Salesforce\n                      </button>\n                    </div>\n                  </>\n                )}\n              </div>\n            </div>\n          </header>\n\n          {/* Token Input Section - No Box Around Header */}\n          <div className=\"space-y-3 sm:space-y-4\">\n            <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3\">\n              <label htmlFor=\"token-input\" className=\"text-sm sm:text-base font-semibold text-gray-900\">\n                JSON Web Token (JWT)\n              </label>\n              <div className=\"flex flex-wrap items-center gap-2\">\n                  <div className=\"relative\">\n                    <button\n                      onClick={() => setShowExampleMenu(!showExampleMenu)}\n                      onKeyDown={(e) => {\n                        if (e.key === 'Enter' || e.key === ' ') {\n                          e.preventDefault();\n                          setShowExampleMenu(!showExampleMenu);\n                        }\n                      }}\n                      className=\"px-4 py-2 text-xs font-semibold text-gray-700 bg-white border-[0.5px] border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-500 focus:outline-none focus:outline-none transition-all shadow-sm hover:shadow inline-flex items-center gap-2\"\n                      tabIndex={0}\n                    >\n                      <RefreshCw className=\"h-3.5 w-3.5\" />\n                      Generate example ({exampleAlgorithm})\n                      <ChevronDown className=\"h-3 w-3\" />\n                    </button>\n                    {showExampleMenu && (\n                      <div className=\"absolute right-0 top-full mt-2 w-40 border border-gray-200 rounded-lg bg-white shadow-lg z-50 overflow-y-auto max-h-64\">\n                        {['HS256', 'HS384', 'HS512', 'RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512'].map((alg) => (\n                          <button\n                            key={alg}\n                            onClick={async () => {\n                              setExampleAlgorithm(alg);\n                              setShowExampleMenu(false);\n                              const { token, key, algorithm } = await generateJWTExample(alg);\n                              setToken(token);\n                              // Auto-fill the verification key\n                              if (algorithm.startsWith('HS')) {\n                                setSecret(key);\n                                setPublicKey('');\n                              } else {\n                                setPublicKey(key);\n                                setSecret('');\n                                setKeyFormat('PEM');\n                              }\n                              // Show verification panel\n                              if (!showVerification) {\n                                setShowVerification(true);\n                              }\n                            }}\n                            className={clsx(\n                              'w-full px-3 py-2 text-left text-sm transition-colors active:scale-[0.98] focus:outline-none',\n                              exampleAlgorithm === alg \n                                ? 'bg-slate-100 font-medium text-slate-900' \n                                : 'text-slate-700 hover:bg-slate-50'\n                            )}\n                            tabIndex={0}\n                          >\n                            {alg}\n                          </button>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n                  <button\n                    onClick={() => copyText(token)}\n                    onKeyDown={(e) => {\n                      if (e.key === 'Enter' || e.key === ' ') {\n                        e.preventDefault();\n                        copyText(token);\n                      }\n                    }}\n                    className=\"inline-flex items-center gap-2 px-4 py-2 text-xs font-semibold text-gray-700 bg-white border-[0.5px] border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-500 focus:outline-none focus:outline-none transition-all shadow-sm hover:shadow\"\n                    tabIndex={0}\n                  >\n                    <Copy className=\"h-4 w-4\" />\n                    Copy\n                  </button>\n                  <button\n                    onClick={() => setToken('')}\n                    onKeyDown={(e) => {\n                      if (e.key === 'Enter' || e.key === ' ') {\n                        e.preventDefault();\n                        setToken('');\n                      }\n                    }}\n                    className=\"inline-flex items-center gap-1.5 px-4 py-2 text-xs font-semibold text-gray-700 bg-white border-[0.5px] border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-500 focus:outline-none focus:outline-none transition-all shadow-sm hover:shadow\"\n                    tabIndex={0}\n                  >\n                    <X className=\"h-3.5 w-3.5\" />\n                    Clear\n                  </button>\n                </div>\n              </div>\n            </div>\n            {/* Token Value Box - Border on textarea only */}\n            <div className=\"relative\">\n              <textarea\n                ref={textareaRef}\n                id=\"token-input\"\n                value={token}\n                onChange={(e) => {\n                  setToken(e.target.value);\n                  e.target.style.height = 'auto';\n                  const newHeight = Math.min(e.target.scrollHeight, 400);\n                  e.target.style.height = `${newHeight}px`;\n                }}\n                placeholder=\"Paste a JWT token here...\"\n                className=\"min-h-[100px] sm:min-h-[120px] max-h-[300px] sm:max-h-[400px] w-full resize-none border-[0.5px] border-gray-300 rounded-xl bg-white px-3 sm:px-5 py-3 sm:py-4 font-mono text-xs sm:text-sm leading-relaxed text-gray-900 placeholder:text-gray-400 focus:outline-none focus:border-sky-400/60 overflow-y-auto shadow-sm\"\n                style={{ color: 'transparent', caretColor: '#111827', height: 'auto' }}\n                tabIndex={0}\n              />\n              {token && (\n                <div className=\"absolute inset-0 pointer-events-none px-3 sm:px-5 py-3 sm:py-4 font-mono text-xs sm:text-sm leading-relaxed overflow-hidden rounded-xl\" style={{ maxHeight: '400px', overflowY: 'auto' }}>\n                  <pre className=\"whitespace-pre-wrap break-all\">\n                    {(() => {\n                      const parts = token.split('.');\n                      if (parts.length !== 3) return <span className=\"text-gray-900\">{token}</span>;\n                      return (\n                        <>\n                          <span className=\"text-sky-600\">{parts[0]}</span>\n                          <span className=\"text-gray-400\">.</span>\n                          <span className=\"text-purple-600\">{parts[1]}</span>\n                          <span className=\"text-gray-400\">.</span>\n                          <span className=\"text-green-600\">{parts[2]}</span>\n                        </>\n                      );\n                    })()}\n                  </pre>\n                </div>\n              )}\n            </div>\n            {error && (\n              <div className=\"mt-4 flex items-center gap-3 text-sm text-red-700 bg-red-50 border border-red-200 px-5 py-3 rounded-lg\">\n                <AlertCircle className=\"h-5 w-5 flex-shrink-0\" />\n                <span className=\"font-medium\">{error}</span>\n              </div>\n            )}\n            {!error && payload && (\n              <div className=\"mt-3 sm:mt-4 flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 lg:gap-6 text-xs sm:text-sm flex-wrap bg-green-50 border border-green-200 px-3 sm:px-5 py-2.5 sm:py-3 rounded-lg\">\n                <div className=\"flex items-center gap-2\">\n                  <CheckCircle2 className=\"h-4 w-4 text-green-600 flex-shrink-0\" />\n                  <span className=\"font-medium text-gray-900\">Valid JWT</span>\n                </div>\n                {statusItems.map((item, index) => {\n                  const ItemIcon = item.icon;\n                  const itemStyles = toneStyles[item.status];\n                  return (\n                    <React.Fragment key={item.label}>\n                      {index > 0 && <span className=\"hidden sm:inline text-gray-300 mx-2\">·</span>}\n                      <div className=\"flex items-center gap-2\">\n                        <ItemIcon className={clsx('h-3.5 sm:h-4 w-3.5 sm:w-4 flex-shrink-0', itemStyles.text)} />\n                        <span className={clsx('font-medium', itemStyles.text)}>\n                          <span className=\"hidden sm:inline\">{item.label}: </span><span className=\"text-gray-600\">{item.message}</span>\n                        </span>\n                      </div>\n                    </React.Fragment>\n                  );\n                })}\n              </div>\n            )}\n          </div>\n          \n          {payload && (\n            <>\n              {/* Security Validation Panel */}\n              {securityValidation && securityValidation.issues.length > 0 && (\n                <div className=\"mb-4 sm:mb-6 bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden\">\n                  <div \n                    className=\"flex items-start sm:items-center justify-between bg-gray-50 px-4 sm:px-6 py-3 sm:py-4 border-b border-gray-200 cursor-pointer hover:bg-gray-100 transition-colors\"\n                    onClick={() => setShowSecurityPanel(!showSecurityPanel)}\n                  >\n                    <div className=\"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3 flex-1 min-w-0\">\n                      <div className=\"flex items-center gap-2 sm:gap-3\">\n                        <ShieldCheck className=\"h-4 sm:h-5 w-4 sm:w-5 text-slate-600 flex-shrink-0\" />\n                        <span className=\"text-sm sm:text-base font-semibold text-slate-900\">Security Analysis</span>\n                        <span className={clsx('px-2 py-0.5 rounded text-xs font-semibold flex-shrink-0', riskLevel?.bg, riskLevel?.color)}>\n                          {securityValidation.issues.length} {securityValidation.issues.length === 1 ? 'Issue' : 'Issues'}\n                        </span>\n                      </div>\n                      {!showSecurityPanel && (\n                        <span className=\"text-xs text-slate-500\">\n                          • {securityValidation.issues.filter(i => i.severity === SECURITY_SEVERITY.CRITICAL).length > 0 && `${securityValidation.issues.filter(i => i.severity === SECURITY_SEVERITY.CRITICAL).length} Critical`}\n                          {securityValidation.issues.filter(i => i.severity === SECURITY_SEVERITY.HIGH).length > 0 && `, ${securityValidation.issues.filter(i => i.severity === SECURITY_SEVERITY.HIGH).length} High`}\n                          {securityValidation.issues.filter(i => i.severity === SECURITY_SEVERITY.MEDIUM).length > 0 && `, ${securityValidation.issues.filter(i => i.severity === SECURITY_SEVERITY.MEDIUM).length} Medium`}\n                          • {riskLevel?.level} Risk ({securityValidation.riskScore}/100)\n                        </span>\n                      )}\n                    </div>\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        setShowSecurityPanel(!showSecurityPanel);\n                      }}\n                      className=\"p-1 text-gray-500 hover:text-gray-700 transition-colors focus:outline-none\"\n                      tabIndex={0}\n                    >\n                      {showSecurityPanel ? <ChevronUp className=\"h-4 w-4\" /> : <ChevronDown className=\"h-4 w-4\" />}\n                    </button>\n                  </div>\n                  {showSecurityPanel && (\n                  <div className=\"p-6 space-y-4 bg-white\">\n                    {securityValidation.issues.map((issue, index) => {\n                      const severityColors = {\n                        [SECURITY_SEVERITY.CRITICAL]: { text: 'text-red-700', bg: 'bg-red-50', border: 'border-red-200', icon: X },\n                        [SECURITY_SEVERITY.HIGH]: { text: 'text-orange-700', bg: 'bg-orange-50', border: 'border-orange-200', icon: AlertCircle },\n                        [SECURITY_SEVERITY.MEDIUM]: { text: 'text-yellow-700', bg: 'bg-yellow-50', border: 'border-yellow-200', icon: AlertCircle },\n                        [SECURITY_SEVERITY.LOW]: { text: 'text-sky-700', bg: 'bg-sky-50', border: 'border-sky-200', icon: Info },\n                        [SECURITY_SEVERITY.INFO]: { text: 'text-slate-700', bg: 'bg-slate-50', border: 'border-slate-200', icon: Info },\n                      };\n                      const colors = severityColors[issue.severity] || severityColors[SECURITY_SEVERITY.INFO];\n                      const IssueIcon = colors.icon;\n                      \n                      return (\n                        <div key={index} className={clsx('rounded p-3', colors.bg)}>\n                          <div className=\"flex items-start gap-3\">\n                            <IssueIcon className={clsx('h-4 w-4 mt-0.5 flex-shrink-0', colors.text)} />\n                            <div className=\"flex-1\">\n                              <div className=\"flex items-center gap-2 mb-1\">\n                                <span className={clsx('font-medium text-sm', colors.text)}>{issue.title}</span>\n                                <span className={clsx('text-xs font-medium px-2 py-0.5 rounded uppercase', colors.bg, colors.text, colors.border, 'border')}>\n                                  {issue.severity}\n                                </span>\n                              </div>\n                              <p className=\"text-sm text-gray-700 mb-2\">{issue.message}</p>\n                              {issue.recommendation && (\n                                <div className=\"mt-2 pt-2 border-t border-gray-200\">\n                                  <p className=\"text-xs font-medium text-gray-600 mb-1\">Recommendation:</p>\n                                  <p className=\"text-xs text-gray-700\">{issue.recommendation}</p>\n                                </div>\n                              )}\n                            </div>\n                          </div>\n                        </div>\n                      );\n                    })}\n                  </div>\n                  )}\n                </div>\n              )}\n              \n              {/* Two Column Layout: Token Structure | Signature + Verification */}\n              <div className={clsx('grid gap-4 sm:gap-6 mb-4 sm:mb-6 items-stretch', hasSignature ? 'grid-cols-1 lg:grid-cols-2' : 'grid-cols-1')}>\n                {/* Left Column: Unified Token Structure */}\n                <div className={clsx('flex flex-col h-full', !hasSignature && 'lg:col-span-1')}>\n                  <div className=\"border border-gray-200 rounded-xl bg-white shadow-sm overflow-hidden flex flex-col flex-1\">\n                  {/* Main Header */}\n                  <div className=\"flex items-center justify-between bg-gray-50 px-4 sm:px-6 py-3 sm:py-4 border-b border-gray-200\">\n                    <h3 className=\"text-sm sm:text-base font-semibold text-gray-900\">JWT Token Structure</h3>\n                    <div className=\"flex items-center gap-2\">\n                      <div className=\"flex items-center gap-0.5 bg-white p-0.5 border border-gray-300 rounded-md\">\n                        <button\n                          onClick={() => setPayloadViewMode('json')}\n                          className={clsx('px-2 py-1 text-xs font-medium transition-colors rounded', payloadViewMode === 'json' ? 'bg-sky-500 text-white' : 'text-gray-700 hover:bg-gray-50')}\n                          tabIndex={0}\n                        >\n                          JSON\n                        </button>\n                        <button\n                          onClick={() => setPayloadViewMode('table')}\n                          className={clsx('px-2 py-1 text-xs font-medium transition-colors rounded inline-flex items-center gap-1', payloadViewMode === 'table' ? 'bg-sky-500 text-white' : 'text-gray-700 hover:bg-gray-50')}\n                          tabIndex={0}\n                        >\n                          <Table className=\"h-3 w-3\" />\n                          <span className=\"hidden sm:inline\">Table</span>\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Content Area */}\n                  <div className=\"flex-1 py-3 sm:py-4 lg:py-5 px-4 sm:px-5 lg:px-6 text-xs sm:text-sm leading-relaxed bg-white space-y-4 overflow-y-auto min-h-0\">\n                      {/* Header Sub-section */}\n                      <div>\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <div className=\"flex items-center gap-2\">\n                            <div className=\"h-2 w-2 rounded-full\" style={{ backgroundColor: theme.primary }} />\n                            <h4 className=\"text-xs sm:text-sm font-semibold text-gray-900 uppercase tracking-wide\">Header</h4>\n                          </div>\n                          <button\n                            onClick={async () => {\n                              await copyText(pretty(headerRaw));\n                            }}\n                            className=\"inline-flex items-center gap-1.5 px-2 py-1 text-xs font-semibold transition-all focus:outline-none border-[0.5px] border-gray-300 rounded-lg bg-white text-gray-700 hover:bg-gray-50 hover:border-gray-500 focus:outline-none shadow-sm\"\n                            tabIndex={0}\n                          >\n                            <Copy className=\"h-3 w-3\" />\n                            <span className=\"hidden sm:inline\">Copy</span>\n                          </button>\n                        </div>\n                        <div className=\"font-mono text-gray-800 whitespace-pre-wrap break-words\">\n                          {pretty(headerRaw)}\n                        </div>\n                      </div>\n\n                      {/* Divider */}\n                      <div className=\"border-t border-gray-200 my-4\" />\n\n                      {/* Payload Sub-section */}\n                      <div>\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <div className=\"flex items-center gap-2\">\n                            <div className=\"h-2 w-2 rounded-full\" style={{ backgroundColor: theme.primary }} />\n                            <h4 className=\"text-xs sm:text-sm font-semibold text-gray-900 uppercase tracking-wide\">Payload</h4>\n                          </div>\n                          <button\n                            onClick={async () => {\n                              await copyText(pretty(payloadRaw));\n                            }}\n                            className=\"inline-flex items-center gap-1.5 px-2 py-1 text-xs font-semibold transition-all focus:outline-none border-[0.5px] border-gray-300 rounded-lg bg-white text-gray-700 hover:bg-gray-50 hover:border-gray-500 focus:outline-none shadow-sm\"\n                            tabIndex={0}\n                          >\n                            <Copy className=\"h-3 w-3\" />\n                            <span className=\"hidden sm:inline\">Copy</span>\n                          </button>\n                        </div>\n                        {payloadViewMode === 'table' && payload ? (\n                          <div className=\"w-full overflow-x-auto\">\n                            <table className=\"w-full text-xs sm:text-sm border-collapse\">\n                              <thead>\n                                <tr className=\"border-b-2 border-gray-200\">\n                                  <th className=\"px-3 sm:px-4 py-2 text-left font-semibold text-gray-900\">Claim</th>\n                                  <th className=\"px-3 sm:px-4 py-2 text-left font-semibold text-gray-900\">Value</th>\n                                </tr>\n                              </thead>\n                              <tbody>\n                                {Object.entries(payload).map(([key, value]) => {\n                                  const claimInfo = targetClaims.includes(key) ? getClaimInfo(key) : null;\n                                  const hasCompanyBadge = companyClaimSet?.has(key) || false;\n                                  const isTimeClaim = key === 'iat' || key === 'exp' || key === 'nbf';\n                                  const displayValue = isTimeClaim ? formatRelativeTime(value, currentTime) : (typeof value === 'object' ? JSON.stringify(value, null, 2) : String(value));\n                                  \n                                  return (\n                                    <tr key={key} className=\"border-b border-gray-100 hover:bg-gray-50 transition-colors\">\n                                      <td className=\"px-3 sm:px-4 py-2 font-mono text-gray-700 text-xs sm:text-sm\">\n                                        <div className=\"flex items-center gap-1.5\">\n                                          <span>{key}</span>\n                                          {hasCompanyBadge && (\n                                            <span className=\"inline-flex items-center rounded-full px-1.5 py-0.5 text-[10px] font-semibold uppercase text-white flex-shrink-0\" style={{ backgroundColor: theme.badgeBg }}>\n                                              {currentCompany === 'servicenow' ? 'SN' : 'SF'}\n                                            </span>\n                                          )}\n                                          {claimInfo && (\n                                            <Tooltip\n                                              content={\n                                                <div className=\"max-w-sm\">\n                                                  <p className=\"font-semibold mb-1.5 text-sm text-white\">{claimInfo.name}</p>\n                                                  <p className=\"text-xs text-gray-300 leading-relaxed mb-2\">{claimInfo.description}</p>\n                                                  {claimInfo.example && (\n                                                    <div className=\"mt-2 pt-2 border-t border-gray-600\">\n                                                      <p className=\"text-xs text-gray-400 mb-1\">Example:</p>\n                                                      <code className=\"text-xs text-gray-300 font-mono\">{claimInfo.example}</code>\n                                                    </div>\n                                                  )}\n                                                </div>\n                                              }\n                                              position=\"right\"\n                                            >\n                                              <Info className=\"h-3.5 w-3.5 text-gray-500 hover:text-sky-600 cursor-help flex-shrink-0 transition-colors\" />\n                                            </Tooltip>\n                                          )}\n                                        </div>\n                                      </td>\n                                      <td className=\"px-3 sm:px-4 py-2 text-gray-900 text-xs sm:text-sm break-words\">{displayValue}</td>\n                                    </tr>\n                                  );\n                                })}\n                              </tbody>\n                            </table>\n                          </div>\n                        ) : (\n                          <div className=\"font-mono text-gray-800 whitespace-pre-wrap break-words\">\n                            {pretty(payloadRaw).split('\\n').map((line, index) => {\n                              const claimMatch = line.match(/^\\s*\"([^\"]+)\":\\s*(.+)/);\n                              let claimInfo = null;\n                              let hasCompanyBadge = false;\n                              if (claimMatch && targetClaims.includes(claimMatch[1])) {\n                                const claimName = claimMatch[1];\n                                claimInfo = getClaimInfo(claimName);\n                                hasCompanyBadge = companyClaimSet?.has(claimName) || false;\n                              }\n                              \n                              if (claimInfo || hasCompanyBadge) {\n                                const colonIndex = line.indexOf(':');\n                                if (colonIndex !== -1) {\n                                  const keyPart = line.substring(0, colonIndex + 1);\n                                  const valuePart = line.substring(colonIndex + 1).trim();\n                                  return (\n                                    <div key={index} className=\"flex items-center gap-2\" style={{ minHeight: '18px' }}>\n                                      <span className=\"text-gray-900 whitespace-pre\">{keyPart}</span>\n                                      <span className=\"text-gray-900 whitespace-pre\">{valuePart}</span>\n                                      {hasCompanyBadge && (\n                                        <span className=\"inline-flex items-center rounded-full px-1.5 py-0.5 text-[10px] font-semibold uppercase text-white flex-shrink-0\" style={{ backgroundColor: theme.badgeBg }}>\n                                          {currentCompany === 'servicenow' ? 'SN' : 'SF'}\n                                        </span>\n                                      )}\n                                      {claimInfo && (\n                                        <Tooltip\n                                          content={\n                                            <div className=\"max-w-sm\">\n                                              <p className=\"font-semibold mb-1.5 text-sm text-white\">{claimInfo.name}</p>\n                                              <p className=\"text-xs text-gray-300 leading-relaxed mb-2\">{claimInfo.description}</p>\n                                              {claimInfo.example && (\n                                                <div className=\"mt-2 pt-2 border-t border-gray-600\">\n                                                  <p className=\"text-xs text-gray-400 mb-1\">Example:</p>\n                                                  <code className=\"text-xs text-gray-300 font-mono\">{claimInfo.example}</code>\n                                                </div>\n                                              )}\n                                            </div>\n                                          }\n                                          position=\"right\"\n                                        >\n                                          <Info className=\"h-3.5 w-3.5 text-gray-500 hover:text-sky-600 cursor-help flex-shrink-0 transition-colors\" />\n                                        </Tooltip>\n                                      )}\n                                    </div>\n                                  );\n                                }\n                              }\n                              return <div key={index} style={{ minHeight: '18px' }}>{line}</div>;\n                            })}\n                          </div>\n                        )}\n                      </div>\n                  </div>\n                  </div>\n                </div>\n\n                {/* Right Column: Signature + Verification */}\n                {hasSignature && (\n                  <div className=\"flex flex-col h-full\">\n                    {/* Signature - Compact */}\n                    <div className=\"flex-shrink-0\">\n                      <CodeSection\n                        title=\"Signature: Cryptographic Signature\"\n                        content={signature}\n                        description=\"\"\n                        onCopy={copyText}\n                        viewMode=\"json\"\n                        theme={theme}\n                        statusColor={verificationResult?.verified === false ? getStatusColor('error') : null}\n                        isHeader={true}\n                      />\n                    </div>\n                    \n                    {/* Signature Verification - Using CodeSection Pattern */}\n                    <div className=\"mt-4 sm:mt-6 flex flex-col flex-1 min-h-0 border border-gray-200 rounded-xl bg-white shadow-sm overflow-hidden\">\n                      <div className=\"flex-1 min-h-0 [&>div]:border-0 [&>div]:rounded-none [&>div]:shadow-none\">\n                        <CodeSection\n                          title={`Verify Signature: ${isHMAC ? 'Secret Key' : 'Public Key'}`}\n                          content={isHMAC ? secret : publicKey || ''}\n                          description=\"\"\n                          onCopy={copyText}\n                          viewMode=\"json\"\n                          theme={theme}\n                          statusColor={verificationResult?.verified === false ? getStatusColor('error') : verificationResult?.verified === true ? null : null}\n                          isHeader={true}\n                          editable={true}\n                          onContentChange={(value) => {\n                            if (isHMAC) {\n                              setSecret(value);\n                            } else {\n                              setPublicKey(value);\n                            }\n                            setVerificationResult(null);\n                          }}\n                          placeholder={isHMAC ? 'Enter the secret used to sign the JWT' : keyFormat === 'PEM' ? '-----BEGIN PUBLIC KEY-----\\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8A...\\n-----END PUBLIC KEY-----' : '{\\n  \"kty\": \"RSA\",\\n  \"n\": \"...\",\\n  \"e\": \"AQAB\"\\n}'}\n                        />\n                      </div>\n                      {/* Bottom Banner with Options - Attached */}\n                      <div className=\"flex items-center justify-between bg-gray-50 border-t border-gray-200 px-3 sm:px-4 py-2 sm:py-2.5\">\n                        <div className=\"flex items-center gap-2 sm:gap-3 flex-wrap\">\n                          <label className=\"text-xs sm:text-sm font-medium text-gray-700\">\n                            {isHMAC ? 'Secret' : 'Public Key'} Format\n                          </label>\n                          {!isHMAC && (\n                            <div className=\"relative\" ref={keyFormatMenuRef}>\n                              <button\n                                type=\"button\"\n                                onClick={() => setKeyFormatMenuOpen(!keyFormatMenuOpen)}\n                                className=\"inline-flex items-center gap-2 px-3 py-1.5 text-xs sm:text-sm font-medium text-gray-700 bg-white border-[0.5px] border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-500 focus:outline-none transition-all shadow-sm\"\n                                tabIndex={0}\n                              >\n                                <span>{keyFormat}</span>\n                                <ChevronDown className={clsx('h-3.5 w-3.5 text-gray-500 transition-transform duration-200', keyFormatMenuOpen && 'rotate-180')} />\n                              </button>\n                              {keyFormatMenuOpen && (\n                                <>\n                                  <div className=\"fixed inset-0 z-[49]\" onClick={() => setKeyFormatMenuOpen(false)} />\n                                  <div className=\"absolute left-0 top-full mt-1 w-32 bg-white border border-gray-200 rounded-lg shadow-xl z-[100] overflow-hidden\">\n                                    <button\n                                      onClick={() => {\n                                        setKeyFormat('PEM');\n                                        setPublicKey('');\n                                        setVerificationResult(null);\n                                        setKeyFormatMenuOpen(false);\n                                      }}\n                                      className={clsx('w-full px-3 py-2 text-left text-xs sm:text-sm transition-colors focus:outline-none border-b border-gray-100 last:border-b-0', keyFormat === 'PEM' ? 'bg-sky-50 text-sky-600 font-medium' : 'text-gray-700 hover:bg-gray-50')}\n                                      tabIndex={0}\n                                    >\n                                      PEM\n                                    </button>\n                                    <button\n                                      onClick={() => {\n                                        setKeyFormat('JWK');\n                                        setPublicKey('');\n                                        setVerificationResult(null);\n                                        setKeyFormatMenuOpen(false);\n                                      }}\n                                      className={clsx('w-full px-3 py-2 text-left text-xs sm:text-sm transition-colors focus:outline-none border-b border-gray-100 last:border-b-0', keyFormat === 'JWK' ? 'bg-sky-50 text-sky-600 font-medium' : 'text-gray-700 hover:bg-gray-50')}\n                                      tabIndex={0}\n                                    >\n                                      JWK\n                                    </button>\n                                  </div>\n                                </>\n                              )}\n                            </div>\n                          )}\n                          {!isHMAC && (\n                            <label className=\"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-gray-700 bg-white border-[0.5px] border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-500 cursor-pointer transition-all focus-within:outline-none shadow-sm\">\n                              <Upload className=\"h-3.5 w-3.5\" />\n                              Upload\n                              <input type=\"file\" accept=\".pem,.key,.crt,.pub,.json\" onChange={handleFileUpload} className=\"hidden\" tabIndex={0} />\n                            </label>\n                          )}\n                          {(publicKey || secret) && (\n                            <button\n                              onClick={() => {\n                                setPublicKey('');\n                                setSecret('');\n                                setVerificationResult(null);\n                              }}\n                              className=\"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-semibold text-gray-700 bg-white border-[0.5px] border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-500 focus:outline-none transition-all shadow-sm hover:shadow\"\n                              tabIndex={0}\n                            >\n                              <X className=\"h-3.5 w-3.5\" />\n                              Clear\n                            </button>\n                          )}\n                        </div>\n                        <div className=\"flex items-center gap-2\">\n                          {verificationResult && (\n                            <div className={clsx('flex items-center gap-1 sm:gap-1.5 px-1.5 sm:px-2 py-0.5 rounded text-xs font-medium flex-shrink-0', verificationResult.verified ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700')}>\n                              {verificationResult.verified ? <CheckCircle2 className=\"h-3 sm:h-3.5 w-3 sm:w-3.5\" /> : <X className=\"h-3 sm:h-3.5 w-3 sm:w-3.5\" />}\n                              <span className=\"hidden sm:inline\">{verificationResult.verified ? 'Verified' : 'Failed'}</span>\n                            </div>\n                          )}\n                          <button\n                            onClick={handleVerify}\n                            disabled={!token || (!isHMAC && !publicKey) || (isHMAC && !secret) || isVerifying}\n                            className=\"px-4 sm:px-5 py-2 text-xs sm:text-sm font-semibold text-white bg-sky-500 hover:bg-sky-600 rounded-lg transition-all disabled:bg-gray-300 disabled:cursor-not-allowed disabled:hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2 shadow-sm hover:shadow\"\n                            tabIndex={0}\n                          >\n                            {isVerifying ? 'Verifying...' : 'Verify Signature'}\n                          </button>\n                        </div>\n                      </div>\n                      {verificationResult && !verificationResult.verified && (\n                        <div className=\"mt-2 bg-red-50 border border-red-200 px-3 py-2 rounded-lg\">\n                          <div className=\"flex items-center gap-2 text-xs sm:text-sm text-red-700 font-medium\">\n                            <X className=\"h-3.5 w-3.5 flex-shrink-0\" />\n                            <span>{verificationResult.error || 'Signature verification failed'}</span>\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n              )}\n              </div>\n\n              {/* JWKS Panel */}\n              {!isHMAC && (\n                <div className=\"mb-4 sm:mb-6 bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden\">\n                  <div \n                    className=\"flex items-center justify-between bg-gray-50 px-4 sm:px-6 py-3 sm:py-4 border-b border-gray-200 cursor-pointer hover:bg-gray-100 transition-colors\"\n                    onClick={() => setShowJWKSExpanded(!showJWKSExpanded)}\n                  >\n                    <div className=\"flex items-center gap-2 sm:gap-3\">\n                      <Key className=\"h-4 sm:h-5 w-4 sm:w-5 text-gray-600 flex-shrink-0\" />\n                      <span className=\"text-sm sm:text-base font-semibold text-gray-900\">JWKS (JSON Web Key Set)</span>\n                    </div>\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        setShowJWKSExpanded(!showJWKSExpanded);\n                      }}\n                      className=\"p-1 text-gray-500 hover:text-gray-700 transition-colors focus:outline-none\"\n                      tabIndex={0}\n                    >\n                      {showJWKSExpanded ? <ChevronUp className=\"h-4 w-4\" /> : <ChevronDown className=\"h-4 w-4\" />}\n                    </button>\n                  </div>\n                  {showJWKSExpanded && (\n                    <div className=\"p-4 sm:px-6 sm:py-4 space-y-4\">\n                    <div className=\"flex items-center gap-2\">\n                      <input\n                        type=\"url\"\n                        value={jwksUrl}\n                        onChange={(e) => setJwksUrl(e.target.value)}\n                        placeholder=\"https://example.com/.well-known/jwks.json\"\n                          className=\"flex-1 border-[0.5px] border-gray-300 rounded-lg bg-white px-4 py-2.5 text-sm text-gray-900 placeholder:text-gray-400 focus:outline-none focus:border-sky-400/60\"\n                        onKeyDown={(e) => {\n                          if (e.key === 'Enter') {\n                            handleFetchJWKS();\n                          }\n                        }}\n                      />\n                      <button\n                        onClick={handleFetchJWKS}\n                        disabled={jwksLoading || !jwksUrl.trim()}\n                        className=\"inline-flex items-center gap-2 px-5 py-2.5 text-sm font-semibold text-white bg-sky-500 hover:bg-sky-600 rounded-lg transition-all disabled:bg-gray-300 disabled:cursor-not-allowed disabled:hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2 shadow-sm hover:shadow\"\n                      >\n                        {jwksLoading ? (\n                          <>\n                            <div className=\"h-4 w-4 border-2 border-slate-400 border-t-transparent rounded-full animate-spin\" />\n                            Loading...\n                          </>\n                        ) : (\n                          <>\n                            <RefreshCw className=\"h-4 w-4\" />\n                            Fetch\n                          </>\n                        )}\n                      </button>\n                    </div>\n                    {jwksError && (\n                      <div className=\"bg-red-50 border border-red-200 px-4 py-3 rounded-lg text-sm text-red-700 font-medium\">\n                        {jwksError}\n                      </div>\n                    )}\n                    {jwks && jwks.keys && jwks.keys.length > 0 && (\n                      <div className=\"space-y-3\">\n                        <label className=\"block text-sm font-semibold text-gray-700\">Select Key:</label>\n                        <select\n                          value={selectedKeyId}\n                          onChange={(e) => setSelectedKeyId(e.target.value)}\n                          className=\"w-full border-[0.5px] border-gray-300 rounded-lg bg-white px-4 py-2.5 text-sm text-gray-900 focus:outline-none focus:border-sky-400/60 cursor-pointer hover:bg-gray-50\"\n                        >\n                          <option value=\"\">-- Select a key --</option>\n                          {jwks.keys.map((key, index) => (\n                            <option key={index} value={key.kid || index}>\n                              {key.kid || `Key ${index + 1}`} ({key.alg || 'N/A'})\n                            </option>\n                          ))}\n                        </select>\n                        <p className=\"text-xs text-gray-500\">\n                          Found {jwks.keys.length} key(s). {selectedKeyId ? 'Key selected for verification.' : 'Select a key to use for verification.'}\n                        </p>\n                      </div>\n                    )}\n                    </div>\n                  )}\n                </div>\n              )}\n\n              {/* Time Simulation Panel */}\n              {showTimeSimulation && (\n                <div className=\"mb-4 sm:mb-6 bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden\">\n                  <div \n                    className=\"flex items-center justify-between border-b border-gray-200 bg-gray-50 px-4 sm:px-6 py-3 sm:py-4 cursor-pointer hover:bg-gray-100 transition-colors\"\n                    onClick={() => setShowTimePanelExpanded(!showTimePanelExpanded)}\n                  >\n                    <div className=\"flex items-center gap-3 flex-1\">\n                      <Clock className=\"h-4 w-4 text-gray-600\" />\n                      <span className=\"text-sm font-medium text-gray-900\">Time Simulation</span>\n                      {!showTimePanelExpanded && (\n                        <span className=\"text-xs text-gray-500 ml-2\">\n                          {simulatedTime ? `Simulated: ${new Date(simulatedTime).toLocaleString()}` : 'Real time'}\n                          {payload?.exp && ` • Token ${payload.exp * 1000 < currentTime ? 'expired' : 'valid'}`}\n                        </span>\n                      )}\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        setShowTimePanelExpanded(!showTimePanelExpanded);\n                      }}\n                        className=\"p-1 text-gray-500 hover:text-gray-700 transition-colors focus:outline-none\"\n                        tabIndex={0}\n                      >\n                        {showTimePanelExpanded ? <ChevronUp className=\"h-4 w-4\" /> : <ChevronDown className=\"h-4 w-4\" />}\n                      </button>\n                    </div>\n                  </div>\n                  {showTimePanelExpanded && (\n                  <div className=\"p-6 space-y-4\">\n                    <div className=\"flex items-center gap-4 flex-wrap\">\n                      <label className=\"text-sm font-medium text-gray-700 whitespace-nowrap\">Current Time:</label>\n                      <input\n                        type=\"datetime-local\"\n                        value={simulatedTime ? new Date(simulatedTime).toISOString().slice(0, 16) : new Date().toISOString().slice(0, 16)}\n                        onChange={(e) => {\n                          const time = new Date(e.target.value).getTime();\n                          setSimulatedTime(time);\n                        }}\n                        className=\"border-[0.5px] border-gray-300 rounded bg-white px-3 py-1.5 text-sm text-gray-900 focus:outline-none focus:border-sky-400/60\"\n                      />\n                      <button\n                        onClick={() => {\n                          const now = Date.now();\n                          const hoursOffset = prompt('Fast-forward hours (negative to go back):', '0');\n                          if (hoursOffset !== null && !isNaN(parseFloat(hoursOffset))) {\n                            setSimulatedTime(now + (parseFloat(hoursOffset) * 60 * 60 * 1000));\n                          }\n                        }}\n                        className=\"px-3 py-1.5 text-xs font-medium text-gray-700 hover:text-gray-900 transition-colors focus:outline-none\"\n                      >\n                        Fast Forward\n                      </button>\n                      <button\n                        onClick={() => setSimulatedTime(null)}\n                        className=\"px-3 py-1.5 text-xs font-medium text-gray-700 hover:text-gray-900 transition-colors focus:outline-none\"\n                      >\n                        Reset\n                      </button>\n                    </div>\n                    {payload?.exp && (\n                      <div className=\"pt-3 border-t border-gray-100\">\n                        <p className=\"text-sm\">\n                          <span className=\"text-gray-600\">Token </span>\n                          <span className={clsx('font-semibold', payload.exp * 1000 < currentTime ? 'text-red-600' : 'text-green-600')}>\n                            {payload.exp * 1000 < currentTime ? 'expired' : 'valid'}\n                          </span>\n                          <span className=\"text-gray-600\"> at simulated time</span>\n                        </p>\n                      </div>\n                    )}\n                  </div>\n                  )}\n                </div>\n              )}\n\n              {/* Redaction Panel */}\n              {showRedaction && payload && (\n                <div className=\"mb-4 sm:mb-6 bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden\">\n                  <div \n                    className=\"flex items-center justify-between border-b border-gray-200 bg-gray-50 px-4 sm:px-6 py-3 sm:py-4 cursor-pointer hover:bg-gray-100 transition-colors\"\n                    onClick={() => setShowRedactionExpanded(!showRedactionExpanded)}\n                  >\n                    <div className=\"flex items-center gap-3 flex-1\">\n                      <Lock className=\"h-5 w-5 text-slate-600\" />\n                      <span className=\"text-base font-semibold text-slate-900\">Redact Sensitive Claims</span>\n                      {!showRedactionExpanded && (\n                        <span className=\"text-xs text-slate-500 ml-2\">\n                          • {redactedClaims.length} claim{redactedClaims.length !== 1 ? 's' : ''} selected{redactedToken ? ' • Redacted token ready' : ''}\n                        </span>\n                      )}\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <button\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          setShowRedactionExpanded(!showRedactionExpanded);\n                        }}\n                        className=\"p-1.5 hover:bg-slate-200 rounded-lg transition focus:outline-none focus:ring-2 focus:ring-slate-300\"\n                        tabIndex={0}\n                      >\n                        {showRedactionExpanded ? <ChevronUp className=\"h-4 w-4 text-slate-600\" /> : <ChevronDown className=\"h-4 w-4 text-slate-600\" />}\n                      </button>\n                    </div>\n                  </div>\n                  {showRedactionExpanded && (\n                  <div className=\"p-6 space-y-5\">\n                    <div className=\"space-y-2\">\n                      <label className=\"block text-sm font-medium text-slate-700\">Select claims to redact:</label>\n                      <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-48 overflow-y-auto\">\n                        {Object.keys(payload).map((claim) => (\n                          <label key={claim} className=\"flex items-center gap-2 p-2 rounded border border-slate-200 hover:bg-slate-50 cursor-pointer\">\n                            <input\n                              type=\"checkbox\"\n                              checked={redactedClaims.includes(claim)}\n                              onChange={() => handleToggleRedaction(claim)}\n                              className=\"rounded\"\n                            />\n                            <span className={clsx('text-sm', isSensitiveClaim(claim) ? 'font-semibold text-red-700' : 'text-slate-700')}>\n                              {claim}\n                              {isSensitiveClaim(claim) && <span className=\"ml-1 text-xs text-red-500\">(sensitive)</span>}\n                            </span>\n                          </label>\n                        ))}\n                      </div>\n                    </div>\n                    {redactedToken && (\n                      <div className=\"pt-3 border-t border-gray-100\">\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">Redacted Token:</label>\n                        <textarea\n                          value={redactedToken}\n                          readOnly\n                          className=\"w-full h-24 resize-none border-[0.5px] border-gray-300 rounded bg-gray-50 px-3 py-2 font-mono text-xs text-gray-700 focus:outline-none focus:border-sky-400/60\"\n                        />\n                        <button\n                          onClick={() => copyText(redactedToken)}\n                          className=\"mt-2 inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-gray-700 hover:text-gray-900 transition-colors focus:outline-none\"\n                        >\n                          <Copy className=\"h-3.5 w-3.5\" />\n                          Copy Redacted Token\n                        </button>\n                      </div>\n                    )}\n                  </div>\n                  )}\n                </div>\n              )}\n\n              {/* Comparison Panel */}\n              {showComparison && (\n                <div className=\"mb-4 sm:mb-6 bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden\">\n                  <div \n                    className=\"flex items-center justify-between border-b border-gray-200 bg-gray-50 px-4 sm:px-6 py-3 sm:py-4 cursor-pointer hover:bg-gray-100 transition-colors\"\n                    onClick={() => setShowComparisonExpanded(!showComparisonExpanded)}\n                  >\n                    <div className=\"flex items-center gap-2 flex-1\">\n                      <GitCompare className=\"h-4 w-4 text-gray-600\" />\n                      <span className=\"text-sm font-medium text-gray-900\">Compare Tokens</span>\n                      {!showComparisonExpanded && (\n                        <span className=\"text-xs text-gray-500 ml-2\">\n                          {comparisonResult \n                            ? `${comparisonResult.summary.headerChanges + comparisonResult.summary.payloadChanges} difference${comparisonResult.summary.headerChanges + comparisonResult.summary.payloadChanges !== 1 ? 's' : ''}`\n                            : 'Paste second token to compare'}\n                        </span>\n                      )}\n                    </div>\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        setShowComparisonExpanded(!showComparisonExpanded);\n                      }}\n                      className=\"p-1 text-gray-500 hover:text-gray-700 transition-colors focus:outline-none\"\n                      tabIndex={0}\n                    >\n                      {showComparisonExpanded ? <ChevronUp className=\"h-4 w-4\" /> : <ChevronDown className=\"h-4 w-4\" />}\n                    </button>\n                  </div>\n                  {showComparisonExpanded && (\n                  <div className=\"p-6 space-y-4\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-slate-700 mb-2\">Second Token:</label>\n                      <textarea\n                        value={comparisonToken}\n                        onChange={(e) => setComparisonToken(e.target.value)}\n                        placeholder=\"Paste the second JWT token to compare\"\n                        className=\"w-full h-32 resize-none border-[0.5px] border-gray-300 rounded bg-white px-3 py-2 font-mono text-sm text-gray-900 placeholder:text-gray-400 focus:outline-none focus:border-sky-400/60\"\n                      />\n                    </div>\n                    <button\n                      onClick={handleCompareTokens}\n                      disabled={!token || !comparisonToken}\n                              className=\"px-4 py-2 text-sm font-medium text-white bg-sky-500 hover:bg-sky-600 rounded-lg transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed disabled:hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-1\"\n                    >\n                      Compare Tokens\n                    </button>\n                    {comparisonResult && (\n                      <div className=\"pt-3 border-t border-gray-100 space-y-3\">\n                        <div className=\"bg-gray-50 px-3 py-2 rounded\">\n                          <p className=\"text-sm font-medium text-gray-900 mb-1\">Summary:</p>\n                          <p className=\"text-sm text-gray-700\">{comparisonResult ? getDiffSummary(comparisonResult) : ''}</p>\n                        </div>\n                        {comparisonResult.valid && (\n                          <div className=\"grid grid-cols-2 gap-4\">\n                            <div>\n                              <p className=\"text-sm font-medium text-gray-900 mb-2\">Header Changes:</p>\n                              <div className=\"space-y-1 text-xs\">\n                                {comparisonResult.headerDiff.added.length > 0 && (\n                                  <div className=\"text-green-700\">+ {comparisonResult.headerDiff.added.length} added</div>\n                                )}\n                                {comparisonResult.headerDiff.removed.length > 0 && (\n                                  <div className=\"text-red-700\">- {comparisonResult.headerDiff.removed.length} removed</div>\n                                )}\n                                {comparisonResult.headerDiff.changed.length > 0 && (\n                                  <div className=\"text-yellow-700\">~ {comparisonResult.headerDiff.changed.length} changed</div>\n                                )}\n                              </div>\n                            </div>\n                            <div>\n                              <p className=\"text-sm font-medium text-gray-900 mb-2\">Payload Changes:</p>\n                              <div className=\"space-y-1 text-xs\">\n                                {comparisonResult.payloadDiff.added.length > 0 && (\n                                  <div className=\"text-green-700\">+ {comparisonResult.payloadDiff.added.length} added</div>\n                                )}\n                                {comparisonResult.payloadDiff.removed.length > 0 && (\n                                  <div className=\"text-red-700\">- {comparisonResult.payloadDiff.removed.length} removed</div>\n                                )}\n                                {comparisonResult.payloadDiff.changed.length > 0 && (\n                                  <div className=\"text-yellow-700\">~ {comparisonResult.payloadDiff.changed.length} changed</div>\n                                )}\n                              </div>\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                    )}\n                  </div>\n                  )}\n                </div>\n              )}\n            </>\n          )}\n        </div>\n        <Footer />\n      </div>\n    </div>\n  );\n};\n\nReactDOM.createRoot(document.getElementById('root')).render(<JWTDecoder />);\n"],"names":["__iconNode","Table","createLucideIcon","InvalidTokenError","b64DecodeUnicode","str","m","p","code","base64UrlDecode","output","jwtDecode","token","options","pos","part","decoded","e","SECURITY_SEVERITY","CLAIM_INFO","validateJWT","header","payload","signature","currentTime","issues","alg","expMs","deltaDays","skewMinutes","lifetimeHours","nbfMs","deltaMinutes","riskScore","score","issue","getRiskLevel","getClaimInfo","claimName","formatRelativeTime","timestamp","ts","date","seconds","minutes","hours","days","relative","fetchJWKS","jwksUrl","response","jwks","error","findKeyByKid","kid","key","jwksCache","CACHE_TTL","getCachedJWKS","url","cached","setCachedJWKS","SENSITIVE_CLAIMS","SENSITIVE_PATTERNS","isSensitiveClaim","lower","sensitive","pattern","redactClaims","claimsToRedact","maskChar","maskLength","redacted","toRedact","claim","value","generateRedactedJWT","redactedPayload","originalSignature","base64UrlEncode","utf8","_","p1","headerEncoded","payloadEncoded","compareTokens","token1","token2","parseToken","parts","segment","padded","c","headerRaw","payloadRaw","t1","t2","headerDiff","diffObjects","payloadDiff","signaturesMatch","obj1","obj2","allKeys","added","removed","changed","unchanged","val1","val2","getDiffSummary","comparison","COMPANY_THEMES","detectCompany","getCompanyHints","company","hints","getCompanyClaimSet","claimSet","pretty","analyzeStatus","AlertCircle","now","diffHours","CheckCircle2","toneStyles","targetClaims","generateRandomSecret","length","chars","result","i","generateJWTExample","algorithm","firstNames","lastNames","domains","firstName","lastName","domain","email","userName","sysId","iat","exp","message","keyForVerification","secret","encoder","keyData","hashAlg","cryptoKey","sigBytes","keyPair","publicKeyData","namedCurve","ShieldCheck","Key","Network","FileCode","FileJson","copyText","text","err","verifySignature","keyFormat","verified","jwk","cleanKey","signatureBase64","padLength","paddedSignature","signatureBytes","verifyAlgorithm","useDecoded","useMemo","segments","CodeSection","title","content","description","onCopy","viewMode","onViewModeChange","theme","statusColor","isHeader","companyClaimSet","currentCompany","calculateTTL","editable","onContentChange","placeholder","copied","setCopied","useState","lines","parsedPayload","dotColor","handleCopy","contentHeight","isTableMode","jsxs","jsx","clsx","Copy","line","index","claimInfo","hasCompanyBadge","claimMatch","colonIndex","keyPart","valuePart","Tooltip","Info","children","position","show","setShow","coords","setCoords","tooltipRef","useRef","triggerRef","updatePosition","triggerRect","tooltipRect","top","left","padding","useEffect","handleResize","Fragment","JWTDecoder","setToken","publicKey","setPublicKey","setSecret","setKeyFormat","keyFormatMenuOpen","setKeyFormatMenuOpen","verificationResult","setVerificationResult","isVerifying","setIsVerifying","showVerification","setShowVerification","payloadViewMode","setPayloadViewMode","selectedCompany","setSelectedCompany","sidebarOpen","setSidebarOpen","searchQuery","setSearchQuery","companyMenuOpen","setCompanyMenuOpen","signatureCopied","setSignatureCopied","showSecurityPanel","setShowSecurityPanel","simulatedTime","setSimulatedTime","showTimeSimulation","showTimePanelExpanded","setShowTimePanelExpanded","showRedactionExpanded","setShowRedactionExpanded","showComparisonExpanded","setShowComparisonExpanded","showJWKSExpanded","setShowJWKSExpanded","setJwksUrl","setJwks","jwksLoading","setJwksLoading","jwksError","setJwksError","selectedKeyId","setSelectedKeyId","showRedaction","redactedClaims","setRedactedClaims","redactedToken","setRedactedToken","showComparison","comparisonToken","setComparisonToken","comparisonResult","setComparisonResult","exampleAlgorithm","setExampleAlgorithm","showExampleMenu","setShowExampleMenu","companyMenuRef","exampleMenuRef","keyFormatMenuRef","textareaRef","status","securityValidation","riskLevel","detectedCompany","StatusIcon","hasSignature","isHMAC","textarea","newHeight","handleKeyDown","handleClickOutside","event","handleVerify","handleFileUpload","file","reader","handleFetchJWKS","handleToggleRedaction","prev","handleCompareTokens","getStatusColor","statusType","statusItems","items","X","Navigation","ChevronDown","RefreshCw","item","ItemIcon","itemStyles","React","ChevronUp","severityColors","colors","IssueIcon","displayValue","Upload","Clock","time","hoursOffset","Lock","GitCompare","Footer","ReactDOM"],"mappings":"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","x_google_ignoreList":[0,1]}